<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  

  <!-- SEO Optimization -->

  <title>Pythia‚Ñ¢ - Website Performance Analysis Tool | One Score to Rank Them All</title>

  <meta name="description" content="Pythia‚Ñ¢ is the ultimate website performance oracle analyzing speed, accessibility, SEO, privacy, and sustainability. Get one unified P-Score for any website in seconds.">

  <meta name="keywords" content="website performance, one score, site speed test, SEO analyzer, accessibility checker, website security, performance testing, web optimization, P-Score">

  

  <!-- Open Graph / Facebook -->

  <meta property="og:type" content="website">

  <meta property="og:url" content="https://p-score.me/">

  <meta property="og:title" content="Pythia‚Ñ¢ - Website Performance Oracle | Scanned by Pythia‚Ñ¢ üîÆ">

  <meta property="og:description" content="Complete website performance analysis in one unified P-Score. Measure speed, accessibility, SEO, privacy, sustainability and more.">

  <meta property="og:image" content="https://p-score.me/pythia-oracle.gif">

  

  <!-- Twitter -->

  <meta property="twitter:card" content="summary_large_image">

  <meta property="twitter:url" content="https://p-score.me/">

  <meta property="twitter:title" content="Pythia‚Ñ¢ - Website Performance Analysis Tool">

  <meta property="twitter:description" content="One score to rank them all. Complete website performance oracle. Scanned by Pythia‚Ñ¢ üîÆ">

  <meta property="twitter:image" content="https://p-score.me/pythia-oracle.gif">

  

  <!-- Canonical -->

  <meta name="canonical" href="https://p-score.me/">

  

  <script src="https://cdn.tailwindcss.com"></script>

  <style>

    /* ==== NEW ENHANCEMENTS ==== */

    

    /* Loading Spinner */

    @keyframes retro-spin {

      0% { transform: rotate(0deg); }

      100% { transform: rotate(360deg); }

    }

    

    .retro-spinner {

      width: 40px;

      height: 40px;

      border: 4px solid #003300;

      border-top: 4px solid #00ff00;

      border-radius: 50%;

      animation: retro-spin 1s linear infinite;

      margin: 20px auto;

    }

    

    body.retro .retro-spinner {

      border: 4px solid #003300;

      border-top: 4px solid #00ff00;

      box-shadow: 0 0 20px #00ff00;

    }

    

    /* CRT Effects */

    @keyframes flicker {

      0% { opacity: 0.98; }

      5% { opacity: 1; }

      10% { opacity: 0.98; }

      15% { opacity: 1; }

      20% { opacity: 0.97; }

      25% { opacity: 1; }

      100% { opacity: 1; }

    }

    

    @keyframes scanline {

      0% { transform: translateY(-100%); }

      100% { transform: translateY(100vh); }

    }

    

    body.retro::before {

      content: '';

      position: fixed;

      top: 0;

      left: 0;

      width: 100%;

      height: 100%;

      background: repeating-linear-gradient(

        0deg,

        rgba(0, 255, 0, 0.03) 0px,

        rgba(0, 255, 0, 0.03) 1px,

        transparent 1px,

        transparent 2px

      );

      pointer-events: none;

      z-index: 9999;

      animation: flicker 0.15s infinite;

    }

    

    body.retro::after {

      content: '';

      position: fixed;

      top: 0;

      left: 0;

      width: 100%;

      height: 3px;

      background: linear-gradient(

        to bottom,

        rgba(0, 255, 0, 0) 0%,

        rgba(0, 255, 0, 0.3) 50%,

        rgba(0, 255, 0, 0) 100%

      );

      pointer-events: none;

      z-index: 9998;

      animation: scanline 6s linear infinite;

    }

    

    /* Boot Sequence */

    @keyframes boot-fade {

      0% { opacity: 0; }

      100% { opacity: 1; }

    }

    

    .boot-sequence {

      position: fixed;

      top: 0;

      left: 0;

      width: 100%;

      height: 100%;

      background: #000;

      color: #00ff00;

      font-family: 'Courier New', monospace;

      padding: 40px;

      z-index: 10000;

      overflow-y: auto;

      animation: boot-fade 0.5s ease-in;

    }

    

    .boot-line {

      opacity: 0;

      animation: boot-fade 0.3s ease-in forwards;

    }

    

    /* Sound Toggle */

    .sound-toggle {

      position: fixed;

      top: 20px;

      right: 80px;

      background: rgba(0, 0, 0, 0.8);

      border: 2px solid #00ff00;

      border-radius: 50%;

      width: 48px;

      height: 48px;

      display: flex;

      align-items: center;

      justify-content: center;

      cursor: pointer;

      z-index: 1001;

      transition: all 0.3s ease;

    }

    

    .sound-toggle:hover {

      box-shadow: 0 0 15px #00ff00;

      transform: scale(1.1);

    }

    

    body.retro .sound-toggle {

      display: flex;

    }

    

    body:not(.retro) .sound-toggle {

      display: none;

    }

    

    /* Visit Counter */

    .visit-counter {

      position: fixed;

      bottom: 20px;

      right: 20px;

      background: rgba(0, 0, 0, 0.8);

      color: #00ff00;

      padding: 10px 15px;

      border-radius: 8px;

      font-family: 'Courier New', monospace;

      font-size: 14px;

      z-index: 1000;

      border: 2px solid #00ff00;

      box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);

    }

    

    /* Collapse/Expand */

    .detail-content {

      max-height: 5000px;

      overflow: hidden;

      transition: max-height 0.3s ease-out;

    }

    

    .detail-content.collapsed {

      max-height: 0;

    }

    

    /* Badge Styles */

    .badge-card {

      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

      border-radius: 16px;

      padding: 30px;

      color: white;

      text-align: center;

      position: relative;

      overflow: hidden;

    }

    

    body.retro .badge-card {

      background: #001a00 !important;

      border: 4px solid #00ff00 !important;

      border-radius: 0 !important;

      box-shadow: 0 0 20px #00ff00 !important;

    }

    

    .badge-pscore {

      font-size: 72px;

      font-weight: bold;

      text-shadow: 0 0 20px rgba(255,255,255,0.5);

    }

    

    body.retro .badge-pscore {

      color: #00ff00 !important;

      text-shadow: 0 0 30px #00ff00 !important;

    }

    

    /* Summon Mode */

    body.summon-mode {

      background: #1a0033 !important;

      background-image: 

        repeating-linear-gradient(0deg, transparent, transparent 2px, #330066 2px, #330066 4px),

        repeating-linear-gradient(90deg, transparent, transparent 2px, #2a0044 2px, #2a0044 4px) !important;

    }

    

    body.summon-mode .modern-card {

      border-color: #ff00ff !important;

      box-shadow: 0 0 30px #ff00ff !important;

    }

    

    body.summon-mode h1, body.summon-mode h2, body.summon-mode h3 {

      color: #ff00ff !important;

      text-shadow: 2px 2px 0 #660066, 0 0 15px #ff00ff !important;

    }

    

    body.summon-mode p, body.summon-mode div, body.summon-mode span {

      color: #ff66ff !important;

    }

    

    /* ==== ORIGINAL STYLES ==== */

    

    @keyframes pulse-glow {

      0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }

      50% { box-shadow: 0 0 40px rgba(99, 102, 241, 0.6); }

    }

    .scanning { animation: pulse-glow 2s infinite; }

    

    .menu-overlay {

      position: fixed; top: 0; left: -100%; width: 80%; max-width: 400px; height: 100vh;

      background: white; box-shadow: 2px 0 10px rgba(0,0,0,0.3); transition: left 0.3s ease;

      z-index: 1000; overflow-y: auto;

    }

    .menu-overlay.open { left: 0; }

    .menu-backdrop {

      position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: rgba(0,0,0,0.5);

      opacity: 0; visibility: hidden; transition: all 0.3s ease; z-index: 999;

    }

    .menu-backdrop.open { opacity: 1; visibility: visible; }

    .page-content { display: none; }

    .page-content.active { display: block; }

    

    /* Retro Mode Styles */

    body.retro {

      background: #000000 !important;

      font-family: 'Courier New', monospace !important;

      image-rendering: pixelated;

      color: #00ff00 !important;

      background-image: 

        repeating-linear-gradient(0deg, transparent, transparent 2px, #001100 2px, #001100 4px),

        repeating-linear-gradient(90deg, transparent, transparent 2px, #001100 2px, #001100 4px);

      background-size: 40px 40px;

    }

    body.retro * {

      font-family: 'Courier New', monospace !important;

      image-rendering: pixelated;

    }

    body.retro .modern-card {

      background: #0a0a0a !important;

      border: 4px solid #00ff00 !important;

      border-radius: 0 !important;

      box-shadow: 0 0 20px #00ff00 !important;

    }

    body.retro .retro-button {

      background: #003300 !important;

      border: 3px solid #00ff00 !important;

      border-radius: 0 !important;

      color: #00ff00 !important;

      font-weight: bold !important;

      padding: 8px 16px !important;

      text-shadow: 0 0 5px #00ff00;

    }

    body.retro .retro-button:hover {

      background: #005500 !important;

      box-shadow: 0 0 15px #00ff00;

    }

    body.retro #themeToggle,

    body.retro .page-content button,

    body.retro .menu-overlay button {

      background: #001a00 !important;

      color: #33ff33 !important;

      border: 2px solid #33ff33 !important;

      text-shadow: 0 0 3px #33ff33 !important;

    }

    body.retro #themeToggle:hover,

    body.retro .page-content button:hover {

      background: #003300 !important;

      color: #66ff66 !important;

    }

    body.retro .text-gray-500,

    body.retro .text-gray-600,

    body.retro .text-gray-700,

    body.retro .text-gray-800,

    body.retro p:not(.font-bold):not(h1):not(h2):not(h3) {

      color: #33ff33 !important;

      text-shadow: 0 0 2px #33ff33 !important;

    }

    body.retro .score-card {

      border: 3px solid #00ff00 !important;

      border-radius: 0 !important;

      box-shadow: 0 0 10px currentColor !important;

      background: #001a00 !important;

    }

    body.retro h1, body.retro h2, body.retro h3 {

      color: #00ff00 !important;

      text-shadow: 2px 2px 0 #003300, 0 0 10px #00ff00 !important;

    }

    body.retro p, body.retro div, body.retro span, body.retro label {

      color: #00ff00 !important;

    }

    body.retro .bg-gray-50, body.retro .bg-green-50, body.retro .bg-red-50 {

      background: #001a00 !important;

      border: 1px solid #003300 !important;

    }

    body.retro .bg-white { background: #000000 !important; }

    body.retro input {

      background: #000000 !important;

      border: 2px solid #00ff00 !important;

      color: #00ff00 !important;

    }

    body.retro input::placeholder { color: #006600 !important; }

    body.retro .menu-overlay {

      background: #000000 !important;

      border-right: 4px solid #00ff00 !important;

    }

    

    body.retro #pythiaLogo {

      width: 160px !important;

      height: 160px !important;

    }

    

    #mainTagline {

      font-size: 2rem !important;

    }

    body.retro #mainTagline {

      font-size: 2.5rem !important;

    }

    

    body.retro {

      background: 

        repeating-linear-gradient(0deg, #000000 0px, #003300 2px, #000000 4px),

        repeating-linear-gradient(90deg, #000000 0px, #001a00 2px, #000000 4px) !important;

    }

    

    body.retro .rivalry-item:nth-child(odd) {

      background: #003300 !important;

      border: 2px solid #00ff00 !important;

    }

    body.retro .rivalry-item:nth-child(even) {

      background: #001a00 !important;

      border: 2px solid #006600 !important;

    }

    

    .score-card {

      transition: all 0.3s;

      border: 2px solid transparent;

    }

    body:not(.retro) .score-card:hover {

      transform: scale(1.05);

      border-color: rgba(99, 102, 241, 0.3);

    }

    

    .sword-fighting { display: inline-block; animation: sword-swing 0.5s infinite; }

    @keyframes sword-swing {

      0%, 100% { transform: rotate(-15deg); }

      50% { transform: rotate(15deg); }

    }

    

    .tooltip { position: relative; display: inline-block; }

    .tooltip .tooltiptext {

      visibility: hidden; width: 280px; background-color: #1f2937; color: #fff;

      text-align: left; border-radius: 8px; padding: 12px; position: absolute; z-index: 1000;

      bottom: 125%; left: 50%; margin-left: -140px; opacity: 0; transition: opacity 0.3s;

      font-size: 13px; line-height: 1.4; box-shadow: 0 4px 6px rgba(0,0,0,0.3);

    }

    .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }

    

    .leaderboard-entry { transition: all 0.2s; }

    .leaderboard-entry:hover {

      transform: translateX(4px);

      background: rgba(99, 102, 241, 0.1);

    }

    

    .cache-badge {

      display: inline-block; padding: 2px 8px; border-radius: 12px;

      font-size: 10px; font-weight: bold; margin-left: 8px;

    }

    .cache-live { background: #10b981; color: white; }

    .cache-stored { background: #6366f1; color: white; }

    

    .winner-icon {

      width: 80px; height: 80px; object-fit: contain; margin: 0 auto 1rem;

      border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);

    }

    

    .page-header {

      display: flex;

      justify-content: space-between;

      align-items: center;

      margin-bottom: 2rem;

    }

  </style>

</head>

<body class="retro bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 min-h-screen p-4 md:p-8">

  

  <!-- Boot Sequence -->

  <div id="bootSequence" class="boot-sequence hidden">

    <div class="boot-line">PYTHIA‚Ñ¢ SYSTEM v2.0</div>

    <div class="boot-line">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>

    <div class="boot-line">Initializing Oracle Matrix...</div>

    <div class="boot-line">Loading Performance Analyzers...</div>

    <div class="boot-line">Calibrating P-Score Metrics...</div>

    <div class="boot-line">‚Ä¢ KARPOV Speed Engine [OK]</div>

    <div class="boot-line">‚Ä¢ VORTEX Accessibility Core [OK]</div>

    <div class="boot-line">‚Ä¢ PULSE SEO Module [OK]</div>

    <div class="boot-line">‚Ä¢ HELIX Privacy Shield [OK]</div>

    <div class="boot-line">‚Ä¢ NEXUS Mobile Adapter [OK]</div>

    <div class="boot-line">‚Ä¢ ECHO Sustainability Scanner [OK]</div>

    <div class="boot-line">‚Ä¢ NOVA Infrastructure Probe [OK]</div>

    <div class="boot-line">‚Ä¢ QUANTUM Code Analyzer [OK]</div>

    <div class="boot-line">‚Ä¢ AETHER Tech Detector [OK]</div>

    <div class="boot-line">‚Ä¢ EDEN Efficiency Monitor [OK]</div>

    <div class="boot-line">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>

    <div class="boot-line">System Ready. Press any key...</div>

  </div>

  

  <!-- Sound Toggle -->

  <div class="sound-toggle" id="soundToggle" title="Toggle Sound Effects">

    <span id="soundIcon">üîä</span>

  </div>

  

  <!-- Visit Counter -->

  <div class="visit-counter" id="visitCounter">

    Visitors: <span id="visitCount">Loading...</span>

  </div>

  

  <div id="menuBackdrop" class="menu-backdrop" onclick="closeMenu()"></div>

  

  <div id="menuOverlay" class="menu-overlay">

    <div class="p-6">

      <div class="flex justify-between items-center mb-6">

        <h2 class="text-2xl font-bold text-indigo-600">Pythia‚Ñ¢ Menu</h2>

        <button onclick="closeMenu()" class="text-3xl text-gray-600 hover:text-gray-800">&times;</button>

      </div>

      <nav class="space-y-2">

        <button onclick="showPage('main')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-indigo-50 font-bold text-gray-700">üè† Home</button>

        <button onclick="showPage('pscore-explainer')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-indigo-50 font-bold text-gray-700">üìä P-Score Explainer</button>

        <button onclick="showPage('components')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-indigo-50 font-bold text-gray-700">üîß P-Score Components</button>

        <button onclick="showPage('custom')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-indigo-50 font-bold text-indigo-600">üíé Custom Scans (Premium)</button>

        <button onclick="showPage('about')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-indigo-50 font-bold text-gray-700">‚ÑπÔ∏è About</button>

        <button onclick="showPage('legal')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-blue-50 font-bold text-gray-700">‚öñÔ∏è Legal & Privacy</button>

      </nav>

    </div>

  </div>

  

  <div class="max-w-7xl mx-auto">

    

    <div id="mainPage" class="page-content active">

      

      <div class="text-center mb-6">

        <div class="flex justify-between items-center mb-2">

          <button id="hamburger" onclick="openMenu()" class="text-3xl text-gray-700 hover:text-indigo-600 transition">‚ò∞</button>

          <button id="themeToggle" class="px-4 py-2 bg-gray-200 rounded-lg text-sm font-bold hover:bg-gray-300 transition">‚ú® BORING MODE</button>

        </div>

        <div class="flex items-center justify-center gap-4 mb-2">

          <img id="pythiaLogo" src="pythia-oracle.png" alt="Pythia Oracle" class="w-20 h-20" style="display:block; image-rendering: pixelated;">

          <h1 class="text-6xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">Pythia‚Ñ¢</h1>

        </div>

        <p class="text-gray-600 text-lg">Complete website performance oracle <span class="text-sm bg-yellow-200 px-2 py-1 rounded">BETA</span></p>

        <h2 id="mainTagline" class="text-xl font-bold text-indigo-600 mt-2 tracking-wide">ONE SCORE TO RANK THEM ALL</h2>

        

        <!-- NEW: Pythia Description -->

        <div class="modern-card bg-white rounded-lg shadow-lg p-4 mt-4 max-w-2xl mx-auto">

          <p class="text-sm text-gray-700 italic leading-relaxed">

            At Delphi in ancient Greece, the Pythia spoke cryptic truths from the gods. 

            Now seek her oracle wisely ‚Äî your site awaits her verdict!

          </p>

        </div>

        

        <p class="text-xs text-gray-500 mt-2 max-w-2xl mx-auto"><strong>Disclaimer:</strong> Pythia‚Ñ¢ is an independent analysis tool. Scores are heuristic-based and for informational purposes only.</p>

      </div>

      

      <div class="modern-card bg-white rounded-2xl shadow-xl p-6 mb-8">

        <div class="flex flex-col md:flex-row gap-4">

          <input id="urlInput" type="url" placeholder="example.com or https://example.com" class="flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500 transition" aria-label="Enter website URL to analyze">

          <button id="scanBtn" class="retro-button px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold rounded-xl hover:from-indigo-700 hover:to-purple-700 transition transform hover:scale-105" aria-label="Analyze website performance">ANALYZE</button>

          <button id="demoBtn" class="retro-button px-6 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-700 transition" aria-label="Try demo URL">TRY DEMO</button>

          <button id="consultBtn" class="retro-button px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-600 text-white font-bold rounded-xl hover:from-pink-600 hover:to-purple-700 transition" aria-label="Consult Pythia">üîÆ CONSULT</button>

          <button id="exportBtn" class="retro-button px-6 py-3 bg-gray-600 text-white font-bold rounded-xl hover:bg-gray-700 transition" style="display:none;" aria-label="Export analysis results">üìä EXPORT</button>

        </div>

      </div>

      

      <!-- Loading Spinner -->

      <div id="loadingSpinner" class="hidden text-center my-8">

        <div class="retro-spinner"></div>

        <p class="text-gray-600 mt-4 font-bold">Consulting the Oracle...</p>

      </div>

      

      <!-- Consultation Results -->

      <div id="consultationResults" class="modern-card bg-gradient-to-br from-purple-900 to-indigo-900 rounded-lg shadow-lg p-6 mb-6 hidden">

        <h3 class="text-2xl font-bold text-center mb-4" style="color: #00ff00;">üîÆ The Oracle Speaks üîÆ</h3>

        <div id="consultationText" class="text-lg text-center italic" style="color: #66ff66; text-shadow: 0 0 10px #00ff00;"></div>

      </div>

      

      <div id="pscoreContainer" class="hidden mb-8">

        <div class="modern-card bg-gradient-to-br from-indigo-600 to-purple-700 rounded-2xl shadow-2xl p-8 text-center text-white">

          <div class="text-sm font-bold uppercase tracking-wider opacity-90 mb-2">Overall P-Score‚Ñ¢</div>

          <div id="pscoreValue" class="text-7xl font-bold mb-2" aria-live="polite">--</div>

          <div class="text-lg opacity-90">Performance ‚Ä¢ Sustainability ‚Ä¢ Future-Ready</div>

          <div id="siteInfo" class="text-sm opacity-75 mt-3"></div>

          <div class="text-xs mt-2 opacity-75">Scanned by Pythia‚Ñ¢ üîÆ</div>

        </div>

      </div>

      

      <div id="resultsContainer" class="hidden grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8" role="region" aria-label="Website performance metrics"></div>

      

      <!-- NEW: Toggle Details Button -->

      <div id="toggleDetailsSection" class="hidden text-center mb-4">

        <button id="toggleDetailsBtn" class="retro-button px-6 py-3 bg-gray-600 text-white font-bold rounded-lg hover:bg-gray-700 transition">

          ‚ñº Show Detailed Breakdown

        </button>

      </div>

      

      <!-- Detailed Breakdown (Collapsible) -->

      <div id="detailsBreakdown" class="detail-content collapsed hidden mb-8"></div>

      

      <!-- NEW: Badge Section -->

      <div id="badgeSection" class="modern-card bg-white rounded-lg shadow-lg p-6 mb-8 hidden">

        <h3 class="text-xl font-bold mb-4">üèÖ Generate P-Score‚Ñ¢ Badge</h3>

        <div class="mb-4">

          <label class="block text-sm font-bold mb-2">Compare with Top 50 site:</label>

          <select id="badgeCompare" class="w-full p-2 border border-gray-300 rounded-lg">

            <option value="">Select a site...</option>

          </select>

        </div>

        <button onclick="generateBadge()" class="retro-button w-full bg-purple-600 text-white py-2 rounded-lg font-bold hover:bg-purple-700 transition">

          Generate Badge

        </button>

        

        <div id="badgePreview" class="mt-6 hidden">

          <div id="badgeCard" class="badge-card">

            <div class="text-sm opacity-80 mb-2">Scanned by Pythia‚Ñ¢ üîÆ</div>

            <div class="badge-pscore" id="badgePscore">--</div>

            <div class="text-xl font-bold mb-2">P-Score‚Ñ¢</div>

            <div id="badgeComparison" class="text-lg mb-4">--</div>

            <div class="text-xs opacity-75" id="badgeUrl">--</div>

            <div class="text-xs mt-4">

              <div>‚ïê‚ïê‚ïê ‚ö° PYTHIA‚Ñ¢ ORACLE ‚ö° ‚ïê‚ïê‚ïê</div>

              <div class="mt-2">p-score.me</div>

            </div>

          </div>

          <div class="mt-4 flex gap-2">

            <button onclick="shareBadge()" class="retro-button flex-1 bg-blue-600 text-white py-2 rounded-lg font-bold hover:bg-blue-700 transition">

              üîó Share Badge

            </button>

          </div>

        </div>

      </div>

      

      <div id="leaderboard" class="hidden modern-card bg-white rounded-2xl shadow-xl p-6 mb-8">

        <h2 class="text-2xl font-bold text-gray-800 mb-4">üèÜ Global Leaderboard (User Scans)</h2>

        <div class="grid md:grid-cols-2 gap-6">

          <div>

            <h3 class="text-lg font-bold text-green-600 mb-3">Top 10 Sites</h3>

            <div id="topSites" class="space-y-2"></div>

          </div>

          <div>

            <h3 class="text-lg font-bold text-red-600 mb-3">Bottom 10 Sites</h3>

            <div id="bottomSites" class="space-y-2"></div>

          </div>

        </div>

      </div>

      

      <div class="grid lg:grid-cols-2 gap-8 mb-8">

        

        <!-- Enterprise Website of the Day -->

        <div class="modern-card bg-white rounded-2xl shadow-xl p-6">

          <h2 class="text-2xl font-bold text-gray-800 mb-2">üåü Enterprise Website of the Day</h2>

          <p class="text-sm text-gray-600 mb-4">Random scan of 1,000 enterprise sites ‚Ä¢ Updated daily at 12:01 AM PT</p>

          <div id="enterpriseDailyResults" class="hidden">

            <div class="bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-lg border-2 border-yellow-400">

              <div class="text-center mb-4">

                <div class="text-3xl font-bold text-gray-800" id="enterpriseWinner"></div>

                <div class="text-xs text-gray-500 mt-1">Today's Champion</div>

              </div>

              <div class="grid grid-cols-2 gap-3">

                <div class="bg-white p-2 rounded">

                  <div class="text-gray-500">P-Score‚Ñ¢</div>

                  <div id="enterprisePscore" class="text-2xl font-bold text-green-600"></div>

                </div>

                <div class="bg-white p-2 rounded">

                  <div class="text-gray-500">Load Time</div>

                  <div id="enterpriseLoadTime" class="text-lg font-bold"></div>

                </div>

              </div>

              <div id="enterpriseTotalScanned" class="text-xs text-gray-500 mt-3"></div>

              <a id="enterpriseLink" href="#" target="_blank" class="mt-3 inline-block px-4 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition">Visit Website ‚Üí</a>

            </div>

          </div>

          <div id="enterpriseDailyLoading" class="text-center py-8">

            <div class="text-4xl mb-2">üåü</div>

            <div class="font-bold text-gray-700">Loading today's winner...</div>

            <div class="text-sm text-gray-500 mt-2">Scans 1,000 random enterprise sites daily</div>

          </div>

        </div>

        

        <div class="modern-card bg-white rounded-2xl shadow-xl p-6">

          <h2 class="text-2xl font-bold text-gray-800 mb-2">‚öîÔ∏è Rivalry Battle Arena</h2>

          <p class="text-sm text-gray-600 mb-4">Pit legendary rivals against each other</p>

          <div class="mb-6">

            <h3 class="text-lg font-bold text-indigo-600 mb-3">Epic Rivalries</h3>

            <div id="rivalryList" class="max-h-96 overflow-y-auto space-y-2 border rounded-lg p-3"></div>

          </div>

          <div class="border-t pt-6">

            <h3 class="text-lg font-bold text-purple-600 mb-3">Custom Battle</h3>

            <div class="grid gap-4 mb-4">

              <input id="customUrl1" type="url" placeholder="example1.com" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-indigo-500" aria-label="First competitor URL">

              <input id="customUrl2" type="url" placeholder="example2.com" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-indigo-500" aria-label="Second competitor URL">

            </div>

            <button id="customBattleBtn" class="retro-button w-full py-3 bg-purple-600 text-white font-bold rounded-lg hover:bg-purple-700 transition">‚öîÔ∏è START CUSTOM BATTLE</button>

          </div>

        </div>

      </div>

      

      <div class="modern-card bg-white rounded-2xl shadow-xl p-6 mb-8">

        <h2 class="text-2xl font-bold text-gray-800 mb-2">üåç World's Top 50 Websites</h2>

        <p class="text-sm text-gray-600 mb-4">Daily scan at 12:01 AM PT ‚Ä¢ Cached for 24 hours</p>

        <div id="top50Results" class="hidden">

          <h3 class="text-lg font-bold text-green-600 mb-3">ü•á Top 5 Global Sites</h3>

          <div id="top50TopList" class="space-y-2 mb-6"></div>

          <h3 class="text-lg font-bold text-red-600 mb-3">üîª Bottom 5 of Top 50 (46-50)</h3>

          <div id="top50BottomList" class="space-y-2"></div>

        </div>

        <div id="top50Loading" class="text-center py-8">

          <div class="retro-spinner"></div>

          <div class="font-bold text-gray-700 mt-4">Loading today's rankings...</div>

          <div class="text-sm text-gray-500 mt-2">Updated daily at 12:01 AM PT</div>

        </div>

      </div>

      

      <div id="battleResults" class="hidden modern-card mb-8 p-6 rounded-lg border-4 border-yellow-400 bg-gradient-to-r from-yellow-50 to-orange-50">

        <div class="text-center">

          <div id="winnerIcon" class="hidden mb-4"><img class="winner-icon" alt="Winner logo"></div>

          <div id="winnerAnnouncement" class="text-4xl font-bold mb-4"></div>

          <div class="grid md:grid-cols-2 gap-4 mt-4">

            <div id="contestant1Results" class="p-4 bg-white rounded-lg shadow"></div>

            <div id="contestant2Results" class="p-4 bg-white rounded-lg shadow"></div>

          </div>

          <button id="shareRivalryBtn" class="retro-button mt-4 px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition">üîó Share Result</button>

        </div>

      </div>

      

      <footer class="text-center text-gray-600 text-sm mt-12">

        <p class="mb-2">üîÆ Pythia‚Ñ¢ ‚Äî Website Performance Oracle</p>

        <p class="mt-1">Analysis time varies 5-15 seconds ‚Ä¢ Scores cached 5min for stability</p>

        <div class="mt-6 flex justify-center gap-3 flex-wrap">

          <button onclick="shareOn('twitter')" class="px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition text-xs font-bold" aria-label="Share on X (Twitter)">ùïè Share on X</button>

          <button onclick="shareOn('facebook')" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-xs font-bold" aria-label="Share on Facebook">üìò Share on Facebook</button>

          <button onclick="shareOn('whatsapp')" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition text-xs font-bold" aria-label="Share on WhatsApp">üí¨ Share on WhatsApp</button>

          <button onclick="shareOn('email')" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition text-xs font-bold" aria-label="Share via Email">‚úâÔ∏è Share via Email</button>

        </div>

        <p class="text-gray-600 mt-6 mb-2">

          Pythia‚Ñ¢ uses public APIs with attribution. Scores are algorithmic estimates, not endorsements.

        </p>

        <p class="text-gray-500 text-sm mb-4">

          <a href="#" onclick="showPage('legal'); return false;" class="underline">ToS</a> | 

          <a href="#" onclick="showPage('legal'); return false;" class="underline">Privacy</a>

        </p>

        <p class="text-gray-600 font-bold mb-2" style="font-family: 'Courier New', monospace;">

          Made by Cronix

        </p>

        <p class="text-gray-400 text-xs">

          ¬© 2025 Cronix Holdings (Pty) Ltd, South Africa

        </p>

        <p id="retroQuote" class="mt-4 text-xs italic text-gray-400" style="display:none;">"I am in doubt whether to pronounce you man or god,<br>but I think rather you are a god, Lycurgus."</p>

      </footer>

    </div>

    

    <!-- P-Score Explainer Page - PRESERVED EXACTLY -->

    <div id="pscoreExplainerPage" class="page-content">

      <div class="page-header">

        <button onclick="openMenu()" class="text-3xl text-gray-700 hover:text-indigo-600 transition">‚ò∞</button>

        <button id="themeToggle2" onclick="toggleTheme()" class="px-4 py-2 bg-gray-200 rounded-lg text-sm font-bold hover:bg-gray-300 transition">‚ú® BORING MODE</button>

      </div>

      <article class="modern-card bg-white rounded-2xl shadow-xl p-8">

        <h1 class="text-4xl font-bold text-indigo-600 mb-6">üìä P-Score‚Ñ¢ Explainer</h1>

        <div class="prose max-w-none">

          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">What is the P-Score‚Ñ¢?</h2>

          <p class="text-gray-700 leading-relaxed mb-4">The P-Score‚Ñ¢ (Performance Score) is Pythia's unified metric that distills complex website analysis into a single, actionable number from 0-100. Think of it as a health checkup for your digital presence, measuring website performance across multiple critical dimensions.</p>

          

          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">How It Works</h2>

          <p class="text-gray-700 leading-relaxed mb-4">Pythia‚Ñ¢ analyzes 10 distinct aspects of your website‚Äîfrom lightning-fast loading times to privacy practices‚Äîand intelligently weighs them to generate one comprehensive score. Our algorithm evaluates site speed, accessibility, SEO optimization, security headers, and sustainability practices.</p>

          

          <div class="bg-indigo-50 p-6 rounded-lg my-6">

            <h3 class="text-xl font-bold text-indigo-600 mb-3">Weighting Philosophy</h3>

            <p class="weighting-philosophy text-gray-700 mb-2">The P-Score‚Ñ¢ balances multiple factors for optimal website performance measurement. Each component is carefully weighted to reflect its importance in modern web development:</p>

            <ul class="weighting-philosophy list-disc ml-6 text-gray-700 space-y-1">

              <li><strong>Karpov Speed</strong> - Page load performance and responsiveness (10%)</li>

              <li><strong>Vortex Accessibility</strong> - Inclusive design for all users (10%)</li>

              <li><strong>Pulse SEO</strong> - Search engine optimization and social presence (10%)</li>

              <li><strong>Helix Privacy</strong> - User privacy and security measures (10%)</li>

              <li><strong>Nexus Mobile</strong> - Mobile-first responsive design (10%)</li>

              <li><strong>Echo Sustainability</strong> - Environmental impact and green hosting (10%)</li>

              <li><strong>Nova Infrastructure</strong> - Scalability and CDN usage (10%)</li>

              <li><strong>Quantum Quality</strong> - Code quality and best practices (10%)</li>

              <li><strong>Aether Technology</strong> - Modern frameworks and future-readiness (10%)</li>

              <li><strong>Eden Efficiency</strong> - Page weight and resource optimization (10%)</li>

            </ul>

          </div>

          

          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Score Ranges</h2>

          <div class="grid md:grid-cols-3 gap-4 my-4">

            <div class="p-4 bg-green-50 border-2 border-green-500 rounded-lg">

              <div class="text-3xl font-bold text-green-600">80-100</div>

              <div class="text-sm text-gray-700">Excellent - Top tier website performance</div>

            </div>

            <div class="p-4 bg-yellow-50 border-2 border-yellow-500 rounded-lg">

              <div class="text-3xl font-bold text-yellow-600">60-79</div>

              <div class="text-sm text-gray-700">Good - Room for optimization</div>

            </div>

            <div class="p-4 bg-red-50 border-2 border-red-500 rounded-lg">

              <div class="text-3xl font-bold text-red-600">0-59</div>

              <div class="text-sm text-gray-700">Needs Work - Critical issues detected</div>

            </div>

          </div>

          

          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Why One Score?</h2>

          <p class="text-gray-700 leading-relaxed mb-4">In today's complex web ecosystem, developers and stakeholders are overwhelmed with metrics. Page load times, accessibility scores, SEO rankings, security audits‚Äîeach tool provides different data in different formats. Pythia‚Ñ¢ solves this by providing a single, comprehensive score that considers all these factors.</p>

          

          <p class="text-gray-700 leading-relaxed mb-4">The P-Score‚Ñ¢ makes it easy to:</p>

          <ul class="list-disc ml-6 text-gray-700 space-y-2 mb-4">

            <li>Compare website performance at a glance</li>

            <li>Track improvements over time</li>

            <li>Communicate technical performance to non-technical stakeholders</li>

            <li>Identify which areas need the most attention</li>

            <li>Benchmark against competitors</li>

          </ul>

          

          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Methodology</h2>

          <p class="text-gray-700 leading-relaxed mb-4">Our scoring algorithm is based on industry best practices, W3C standards, and real-world performance data. Each component is measured using specific metrics.</p>

          

          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Limitations</h2>

          <p class="text-gray-700 leading-relaxed mb-4">While Pythia‚Ñ¢ provides comprehensive analysis, it's important to understand its limitations:</p>

          <ul class="list-disc ml-6 text-gray-700 space-y-2 mb-4">

            <li>Scores are based on publicly accessible content only</li>

            <li>Some advanced features may require authentication</li>

            <li>Client-side JavaScript execution is limited</li>

            <li>Results may vary based on geographic location and network conditions</li>

            <li>Heuristic analysis may not catch all issues</li>

          </ul>

          

          <p class="text-gray-700 leading-relaxed">Use Pythia‚Ñ¢ as part of a comprehensive quality assurance strategy, not as the only measure of website performance.</p>

        </div>

      </article>

    </div>

    

    <!-- Components Page - PRESERVED -->

    <div id="componentsPage" class="page-content">

      <div class="page-header">

        <button onclick="openMenu()" class="text-3xl text-gray-700 hover:text-indigo-600 transition">‚ò∞</button>

        <button id="themeToggle3" onclick="toggleTheme()" class="px-4 py-2 bg-gray-200 rounded-lg text-sm font-bold hover:bg-gray-300 transition">‚ú® BORING MODE</button>

      </div>

      <article class="modern-card bg-white rounded-2xl shadow-xl p-8">

        <h1 class="text-4xl font-bold text-indigo-600 mb-6">üîß P-Score‚Ñ¢ Components</h1>

        <p class="text-gray-700 mb-6">Each of Pythia's 10 components measures a specific aspect of website performance. Together, they provide a comprehensive view of your site's health.</p>

        

        <div class="space-y-6">

          <div class="border-l-4 border-blue-500 pl-4">

            <h3 class="text-xl font-bold text-blue-600 mb-2">‚ö° KARPOV - Speed & Performance</h3>

            <p class="text-gray-700">Measures page load times, resource optimization, and rendering performance. Named after chess grandmaster Anatoly Karpov, known for precision and speed.</p>

          </div>

          

          <div class="border-l-4 border-green-500 pl-4">

            <h3 class="text-xl font-bold text-green-600 mb-2">‚ôø VORTEX - Accessibility</h3>

            <p class="text-gray-700">Evaluates semantic HTML, ARIA labels, keyboard navigation, and color contrast. Ensures your site is usable by everyone.</p>

          </div>

          

          <div class="border-l-4 border-purple-500 pl-4">

            <h3 class="text-xl font-bold text-purple-600 mb-2">üì± PULSE - SEO & Social</h3>

            <p class="text-gray-700">Analyzes meta tags, Open Graph data, structured data, and social media optimization.</p>

          </div>

          

          <div class="border-l-4 border-red-500 pl-4">

            <h3 class="text-xl font-bold text-red-600 mb-2">üîí HELIX - Privacy & Security</h3>

            <p class="text-gray-700">Checks security headers, HTTPS implementation, tracker presence, and privacy practices.</p>

          </div>

          

          <div class="border-l-4 border-yellow-500 pl-4">

            <h3 class="text-xl font-bold text-yellow-600 mb-2">üì± NEXUS - Mobile Responsive</h3>

            <p class="text-gray-700">Evaluates viewport configuration, media queries, and mobile-friendly design patterns.</p>

          </div>

          

          <div class="border-l-4 border-green-500 pl-4">

            <h3 class="text-xl font-bold text-green-600 mb-2">üå± ECHO - Sustainability</h3>

            <p class="text-gray-700">Assesses green hosting, efficient resource usage, and environmental impact.</p>

          </div>

          

          <div class="border-l-4 border-indigo-500 pl-4">

            <h3 class="text-xl font-bold text-indigo-600 mb-2">üåê NOVA - Infrastructure</h3>

            <p class="text-gray-700">Analyzes CDN usage, caching strategies, compression, and scalability.</p>

          </div>

          

          <div class="border-l-4 border-pink-500 pl-4">

            <h3 class="text-xl font-bold text-pink-600 mb-2">‚ú® QUANTUM - Code Quality</h3>

            <p class="text-gray-700">Evaluates best practices, code cleanliness, and adherence to web standards.</p>

          </div>

          

          <div class="border-l-4 border-cyan-500 pl-4">

            <h3 class="text-xl font-bold text-cyan-600 mb-2">üöÄ AETHER - Modern Tech</h3>

            <p class="text-gray-700">Checks for modern frameworks, WebAssembly, Service Workers, and progressive enhancement.</p>

          </div>

          

          <div class="border-l-4 border-amber-500 pl-4">

            <h3 class="text-xl font-bold text-amber-600 mb-2">üìä EDEN - Efficiency</h3>

            <p class="text-gray-700">Measures page weight, resource count, and overall efficiency of resource usage.</p>

          </div>

        </div>

      </article>

    </div>

    

    <!-- Custom Scans Page - PRESERVED -->

    <div id="customPage" class="page-content">

      <div class="page-header">

        <button onclick="openMenu()" class="text-3xl text-gray-700 hover:text-indigo-600 transition">‚ò∞</button>

        <button id="themeToggle4" onclick="toggleTheme()" class="px-4 py-2 bg-gray-200 rounded-lg text-sm font-bold hover:bg-gray-300 transition">‚ú® BORING MODE</button>

      </div>

      <article class="modern-card bg-white rounded-2xl shadow-xl p-8">

        <h1 class="text-4xl font-bold text-indigo-600 mb-6">üíé Custom Scans (Premium)</h1>

        <div class="bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg mb-6">

          <h2 class="text-2xl font-bold text-indigo-600 mb-4">Coming Soon</h2>

          <p class="text-gray-700 mb-4">Premium features will include:</p>

          <ul class="list-disc ml-6 text-gray-700 space-y-2">

            <li>Scheduled recurring scans</li>

            <li>Historical trend analysis</li>

            <li>Custom weight allocation for metrics</li>

            <li>API access for automation</li>

            <li>PDF report generation</li>

            <li>Team collaboration features</li>

          </ul>

        </div>

      </article>

    </div>

    

    <!-- About Page - PRESERVED -->

    <div id="aboutPage" class="page-content">

      <div class="page-header">

        <button onclick="openMenu()" class="text-3xl text-gray-700 hover:text-indigo-600 transition">‚ò∞</button>

        <button id="themeToggle5" onclick="toggleTheme()" class="px-4 py-2 bg-gray-200 rounded-lg text-sm font-bold hover:bg-gray-300 transition">‚ú® BORING MODE</button>

      </div>

      <article class="modern-card bg-white rounded-2xl shadow-xl p-8">

        <h1 class="text-4xl font-bold text-indigo-600 mb-6">‚ÑπÔ∏è About Pythia‚Ñ¢</h1>

        <div class="prose max-w-none">

          <h2 class="text-2xl font-bold text-gray-800 mb-3">What is Pythia‚Ñ¢?</h2>

          <p class="text-gray-700 mb-4">

            Pythia‚Ñ¢ is named after the Oracle of Delphi in ancient Greece, where the Pythia priestess delivered cryptic prophecies. Like its namesake, our tool provides insights into the hidden truths of website performance.

          </p>

          

          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Our Mission</h2>

          <p class="text-gray-700 mb-4">

            We believe that website performance analysis should be simple, comprehensive, and accessible to everyone. Pythia‚Ñ¢ was built to democratize performance insights and make the web faster, more accessible, and more sustainable.

          </p>

          

          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Open Source</h2>

          <p class="text-gray-700 mb-4">

            Pythia‚Ñ¢'s methodology is transparent and based on industry standards. We believe in open, reproducible analysis.

          </p>

          

          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Contact</h2>

          <p class="text-gray-700">

            For questions, feedback, or collaboration: <a href="mailto:hello@p-score.me" class="text-indigo-600 underline">hello@p-score.me</a>

          </p>

        </div>

      </article>

    </div>

    

    <!-- NEW: Legal Page -->

    <div id="legalPage" class="page-content">

      <div class="page-header">

        <button onclick="openMenu()" class="text-3xl text-gray-700 hover:text-indigo-600 transition">‚ò∞</button>

        <button id="themeToggle6" onclick="toggleTheme()" class="px-4 py-2 bg-gray-200 rounded-lg text-sm font-bold hover:bg-gray-300 transition">‚ú® BORING MODE</button>

      </div>

      <div class="modern-card bg-white rounded-2xl shadow-xl p-8 mb-6">

        <h1 class="text-4xl font-bold text-blue-600 mb-6">‚öñÔ∏è Legal & Privacy</h1>

        

        <h2 class="text-2xl font-bold mb-4">Terms of Service</h2>

        

        <h3 class="text-lg font-bold mb-2 mt-4">Disclaimer</h3>

        <p class="text-gray-700 mb-4">

          P-Scores are automated algorithmic estimates based on publicly available data and are not endorsements or guarantees of website quality. 

          Scores may not reflect all aspects of website performance or user experience. 

        </p>

        <p class="text-gray-700 mb-4">

          If you believe your website's score is inaccurate or wish to dispute it, please contact us at: 

          <a href="mailto:dispute@p-score.me" class="text-indigo-600 underline">dispute@p-score.me</a>

        </p>

        

        <h3 class="text-lg font-bold mb-2 mt-4">API Compliance</h3>

        <p class="text-gray-700 mb-4">

          Pythia‚Ñ¢ uses publicly available APIs with proper attribution. We comply with Google PageSpeed API Terms of Service, 

          including rate limiting (25 queries per hour per IP), appropriate User-Agent headers, and caching mechanisms.

        </p>

        

        <h3 class="text-lg font-bold mb-2 mt-4">Robots.txt Compliance</h3>

        <p class="text-gray-700 mb-4">

          Pythia‚Ñ¢ respects robots.txt directives. Sites can block our bot (User-Agent: PythiaBot/1.0) via robots.txt. 

          We rotate user agents and limit scanning to 50 sites per hour to avoid excessive load.

        </p>

        

        <h3 class="text-lg font-bold mb-2 mt-4">Rate Limiting</h3>

        <p class="text-gray-700 mb-4">

          To ensure fair use, we limit each IP address to 25 scan requests per hour. This helps prevent abuse and ensures 

          system stability for all users.

        </p>

      </div>

      

      <div class="modern-card bg-white rounded-2xl shadow-xl p-8 mb-6">

        <h2 class="text-2xl font-bold mb-4">Privacy Policy</h2>

        

        <h3 class="text-lg font-bold mb-2 mt-4">Data Collection</h3>

        <p class="text-gray-700 mb-4">

          Pythia‚Ñ¢ does not collect or store personally identifiable information (PII). We only analyze publicly accessible website data.

        </p>

        

        <h3 class="text-lg font-bold mb-2 mt-4">GDPR Compliance</h3>

        <p class="text-gray-700 mb-4">

          We process only public data under the "legitimate interest" legal basis per GDPR Article 6(1)(f). 

          Data processing is minimized to what is necessary for performance analysis. Users may request data deletion by 

          emailing: <a href="mailto:privacy@p-score.me" class="text-indigo-600 underline">privacy@p-score.me</a>

        </p>

        

        <h3 class="text-lg font-bold mb-2 mt-4">Opt-Out</h3>

        <p class="text-gray-700 mb-4">

          Website owners can opt out of Pythia‚Ñ¢ scanning by adding the following to their robots.txt file:

        </p>

        <pre class="bg-gray-100 p-3 rounded text-sm mb-4">User-agent: PythiaBot

Disallow: /</pre>

        

        <h3 class="text-lg font-bold mb-2 mt-4">Cookies</h3>

        <p class="text-gray-700 mb-4">

          This website uses minimal cookies only for essential functionality (e.g., remembering theme preferences). 

          We do not use tracking cookies or third-party analytics.

        </p>

      </div>

      

      <div class="modern-card bg-white rounded-2xl shadow-xl p-8">

        <h2 class="text-2xl font-bold mb-4">Contact</h2>

        <p class="text-gray-700 mb-2">For any legal inquiries, disputes, or privacy concerns:</p>

        <ul class="text-gray-700 space-y-1">

          <li>‚Ä¢ General: <a href="mailto:legal@p-score.me" class="text-indigo-600 underline">legal@p-score.me</a></li>

          <li>‚Ä¢ Disputes: <a href="mailto:dispute@p-score.me" class="text-indigo-600 underline">dispute@p-score.me</a></li>

          <li>‚Ä¢ Privacy: <a href="mailto:privacy@p-score.me" class="text-indigo-600 underline">privacy@p-score.me</a></li>

          <li>‚Ä¢ Accessibility: <a href="mailto:accessibility@p-score.me" class="text-indigo-600 underline">accessibility@p-score.me</a></li>

        </ul>

      </div>

    </div>

    

  </div>

  

  <script>

    const CACHE_DURATION = 5 * 60 * 1000;

    const TOP50_API = '/api/top50';

    const ENTERPRISE_API = '/api/enterprise-daily';

    const VISIT_COUNTER_API = '/api/visits';

    

    let isRetro = true;

    let currentData = null;

    let currentBattleData = null;

    let soundEnabled = false;

    let konamiCode = [];

    const konamiSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];

    

    const metrics = [

      { id: 'karpov', name: 'KARPOV', desc: 'Speed', color: 'from-blue-400 to-blue-600', tooltip: '‚ö° KARPOV: Speed & Performance - Measures page load times, resource optimization, and rendering performance.' },

      { id: 'vortex', name: 'VORTEX', desc: 'Access', color: 'from-green-400 to-green-600', tooltip: '‚ôø VORTEX: Accessibility - Evaluates semantic HTML, ARIA labels, keyboard navigation, and color contrast.' },

      { id: 'nova', name: 'NOVA', desc: 'Scale', color: 'from-indigo-400 to-indigo-600', tooltip: 'üåê NOVA: Scalability & Infrastructure - Analyzes CDN usage, caching strategies, and compression.' },

      { id: 'aether', name: 'AETHER', desc: 'Tech', color: 'from-cyan-400 to-cyan-600', tooltip: 'üöÄ AETHER: Modern Technology - Checks for modern frameworks, WebAssembly, and progressive enhancement.' },

      { id: 'pulse', name: 'PULSE', desc: 'SEO', color: 'from-purple-400 to-purple-600', tooltip: 'üì± PULSE: SEO & Social - Analyzes meta tags, Open Graph data, and social media optimization.' },

      { id: 'eden', name: 'EDEN', desc: 'Efficient', color: 'from-amber-400 to-amber-600', tooltip: 'üìä EDEN: Efficiency - Measures page weight, resource count, and overall efficiency.' },

      { id: 'helix', name: 'HELIX', desc: 'Privacy', color: 'from-red-400 to-red-600', tooltip: 'üîí HELIX: Privacy & Security - Checks security headers, HTTPS, and privacy practices.' },

      { id: 'echo', name: 'ECHO', desc: 'Green', color: 'from-green-400 to-green-600', tooltip: 'üå± ECHO: Sustainability - Assesses green hosting and environmental impact.' },

      { id: 'quantum', name: 'QUANTUM', desc: 'Quality', color: 'from-pink-400 to-pink-600', tooltip: '‚ú® QUANTUM: Code Quality - Evaluates best practices and code cleanliness.' },

      { id: 'nexus', name: 'NEXUS', desc: 'Mobile', color: 'from-yellow-400 to-yellow-600', tooltip: 'üì± NEXUS: Mobile Responsiveness - Evaluates viewport and mobile-friendly design.' }

    ];

    

    // Konami Code Easter Egg

    document.addEventListener('keydown', (e) => {

      konamiCode.push(e.key);

      if (konamiCode.length > 10) konamiCode.shift();

      if (JSON.stringify(konamiCode) === JSON.stringify(konamiSequence)) {

        document.body.classList.toggle('summon-mode');

        playSound('summon');

        alert('üîÆ SUMMON MODE ACTIVATED! üîÆ');

      }

    });

    

    // Sound Effects

    function playSound(type) {

      if (!soundEnabled) return;

      

      const audioContext = new (window.AudioContext || window.webkitAudioContext)();

      const oscillator = audioContext.createOscillator();

      const gainNode = audioContext.createGain();

      

      oscillator.connect(gainNode);

      gainNode.connect(audioContext.destination);

      

      switch(type) {

        case 'click':

          oscillator.frequency.value = 800;

          gainNode.gain.value = 0.1;

          oscillator.start();

          oscillator.stop(audioContext.currentTime + 0.05);

          break;

        case 'scan':

          oscillator.frequency.value = 400;

          gainNode.gain.value = 0.15;

          oscillator.start();

          oscillator.stop(audioContext.currentTime + 0.1);

          break;

        case 'summon':

          oscillator.frequency.value = 600;

          gainNode.gain.value = 0.2;

          oscillator.start();

          oscillator.stop(audioContext.currentTime + 0.3);

          break;

      }

    }

    

    // Sound Toggle

    document.getElementById('soundToggle')?.addEventListener('click', () => {

      soundEnabled = !soundEnabled;

      document.getElementById('soundIcon').textContent = soundEnabled ? 'üîä' : 'üîá';

      playSound('click');

    });

    

    // Boot Sequence

    function showBootSequence() {

      const bootEl = document.getElementById('bootSequence');

      if (!bootEl || !document.body.classList.contains('retro')) return;

      if (sessionStorage.getItem('boot_shown')) return;

      

      bootEl.classList.remove('hidden');

      const lines = bootEl.querySelectorAll('.boot-line');

      

      lines.forEach((line, i) => {

        setTimeout(() => {

          line.style.animationDelay = `${i * 0.3}s`;

        }, i * 300);

      });

      

      setTimeout(() => {

        bootEl.classList.add('hidden');

      }, lines.length * 300 + 2000);

      

      sessionStorage.setItem('boot_shown', 'true');

    }

    

    // Visit Counter

    async function updateVisitCounter() {

      try {

        const response = await fetch(VISIT_COUNTER_API);

        if (response.ok) {

          const data = await response.json();

          document.getElementById('visitCount').textContent = data.visits.toLocaleString();

        } else {

          document.getElementById('visitCount').textContent = '---';

        }

      } catch (e) {

        // Fallback to localStorage

        let visits = parseInt(localStorage.getItem('pythia_visits') || '0');

        visits++;

        localStorage.setItem('pythia_visits', visits);

        document.getElementById('visitCount').textContent = visits.toLocaleString();

      }

    }

    

    // URL Normalizer

    function normalizeUrl(url) {

      url = url.trim();

      if (!url.startsWith('http://') && !url.startsWith('https://')) {

        url = 'https://' + url;

      }

      return url;

    }

    

    function openMenu() {

      playSound('click');

      document.getElementById('menuOverlay').classList.add('open');

      document.getElementById('menuBackdrop').classList.add('open');

    }

    

    function closeMenu() {

      playSound('click');

      document.getElementById('menuOverlay').classList.remove('open');

      document.getElementById('menuBackdrop').classList.remove('open');

    }

    

    function showPage(pageId) {

      playSound('click');

      document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));

      const pageMap = {

        'main': 'mainPage',

        'pscore-explainer': 'pscoreExplainerPage',

        'components': 'componentsPage',

        'custom': 'customPage',

        'about': 'aboutPage',

        'legal': 'legalPage'

      };

      document.getElementById(pageMap[pageId]).classList.add('active');

      closeMenu();

      window.scrollTo(0, 0);

    }

    

    function toggleTheme() {

      playSound('click');

      isRetro = !isRetro;

      document.body.classList.toggle('retro');

      const buttons = document.querySelectorAll('[id^="themeToggle"]');

      buttons.forEach(btn => {

        btn.textContent = isRetro ? '‚ú® BORING MODE' : '‚ú® BORING MODE';

      });

      document.getElementById('pythiaLogo').style.display = isRetro ? 'block' : 'none';

      document.getElementById('retroQuote').style.display = isRetro ? 'block' : 'none';

      

      if (isRetro) {

        showBootSequence();

      }

    }

    

    function getCachedScan(url) {

      const cacheKey = `pythia_cache_${url}`;

      const cached = localStorage.getItem(cacheKey);

      if (!cached) return null;

      const data = JSON.parse(cached);

      const age = Date.now() - data.timestamp;

      if (age > CACHE_DURATION) {

        localStorage.removeItem(cacheKey);

        return null;

      }

      return { ...data, cacheAge: Math.floor(age / 1000) };

    }

    

    function setCachedScan(url, data) {

      const cacheKey = `pythia_cache_${url}`;

      const cacheData = { ...data, timestamp: Date.now() };

      localStorage.setItem(cacheKey, JSON.stringify(cacheData));

    }

    

    document.getElementById('themeToggle').addEventListener('click', toggleTheme);

    document.getElementById('scanBtn').addEventListener('click', analyzeSite);

    document.getElementById('urlInput').addEventListener('keypress', (e) => {

      if (e.key === 'Enter') analyzeSite();

    });

    

    // Try Demo URL

    document.getElementById('demoBtn').addEventListener('click', async () => {

      playSound('click');

      try {

        const response = await fetch(TOP50_API);

        const data = await response.json();

        if (data.results && data.results.length > 0) {

          const randomSite = data.results[Math.floor(Math.random() * data.results.length)];

          document.getElementById('urlInput').value = randomSite.url;

          analyzeSite();

        }

      } catch (e) {

        document.getElementById('urlInput').value = 'https://www.google.com';

        analyzeSite();

      }

    });

    

    // Consult Pythia

    document.getElementById('consultBtn').addEventListener('click', async () => {

      playSound('summon');

      const url = document.getElementById('urlInput').value.trim();

      if (!url) {

        alert('Please enter a URL first!');

        return;

      }

      

      const consultResults = document.getElementById('consultationResults');

      const consultText = document.getElementById('consultationText');

      

      consultResults.classList.remove('hidden');

      consultText.innerHTML = 'The Oracle gazes into the digital ether...';

      

      const prophecies = [

        `Beware! The site ${url} bears the mark of ${Math.floor(Math.random() * 100)} tracking demons. Cleanse thyself or face eternal cookies!`,

        `I see... great speed in your future, but accessibility haunts your present. The gods of WCAG are displeased!`,

        `The prophecy speaks of ${Math.floor(Math.random() * 50 + 20)} scripts... too many cooks spoil the DOM, mortal.`,

        `Your site's loading time shall eclipse ${(Math.random() * 5 + 1).toFixed(1)}s. The impatient shall flee to faster shores!`,

        `I foresee a P-Score‚Ñ¢ betwixt ${Math.floor(Math.random() * 30 + 40)} and ${Math.floor(Math.random() * 20 + 70)}. The stars are... inconclusive.`,

        `The Oracle detects ${Math.random() > 0.5 ? 'green' : 'coal-powered'} hosting. The planet ${Math.random() > 0.5 ? 'thanks' : 'weeps for'} thee!`,

        `Hark! Your mobile users cry out in despair. Responsive design is not a suggestion, 'tis a commandment!`,

        `Security headers? The Oracle sees but shadows. Your site is vulnerable to the dark arts of XSS!`,

        `A great battle awaits... ${url} versus its rivals. Only the P-Score‚Ñ¢ shall crown the victor!`,

        `The gods whisper: "Lazy loading, thou must embrace. Images without loading='lazy' are an abomination!"`

      ];

      

      setTimeout(() => {

        consultText.innerHTML = prophecies[Math.floor(Math.random() * prophecies.length)];

      }, 2000);

    });

    

    async function analyzeSite() {

      playSound('scan');

      let url = document.getElementById('urlInput').value.trim();

      if (!url) {

        alert('Please enter a valid URL');

        return;

      }

      

      url = normalizeUrl(url);

      document.getElementById('urlInput').value = url;

      

      const cached = getCachedScan(url);

      if (cached) {

        currentData = cached;

        displayResults(cached, true);

        return;

      }

      

      const scanBtn = document.getElementById('scanBtn');

      const loadingDiv = document.getElementById('loadingSpinner');

      scanBtn.textContent = 'ANALYZING...';

      scanBtn.disabled = true;

      scanBtn.classList.add('scanning');

      loadingDiv.classList.remove('hidden');

      document.getElementById('resultsContainer').classList.add('hidden');

      document.getElementById('pscoreContainer').classList.add('hidden');

      document.getElementById('exportBtn').style.display = 'none';

      document.getElementById('toggleDetailsSection').classList.add('hidden');

      document.getElementById('detailsBreakdown').classList.add('hidden');

      document.getElementById('badgeSection').classList.add('hidden');

      

      try {

        const response = await fetch('/api/scan', {

          method: 'POST',

          headers: { 'Content-Type': 'application/json' },

          body: JSON.stringify({ url })

        });

        

        if (!response.ok) {

          const error = await response.json();

          throw new Error(error.message || error.error || `HTTP ${response.status}`);

        }

        const data = await response.json();

        if (data.error) throw new Error(data.message || 'Unknown error');

        

        setCachedScan(url, data);

        currentData = data;

        displayResults(data, false);

        loadingDiv.classList.add('hidden');

      } catch (error) {

        loadingDiv.classList.add('hidden');

        alert(`Analysis failed: ${error.message}`);

      } finally {

        scanBtn.textContent = 'ANALYZE';

        scanBtn.disabled = false;

        scanBtn.classList.remove('scanning');

      }

    }

    

    function displayResults(data, fromCache) {

      document.getElementById('pscoreValue').textContent = data.pscore || '--';

      const scanDate = new Date(data.timestamp || Date.now()).toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });

      let cacheInfo = fromCache && data.cacheAge ? `<span class="cache-badge cache-stored">üíæ Cached ${Math.floor(data.cacheAge / 60)}m ago</span>` : '<span class="cache-badge cache-live">üü¢ Live</span>';

      document.getElementById('siteInfo').innerHTML = `${data.pageSize} ‚Ä¢ ${data.loadTime} ‚Ä¢ ${scanDate} ${cacheInfo}`;

      document.getElementById('pscoreContainer').classList.remove('hidden');

      

      const resultsContainer = document.getElementById('resultsContainer');

      resultsContainer.innerHTML = '';

      metrics.forEach(metric => {

        const value = data[metric.id] ?? '--';

        const card = document.createElement('div');

        card.className = `tooltip score-card bg-gradient-to-br ${metric.color} text-white p-5 rounded-xl shadow-lg transform transition hover:scale-105`;

        card.innerHTML = `<div class="text-xs font-bold uppercase opacity-90 mb-1">${metric.name}</div><div class="text-4xl font-bold mb-1">${value}</div><div class="text-xs opacity-80">${metric.desc}</div><span class="tooltiptext">${metric.tooltip}</span>`;

        resultsContainer.appendChild(card);

      });

      

      resultsContainer.classList.remove('hidden');

      document.getElementById('exportBtn').style.display = 'inline-block';

      document.getElementById('toggleDetailsSection').classList.remove('hidden');

      

      // Show breakdown

      displayDetailedBreakdown(data);

      

      // Show badge section

      populateBadgeCompare();

      document.getElementById('badgeSection').classList.remove('hidden');

      

      saveToLeaderboard(data);

    }

    

    function displayDetailedBreakdown(data) {

      const isRetro = document.body.classList.contains('retro');

      const divider = isRetro ? '‚ïê‚ïê‚ïê ‚ö° ORACLE REPORT ‚ö° ‚ïê‚ïê‚ïê' : '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ';

      

      const breakdown = document.getElementById('detailsBreakdown');

      breakdown.innerHTML = `

        <div class="modern-card bg-white rounded-lg shadow-lg p-6">

          ${isRetro ? `<div class="text-center mb-4 text-xl font-bold">${divider}</div>` : ''}

          <h3 class="text-2xl font-bold mb-4">Detailed Breakdown</h3>

          <div class="grid md:grid-cols-2 gap-4">

            <div class="bg-gray-50 p-4 rounded-lg">

              <h4 class="font-bold mb-2">‚ö° KARPOV - Speed (${data.karpov}/100)</h4>

              <ul class="text-sm text-gray-700 space-y-1">

                <li>‚Ä¢ Load Time: ${data.breakdown?.karpov?.loadTimeMs || 0}ms</li>

                <li>‚Ä¢ Scripts: ${data.breakdown?.karpov?.scripts || 0}</li>

                <li>‚Ä¢ Images: ${data.breakdown?.karpov?.images || 0}</li>

                <li>‚Ä¢ Stylesheets: ${data.breakdown?.karpov?.stylesheets || 0}</li>

                <li>‚Ä¢ Async: ${data.breakdown?.karpov?.hasAsync ? '‚úì' : '‚úó'}</li>

                <li>‚Ä¢ Minified: ${data.breakdown?.karpov?.hasMinified ? '‚úì' : '‚úó'}</li>

              </ul>

            </div>

            

            <div class="bg-gray-50 p-4 rounded-lg">

              <h4 class="font-bold mb-2">‚ôø VORTEX - Accessibility (${data.vortex}/100)</h4>

              <ul class="text-sm text-gray-700 space-y-1">

                <li>‚Ä¢ Images with Alt: ${data.breakdown?.vortex?.imagesWithAlt || 0}/${data.breakdown?.vortex?.totalImages || 0}</li>

                <li>‚Ä¢ ARIA Labels: ${data.breakdown?.vortex?.ariaLabels || 0}</li>

                <li>‚Ä¢ Roles: ${data.breakdown?.vortex?.roles || 0}</li>

                <li>‚Ä¢ Form Labels: ${data.breakdown?.vortex?.labels || 0}</li>

                <li>‚Ä¢ H1 Count: ${data.breakdown?.vortex?.h1Count || 0} ${data.breakdown?.vortex?.h1Count === 1 ? '‚úì' : '‚ö†Ô∏è'}</li>

              </ul>

            </div>

            

            <div class="bg-gray-50 p-4 rounded-lg">

              <h4 class="font-bold mb-2">üì± PULSE - SEO (${data.pulse}/100)</h4>

              <ul class="text-sm text-gray-700 space-y-1">

                <li>‚Ä¢ Title Tag: ${data.breakdown?.pulse?.hasTitle ? '‚úì' : '‚úó'}</li>

                <li>‚Ä¢ Meta Description: ${data.breakdown?.pulse?.hasMetaDescription ? '‚úì' : '‚úó'}</li>

                <li>‚Ä¢ Canonical URL: ${data.breakdown?.pulse?.hasCanonical ? '‚úì' : '‚úó'}</li>

                <li>‚Ä¢ OG Title: ${data.breakdown?.pulse?.ogTags?.title ? '‚úì' : '‚úó'}</li>

                <li>‚Ä¢ OG Image: ${data.breakdown?.pulse?.ogTags?.image ? '‚úì' : '‚úó'}</li>

              </ul>

            </div>

            

            <div class="bg-gray-50 p-4 rounded-lg">

              <h4 class="font-bold mb-2">üîí HELIX - Privacy (${data.helix}/100)</h4>

              <ul class="text-sm text-gray-700 space-y-1">

                <li>‚Ä¢ Trackers: ${data.breakdown?.helix?.trackerCount || 0}</li>

                <li>‚Ä¢ 3rd Party Scripts: ${data.breakdown?.helix?.thirdPartyScripts || 0}</li>

                <li>‚Ä¢ HSTS: ${data.breakdown?.helix?.securityHeaders?.hsts ? '‚úì' : '‚úó'}</li>

                <li>‚Ä¢ CSP: ${data.breakdown?.helix?.securityHeaders?.csp ? '‚úì' : '‚úó'}</li>

                <li>‚Ä¢ X-Frame-Options: ${data.breakdown?.helix?.securityHeaders?.xFrame ? '‚úì' : '‚úó'}</li>

              </ul>

            </div>

            

            <div class="bg-gray-50 p-4 rounded-lg">

              <h4 class="font-bold mb-2">üåê NOVA - Infrastructure (${data.nova}/100)</h4>

              <ul class="text-sm text-gray-700 space-y-1">

                <li>‚Ä¢ CDN: ${data.breakdown?.nova?.hasCDN ? '‚úì' : '‚úó'}</li>

                <li>‚Ä¢ Caching: ${data.breakdown?.nova?.hasCache ? '‚úì' : '‚úó'}</li>

                <li>‚Ä¢ Compression: ${data.breakdown?.nova?.compression || 'None'}</li>

                <li>‚Ä¢ Server: ${data.breakdown?.nova?.serverHeader || 'Unknown'}</li>

              </ul>

            </div>

            

            <div class="bg-gray-50 p-4 rounded-lg">

              <h4 class="font-bold mb-2">üöÄ AETHER - Modern Tech (${data.aether}/100)</h4>

              <ul class="text-sm text-gray-700 space-y-1">

                <li>‚Ä¢ WebAssembly: ${data.breakdown?.aether?.hasWebAssembly ? '‚úì' : '‚úó'}</li>

                <li>‚Ä¢ Service Worker: ${data.breakdown?.aether?.hasServiceWorker ? '‚úì' : '‚úó'}</li>

                <li>‚Ä¢ ES Modules: ${data.breakdown?.aether?.hasModules ? '‚úì' : '‚úó'}</li>

                <li>‚Ä¢ Framework: ${data.breakdown?.aether?.framework || 'none'}</li>

              </ul>

            </div>

            

            <div class="bg-gray-50 p-4 rounded-lg">

              <h4 class="font-bold mb-2">üìä EDEN - Efficiency (${data.eden}/100)</h4>

              <ul class="text-sm text-gray-700 space-y-1">

                <li>‚Ä¢ Page Size: ${data.breakdown?.eden?.sizeMB?.toFixed(2) || 0} MB</li>

                <li>‚Ä¢ Total Bytes: ${(data.breakdown?.eden?.sizeBytes || 0).toLocaleString()}</li>

                <li>‚Ä¢ Optimal: 0.5-1.5 MB</li>

              </ul>

            </div>

            

            <div class="bg-gray-50 p-4 rounded-lg">

              <h4 class="font-bold mb-2">Additional Metrics</h4>

              <ul class="text-sm text-gray-700 space-y-1">

                <li>‚Ä¢ Load Time: ${data.loadTime}</li>

                <li>‚Ä¢ Page Size: ${data.pageSize}</li>

                <li>‚Ä¢ Analysis Time: ${data.analysisTime}ms</li>

                <li>‚Ä¢ NEXUS (Mobile): ${data.nexus}/100</li>

                <li>‚Ä¢ ECHO (Green): ${data.echo}/100</li>

                <li>‚Ä¢ QUANTUM (Quality): ${data.quantum}/100</li>

              </ul>

            </div>

          </div>

          ${isRetro ? `<div class="text-center mt-6 text-xl font-bold">${divider}</div>` : ''}

        </div>

      `;

      

      breakdown.classList.remove('hidden');

    }

    

    // Toggle Details

    document.getElementById('toggleDetailsBtn')?.addEventListener('click', () => {

      playSound('click');

      const content = document.getElementById('detailsBreakdown');

      const btn = document.getElementById('toggleDetailsBtn');

      const isCollapsed = content.classList.contains('collapsed');

      

      content.classList.toggle('collapsed');

      btn.innerHTML = isCollapsed ? '‚ñ≤ Hide Detailed Breakdown' : '‚ñº Show Detailed Breakdown';

    });

    

    // Badge Functions

    async function populateBadgeCompare() {

      try {

        const response = await fetch(TOP50_API);

        const data = await response.json();

        const select = document.getElementById('badgeCompare');

        

        select.innerHTML = '<option value="">Select a site...</option>';

        data.results.slice(0, 10).forEach(site => {

          const hostname = new URL(site.url).hostname;

          select.innerHTML += `<option value="${site.url}" data-pscore="${site.pscore}">${hostname} (P-Score‚Ñ¢: ${site.pscore})</option>`;

        });

      } catch (e) {

        console.error('Failed to load comparison sites:', e);

      }

    }

    

    function generateBadge() {

      playSound('click');

      if (!currentData) {

        alert('Please scan a website first!');

        return;

      }

      

      const select = document.getElementById('badgeCompare');

      const selectedOption = select.options[select.selectedIndex];

      

      if (!selectedOption.value) {

        alert('Please select a site to compare with!');

        return;

      }

      

      const compareHostname = new URL(selectedOption.value).hostname;

      const comparePscore = parseInt(selectedOption.dataset.pscore);

      const currentPscore = currentData.pscore;

      const diff = currentPscore - comparePscore;

      

      let comparisonText = '';

      if (diff > 0) {

        comparisonText = `${diff} points better than ${compareHostname}!`;

      } else if (diff < 0) {

        comparisonText = `${Math.abs(diff)} points behind ${compareHostname}`;

      } else {

        comparisonText = `Tied with ${compareHostname}!`;

      }

      

      document.getElementById('badgePscore').textContent = currentPscore;

      document.getElementById('badgeComparison').textContent = comparisonText;

      document.getElementById('badgeUrl').textContent = new URL(currentData.url).hostname;

      document.getElementById('badgePreview').classList.remove('hidden');

    }

    

    function shareBadge() {

      playSound('click');

      if (!currentData) return;

      const text = `Check out my P-Score‚Ñ¢: ${currentData.pscore}! Scanned by Pythia‚Ñ¢ üîÆ`;

      shareContent(text, window.location.href);

    }

    

    document.getElementById('exportBtn').addEventListener('click', () => {

      playSound('click');

      if (!currentData) return;

      const exportObj = {

        url: currentData.url,

        timestamp: currentData.timestamp,

        scores: { pscore: currentData.pscore, karpov: currentData.karpov, vortex: currentData.vortex, nova: currentData.nova, aether: currentData.aether, pulse: currentData.pulse, eden: currentData.eden, helix: currentData.helix, echo: currentData.echo, quantum: currentData.quantum, nexus: currentData.nexus },

        metadata: { pageSize: currentData.pageSize, loadTime: currentData.loadTime }

      };

      const blob = new Blob([JSON.stringify(exportObj, null, 2)], { type: 'application/json' });

      const url = URL.createObjectURL(blob);

      const a = document.createElement('a');

      a.href = url;

      a.download = `pythia-${new Date().getTime()}.json`;

      a.click();

      URL.revokeObjectURL(url);

    });

    

    function saveToLeaderboard(data) {

      let leaderboard = JSON.parse(localStorage.getItem('pythiaLeaderboard') || '[]');

      leaderboard.push({ url: data.url, pscore: data.pscore, timestamp: data.timestamp });

      leaderboard.sort((a, b) => b.pscore - a.pscore);

      if (leaderboard.length > 100) leaderboard = leaderboard.slice(0, 100);

      localStorage.setItem('pythiaLeaderboard', JSON.stringify(leaderboard));

      updateLeaderboardDisplay();

    }

    

    function updateLeaderboardDisplay() {

      const leaderboard = JSON.parse(localStorage.getItem('pythiaLeaderboard') || '[]');

      if (leaderboard.length < 3) return;

      document.getElementById('leaderboard').classList.remove('hidden');

      const topSites = leaderboard.slice(0, 10);

      const bottomSites = leaderboard.slice(-10).reverse();

      

      document.getElementById('topSites').innerHTML = topSites.map((site, i) => `

        <div class="leaderboard-entry flex justify-between items-center p-2 rounded">

          <span class="text-sm font-bold">${i + 1}. ${new URL(site.url).hostname}</span>

          <span class="text-lg font-bold text-green-600">${site.pscore}</span>

        </div>

      `).join('');

      

      document.getElementById('bottomSites').innerHTML = bottomSites.map((site, i) => {

        const rank = leaderboard.length - (9 - i);

        return `<div class="leaderboard-entry flex justify-between items-center p-2 rounded">

          <span class="text-sm font-bold">${rank}. ${new URL(site.url).hostname}</span>

          <span class="text-lg font-bold text-red-600">${site.pscore}</span>

        </div>`;

      }).join('');

    }

    

    // Rivalry Functions

    const epicRivalries = [
      // Search Engines
      { name1: 'Google', name2: 'Bing', url1: 'https://www.google.com', url2: 'https://www.bing.com', logo1: 'https://www.google.com/favicon.ico', logo2: 'https://www.bing.com/favicon.ico' },
      { name1: 'Google', name2: 'DuckDuckGo', url1: 'https://www.google.com', url2: 'https://duckduckgo.com', logo1: 'https://www.google.com/favicon.ico', logo2: 'https://duckduckgo.com/favicon.ico' },
      
      // Video Platforms
      { name1: 'YouTube', name2: 'Vimeo', url1: 'https://www.youtube.com', url2: 'https://vimeo.com', logo1: 'https://www.youtube.com/favicon.ico', logo2: 'https://vimeo.com/favicon.ico' },
      { name1: 'YouTube', name2: 'TikTok', url1: 'https://www.youtube.com', url2: 'https://www.tiktok.com', logo1: 'https://www.youtube.com/favicon.ico', logo2: 'https://www.tiktok.com/favicon.ico' },
      { name1: 'Twitch', name2: 'YouTube Gaming', url1: 'https://www.twitch.tv', url2: 'https://gaming.youtube.com', logo1: 'https://www.twitch.tv/favicon.ico', logo2: 'https://www.youtube.com/favicon.ico' },
      
      // Social Media
      { name1: 'Facebook', name2: 'Twitter', url1: 'https://www.facebook.com', url2: 'https://twitter.com', logo1: 'https://www.facebook.com/favicon.ico', logo2: 'https://twitter.com/favicon.ico' },
      { name1: 'Instagram', name2: 'TikTok', url1: 'https://www.instagram.com', url2: 'https://www.tiktok.com', logo1: 'https://www.instagram.com/favicon.ico', logo2: 'https://www.tiktok.com/favicon.ico' },
      { name1: 'Instagram', name2: 'Snapchat', url1: 'https://www.instagram.com', url2: 'https://www.snapchat.com', logo1: 'https://www.instagram.com/favicon.ico', logo2: 'https://www.snapchat.com/favicon.ico' },
      { name1: 'LinkedIn', name2: 'Indeed', url1: 'https://www.linkedin.com', url2: 'https://www.indeed.com', logo1: 'https://www.linkedin.com/favicon.ico', logo2: 'https://www.indeed.com/favicon.ico' },
      { name1: 'Reddit', name2: 'Quora', url1: 'https://www.reddit.com', url2: 'https://www.quora.com', logo1: 'https://www.reddit.com/favicon.ico', logo2: 'https://www.quora.com/favicon.ico' },
      
      // E-Commerce
      { name1: 'Amazon', name2: 'eBay', url1: 'https://www.amazon.com', url2: 'https://www.ebay.com', logo1: 'https://www.amazon.com/favicon.ico', logo2: 'https://www.ebay.com/favicon.ico' },
      { name1: 'Amazon', name2: 'Walmart', url1: 'https://www.amazon.com', url2: 'https://www.walmart.com', logo1: 'https://www.amazon.com/favicon.ico', logo2: 'https://www.walmart.com/favicon.ico' },
      { name1: 'Etsy', name2: 'eBay', url1: 'https://www.etsy.com', url2: 'https://www.ebay.com', logo1: 'https://www.etsy.com/favicon.ico', logo2: 'https://www.ebay.com/favicon.ico' },
      { name1: 'Target', name2: 'Walmart', url1: 'https://www.target.com', url2: 'https://www.walmart.com', logo1: 'https://www.target.com/favicon.ico', logo2: 'https://www.walmart.com/favicon.ico' },
      { name1: 'Best Buy', name2: 'Amazon', url1: 'https://www.bestbuy.com', url2: 'https://www.amazon.com', logo1: 'https://www.bestbuy.com/favicon.ico', logo2: 'https://www.amazon.com/favicon.ico' },
      
      // Streaming Services
      { name1: 'Netflix', name2: 'Hulu', url1: 'https://www.netflix.com', url2: 'https://www.hulu.com', logo1: 'https://www.netflix.com/favicon.ico', logo2: 'https://www.hulu.com/favicon.ico' },
      { name1: 'Netflix', name2: 'Disney+', url1: 'https://www.netflix.com', url2: 'https://www.disneyplus.com', logo1: 'https://www.netflix.com/favicon.ico', logo2: 'https://www.disneyplus.com/favicon.ico' },
      { name1: 'Spotify', name2: 'Apple Music', url1: 'https://www.spotify.com', url2: 'https://music.apple.com', logo1: 'https://www.spotify.com/favicon.ico', logo2: 'https://music.apple.com/favicon.ico' },
      { name1: 'HBO Max', name2: 'Netflix', url1: 'https://www.hbomax.com', url2: 'https://www.netflix.com', logo1: 'https://www.hbomax.com/favicon.ico', logo2: 'https://www.netflix.com/favicon.ico' },
      
      // Tech Giants
      { name1: 'Apple', name2: 'Microsoft', url1: 'https://www.apple.com', url2: 'https://www.microsoft.com', logo1: 'https://www.apple.com/favicon.ico', logo2: 'https://www.microsoft.com/favicon.ico' },
      { name1: 'Apple', name2: 'Samsung', url1: 'https://www.apple.com', url2: 'https://www.samsung.com', logo1: 'https://www.apple.com/favicon.ico', logo2: 'https://www.samsung.com/favicon.ico' },
      { name1: 'iPhone', name2: 'Android', url1: 'https://www.apple.com/iphone', url2: 'https://www.android.com', logo1: 'https://www.apple.com/favicon.ico', logo2: 'https://www.android.com/favicon.ico' },
      
      // Cloud & Dev Tools
      { name1: 'AWS', name2: 'Azure', url1: 'https://aws.amazon.com', url2: 'https://azure.microsoft.com', logo1: 'https://aws.amazon.com/favicon.ico', logo2: 'https://azure.microsoft.com/favicon.ico' },
      { name1: 'GitHub', name2: 'GitLab', url1: 'https://github.com', url2: 'https://gitlab.com', logo1: 'https://github.com/favicon.ico', logo2: 'https://gitlab.com/favicon.ico' },
      { name1: 'VSCode', name2: 'Sublime', url1: 'https://code.visualstudio.com', url2: 'https://www.sublimetext.com', logo1: 'https://code.visualstudio.com/favicon.ico', logo2: 'https://www.sublimetext.com/favicon.ico' },
      { name1: 'Vercel', name2: 'Netlify', url1: 'https://vercel.com', url2: 'https://www.netlify.com', logo1: 'https://vercel.com/favicon.ico', logo2: 'https://www.netlify.com/favicon.ico' },
      
      // Communication
      { name1: 'Zoom', name2: 'Teams', url1: 'https://zoom.us', url2: 'https://www.microsoft.com/teams', logo1: 'https://zoom.us/favicon.ico', logo2: 'https://www.microsoft.com/favicon.ico' },
      { name1: 'Slack', name2: 'Discord', url1: 'https://slack.com', url2: 'https://discord.com', logo1: 'https://slack.com/favicon.ico', logo2: 'https://discord.com/favicon.ico' },
      { name1: 'WhatsApp', name2: 'Telegram', url1: 'https://www.whatsapp.com', url2: 'https://telegram.org', logo1: 'https://www.whatsapp.com/favicon.ico', logo2: 'https://telegram.org/favicon.ico' },
      
      // News & Media
      { name1: 'CNN', name2: 'Fox News', url1: 'https://www.cnn.com', url2: 'https://www.foxnews.com', logo1: 'https://www.cnn.com/favicon.ico', logo2: 'https://www.foxnews.com/favicon.ico' },
      { name1: 'New York Times', name2: 'Washington Post', url1: 'https://www.nytimes.com', url2: 'https://www.washingtonpost.com', logo1: 'https://www.nytimes.com/favicon.ico', logo2: 'https://www.washingtonpost.com/favicon.ico' },
      { name1: 'BBC', name2: 'CNN', url1: 'https://www.bbc.com', url2: 'https://www.cnn.com', logo1: 'https://www.bbc.com/favicon.ico', logo2: 'https://www.cnn.com/favicon.ico' },
      
      // Food Delivery
      { name1: 'Uber Eats', name2: 'DoorDash', url1: 'https://www.ubereats.com', url2: 'https://www.doordash.com', logo1: 'https://www.ubereats.com/favicon.ico', logo2: 'https://www.doordash.com/favicon.ico' },
      { name1: 'Uber', name2: 'Lyft', url1: 'https://www.uber.com', url2: 'https://www.lyft.com', logo1: 'https://www.uber.com/favicon.ico', logo2: 'https://www.lyft.com/favicon.ico' },
      
      // Travel
      { name1: 'Airbnb', name2: 'Booking.com', url1: 'https://www.airbnb.com', url2: 'https://www.booking.com', logo1: 'https://www.airbnb.com/favicon.ico', logo2: 'https://www.booking.com/favicon.ico' },
      { name1: 'Expedia', name2: 'Kayak', url1: 'https://www.expedia.com', url2: 'https://www.kayak.com', logo1: 'https://www.expedia.com/favicon.ico', logo2: 'https://www.kayak.com/favicon.ico' },
      
      // Productivity
      { name1: 'Notion', name2: 'Evernote', url1: 'https://www.notion.so', url2: 'https://evernote.com', logo1: 'https://www.notion.so/favicon.ico', logo2: 'https://evernote.com/favicon.ico' },
      { name1: 'Trello', name2: 'Asana', url1: 'https://trello.com', url2: 'https://asana.com', logo1: 'https://trello.com/favicon.ico', logo2: 'https://asana.com/favicon.ico' },
      { name1: 'Dropbox', name2: 'Google Drive', url1: 'https://www.dropbox.com', url2: 'https://drive.google.com', logo1: 'https://www.dropbox.com/favicon.ico', logo2: 'https://drive.google.com/favicon.ico' }
    ];

    

    function renderRivalries() {

      const list = document.getElementById('rivalryList');

      list.innerHTML = epicRivalries.map(rivalry => {

        return `<div class="rivalry-item flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">

          <span class="text-sm font-bold">${rivalry.name1} vs ${rivalry.name2}</span>

          <button onclick="startBattle('${rivalry.url1}', '${rivalry.url2}', '${rivalry.name1}', '${rivalry.name2}', '${rivalry.logo1 || ''}', '${rivalry.logo2 || ''}')" 

            class="retro-button px-4 py-2 bg-red-500 text-white font-bold rounded-lg hover:bg-red-600 transition text-sm">‚öîÔ∏è</button>

        </div>`;

      }).join('');

    }

    

    document.getElementById('customBattleBtn').addEventListener('click', () => {

      playSound('click');

      let url1 = document.getElementById('customUrl1').value.trim();

      let url2 = document.getElementById('customUrl2').value.trim();

      if (!url1 || !url2) {

        alert('Please enter two URLs');

        return;

      }

      url1 = normalizeUrl(url1);

      url2 = normalizeUrl(url2);

      const name1 = new URL(url1).hostname;

      const name2 = new URL(url2).hostname;

      startBattle(url1, url2, name1, name2);

    });

    

    async function startBattle(url1, url2, name1, name2, logo1 = '', logo2 = '') {

      playSound('scan');

      document.getElementById('battleResults').classList.add('hidden');

      const btn = event.target;

      btn.innerHTML = '<span class="sword-fighting">‚öîÔ∏è</span>';

      btn.disabled = true;

      

      try {

        let result1 = getCachedScan(url1);

        let result2 = getCachedScan(url2);

        const promises = [];

        

        if (!result1) {

          promises.push(fetch('/api/scan', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ url: url1 }) })

            .then(r => r.json()).then(data => { setCachedScan(url1, data); result1 = data; }));

        }

        if (!result2) {

          promises.push(fetch('/api/scan', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ url: url2 }) })

            .then(r => r.json()).then(data => { setCachedScan(url2, data); result2 = data; }));

        }

        

        await Promise.all(promises);

        

        const winner = result1.pscore > result2.pscore ? name1 : result2.pscore > result1.pscore ? name2 : 'TIE';

        const winnerLogo = result1.pscore > result2.pscore ? logo1 : result2.pscore > result1.pscore ? logo2 : '';

        const battleDate = new Date().toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });

        

        currentBattleData = { name1, name2, result1, result2, winner, battleDate };

        

        const winnerIcon = document.getElementById('winnerIcon');

        if (winnerLogo && winner !== 'TIE') {

          winnerIcon.querySelector('img').src = winnerLogo;

          winnerIcon.querySelector('img').alt = `${winner} logo`;

          winnerIcon.classList.remove('hidden');

        } else {

          winnerIcon.classList.add('hidden');

        }

        

        const winnerAnnouncement = document.getElementById('winnerAnnouncement');

        if (winner === 'TIE') {

          winnerAnnouncement.innerHTML = `ü§ù IT'S A TIE!<br><span class="text-2xl">P-Score‚Ñ¢: ${result1.pscore} - ${result2.pscore}</span><br><span class="text-xs opacity-75 mt-2 block">${battleDate}</span>`;

        } else {

          const winScore = winner === name1 ? result1.pscore : result2.pscore;

          const loseScore = winner === name1 ? result2.pscore : result1.pscore;

          winnerAnnouncement.innerHTML = `üèÜ ${winner.toUpperCase()} IS THE WINNER!<br><span class="text-2xl">P-Score‚Ñ¢: ${winScore} - ${loseScore}</span><br><span class="text-xs opacity-75 mt-2 block">${battleDate}</span>`;

        }

        

        document.getElementById('contestant1Results').innerHTML = `<div class="text-center"><div class="text-xl font-bold mb-2">${name1}</div><div class="text-3xl font-bold text-indigo-600">${result1.pscore}</div><div class="text-sm font-bold mt-2">P-Score‚Ñ¢</div><div class="text-xs text-gray-500 mt-2">Speed: ${result1.karpov} ‚Ä¢ Access: ${result1.vortex}<br>Scale: ${result1.nova} ‚Ä¢ Tech: ${result1.aether}</div></div>`;

        document.getElementById('contestant2Results').innerHTML = `<div class="text-center"><div class="text-xl font-bold mb-2">${name2}</div><div class="text-3xl font-bold text-purple-600">${result2.pscore}</div><div class="text-sm font-bold mt-2">P-Score‚Ñ¢</div><div class="text-xs text-gray-500 mt-2">Speed: ${result2.karpov} ‚Ä¢ Access: ${result2.vortex}<br>Scale: ${result2.nova} ‚Ä¢ Tech: ${result2.aether}</div></div>`;

        

        document.getElementById('battleResults').classList.remove('hidden');

        setTimeout(() => { window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }); }, 100);

      } catch (error) {

        alert(`Battle failed: ${error.message}`);

      } finally {

        btn.innerHTML = '‚öîÔ∏è';

        btn.disabled = false;

      }

    }

    

    document.getElementById('shareRivalryBtn').addEventListener('click', () => {

      playSound('click');

      if (currentBattleData) {

        const { name1, name2, result1, result2, winner, battleDate } = currentBattleData;

        const text = `‚öîÔ∏è PYTHIA‚Ñ¢ BATTLE (${battleDate}): ${name1} (${result1.pscore}) v ${name2} (${result2.pscore}) - ${winner.toUpperCase()} WINS! üèÜ Scanned by Pythia‚Ñ¢ üîÆ`;

        shareContent(text, window.location.href);

      }

    });

    

    async function loadTop50Results() {

      try {

        const response = await fetch(TOP50_API);

        const data = await response.json();

        if (data.error) throw new Error(data.message);

        

        const sorted = data.results.sort((a, b) => b.pscore - a.pscore);

        const top5 = sorted.slice(0, 5);

        const bottom5 = sorted.slice(-5).reverse();

        const scanDate = new Date(data.timestamp).toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit', timeZone: 'America/Los_Angeles' });

        

        document.getElementById('top50TopList').innerHTML = `<div class="text-xs text-gray-500 mb-3 italic">Last scan: ${scanDate} PT</div>${top5.map((site, i) => {

          const avgDisplay = site.fiveDayAvg ? ` (5d avg: ${site.fiveDayAvg})` : '';

          return `<div class="leaderboard-entry flex justify-between items-center p-3 rounded bg-green-50"><span class="text-sm font-bold text-gray-700">${i + 1}. ${new URL(site.url).hostname}</span><span class="text-lg font-bold text-green-600">P-Score‚Ñ¢: ${site.pscore}${avgDisplay}</span></div>`;

        }).join('')}`;

        

        document.getElementById('top50BottomList').innerHTML = `<div class="text-xs text-gray-500 mb-3 italic">Last scan: ${scanDate} PT</div>${bottom5.map((site, i) => {

          const rank = sorted.length - (4 - i);

          const avgDisplay = site.fiveDayAvg ? ` (5d avg: ${site.fiveDayAvg})` : '';

          return `<div class="leaderboard-entry flex justify-between items-center p-3 rounded bg-red-50"><span class="text-sm font-bold text-gray-700">${rank}. ${new URL(site.url).hostname}</span><span class="text-lg font-bold text-red-600">P-Score‚Ñ¢: ${site.pscore}${avgDisplay}</span></div>`;

        }).join('')}`;

        

        document.getElementById('top50Loading').classList.add('hidden');

        document.getElementById('top50Results').classList.remove('hidden');

      } catch (error) {

        document.getElementById('top50Loading').innerHTML = `<div class="text-red-600 font-bold">Failed to load rankings</div><div class="text-sm text-gray-500 mt-2">${error.message}</div>`;

      }

    }

    

    async function loadEnterpriseDaily() {

      try {

        const response = await fetch(ENTERPRISE_API);

        const data = await response.json();

        if (data.error) throw new Error(data.message);

        

        const winner = data.winner;

        document.getElementById('enterpriseWinner').textContent = new URL(winner.url).hostname;

        document.getElementById('enterprisePscore').textContent = winner.pscore;

        document.getElementById('enterpriseLoadTime').textContent = winner.loadTime;

        document.getElementById('enterpriseTotalScanned').textContent = `From ${data.totalScanned} sites scanned on ${data.scanDate}`;

        document.getElementById('enterpriseLink').href = winner.url;

        

        document.getElementById('enterpriseDailyLoading').classList.add('hidden');

        document.getElementById('enterpriseDailyResults').classList.remove('hidden');

      } catch (error) {

        document.getElementById('enterpriseDailyLoading').innerHTML = `<div class="text-gray-600 font-bold">No scan available yet</div><div class="text-sm text-gray-500 mt-2">${error.message}</div>`;

      }

    }

    

    function shareOn(platform) {

      playSound('click');

      const text = 'Check out Pythia‚Ñ¢ - The ultimate website performance oracle! ONE SCORE TO RANK THEM ALL üîÆ';

      const url = window.location.href;

      shareContent(text, url, platform);

    }

    

    function shareContent(text, url, platform = null) {

      const encodedText = encodeURIComponent(text);

      const encodedUrl = encodeURIComponent(url);

      if (!platform) {

        if (navigator.share) navigator.share({ title: 'Pythia‚Ñ¢', text, url });

        return;

      }

      let shareUrl;

      switch(platform) {

        case 'twitter': shareUrl = `https://twitter.com/intent/tweet?text=${encodedText}&url=${encodedUrl}`; break;

        case 'facebook': shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`; break;

        case 'whatsapp': shareUrl = `https://wa.me/?text=${encodedText}%20${encodedUrl}`; break;

        case 'email': shareUrl = `mailto:?subject=${encodeURIComponent('Pythia‚Ñ¢ - Website Performance Oracle')}&body=${encodedText}%20${encodedUrl}`; break;

      }

      if (shareUrl) window.open(shareUrl, '_blank', 'width=600,height=400');

    }

    

    // Initialize

    updateVisitCounter();

    updateLeaderboardDisplay();

    renderRivalries();

    loadTop50Results();

    loadEnterpriseDaily();

  </script>

</body>

</html>







Scan.js:



// functions/api/scan.js

// Pythia Public Scanner ‚Äì Legal & Rate-Limited (South Africa)



export async function onRequest(context) {

 const { request, env } = context;

 const corsHeaders = {

 'Access-Control-Allow-Origin': '*',

 'Access-Control-Allow-Methods': 'POST, OPTIONS',

 'Access-Control-Allow-Headers': 'Content-Type',

 'Content-Type': 'application/json'

 };



 // Handle preflight

 if (request.method === 'OPTIONS') {

 return new Response(null, { status: 200, headers: corsHeaders });

 }



 if (request.method !== 'POST') {

 return new Response(JSON.stringify({ error: 'Only POST allowed' }), {

 status: 405,

 headers: corsHeaders

 });

 }



 try {

 const { url } = await request.json();

 if (!url) {

 return new Response(JSON.stringify({ error: 'URL required' }), {

 status: 400,

 headers: corsHeaders

 });

 }



 // === 1. RATE LIMIT: 25 scans per hour per IP ===

 const ip = request.headers.get('cf-connecting-ip') || 'unknown';

 const rateKey = `rate:${ip}`;

 const count = parseInt(await env.PYTHIA_TOP50_KV.get(rateKey) || '0');

 if (count >= 25) {

 return new Response(JSON.stringify({ error: 'Too many requests. Try again in 1 hour.' }), {

 status: 429,

 headers: corsHeaders

 });

 }

 await env.PYTHIA_TOP50_KV.put(rateKey, (count + 1).toString(), { expirationTtl: 3600 });



 // === 2. RESPECT robots.txt ===

 const robotsUrl = new URL('/robots.txt', url).href;

 let blocked = false;

 try {

 const robots = await fetch(robotsUrl, { 

 headers: { 'User-Agent': 'PythiaBot/1.0 (+https://p-score.me)' } 

 }).then(r => r.text());

 if (robots.includes('User-agent: PythiaBot') && robots.includes('Disallow: /')) {

 blocked = true;

 }

 } catch (e) {

 // Ignore if robots.txt fails to load

 }

 if (blocked) {

 return new Response(JSON.stringify({ error: 'Site blocks PythiaBot via robots.txt' }), {

 status: 403,

 headers: corsHeaders

 });

 }



 // === 3. ROTATING USER AGENT ===

 const userAgents = [

 'PythiaBot/1.0 (+https://p-score.me)',

 'Mozilla/5.0 (compatible; PythiaBot/1.0; +https://p-score.me)'

 ];

 const userAgent = userAgents[Math.floor(Math.random() * userAgents.length)];



 // === 4. FETCH SITE ===

 const startTime = Date.now();

 let html = '';

 let siteHeaders = null;

 let contentLength = 0;

 let loadTime = 0;



 try {

 const fetchStart = Date.now();

 const [headResponse, htmlResponse] = await Promise.all([

 fetch(url, { method: 'HEAD', redirect: 'follow', headers: { 'User-Agent': userAgent } }),

 fetch(url, { redirect: 'follow', headers: { 'User-Agent': userAgent } })

 ]);

 loadTime = Date.now() - fetchStart;

 siteHeaders = headResponse.headers;

 html = await htmlResponse.text();

 contentLength = parseInt(siteHeaders.get('content-length') || html.length.toString(), 10);

 } catch (fetchError) {

 return new Response(JSON.stringify({

 error: true,

 message: `Could not fetch website: ${fetchError.message}`

 }), { status: 400, headers: corsHeaders });

 }



 // === 5. HTML ANALYSIS (unchanged) ===

 const analysis = {

 scripts: (html.match(/<script/gi) || []).length,

 externalScripts: (html.match(/<script[^>]*src=/gi) || []).length,

 inlineScripts: (html.match(/<script[^>]*>[\s\S]*?<\/script>/gi) || []).length,

 images: (html.match(/<img/gi) || []).length,

 stylesheets: (html.match(/<link[^>]*rel=["']stylesheet/gi) || []).length,

 inlineStyles: (html.match(/<style/gi) || []).length,

 videos: (html.match(/<video|<iframe[^>]*youtube|<iframe[^>]*vimeo/gi) || []).length,

 fonts: (html.match(/font-face|@font-face/gi) || []).length,

 hasAsync: (html.match(/async/gi) || []).length,

 hasDefer: (html.match(/defer/gi) || []).length,

 hasPreload: (html.match(/rel=["']preload/gi) || []).length,

 hasLazyLoad: html.includes('loading="lazy"') || html.includes('data-src'),

 hasMinified: html.includes('.min.js') || html.includes('.min.css'),

 altTags: (html.match(/alt=["'][^"']*["']/gi) || []).length,

 emptyAlts: (html.match(/alt=["']["']/gi) || []).length,

 ariaLabels: (html.match(/aria-label/gi) || []).length,

 ariaAttrs: (html.match(/aria-/gi) || []).length,

 roles: (html.match(/role=/gi) || []).length,

 labels: (html.match(/<label/gi) || []).length,

 headings: {

 h1: (html.match(/<h1/gi) || []).length,

 h2: (html.match(/<h2/gi) || []).length,

 h3: (html.match(/<h3/gi) || []).length,

 },

 title: html.match(/<title>([^<]+)<\/title>/i)?.[1] || '',

 metaDescription: html.match(/meta[^>]*name=["']description["'][^>]*content=["']([^"']+)/i)?.[1] || '',

 ogTags: {

 title: html.includes('og:title'),

 description: html.includes('og:description'),

 image: html.includes('og:image'),

 url: html.includes('og:url'),

 },

 twitterCard: html.includes('twitter:card'),

 canonical: html.includes('rel="canonical"'),

 hasWebAssembly: html.includes('.wasm') || html.includes('WebAssembly'),

 hasServiceWorker: html.includes('ServiceWorker') || html.includes('navigator.serviceWorker'),

 hasModules: html.includes('type="module"'),

 hasWebP: html.includes('webp') || html.includes('.webp'),

 hasAVIF: html.includes('avif') || html.includes('.avif'),

 frameworks: {

 react: html.match(/react/i) !== null,

 vue: html.match(/vue/i) !== null,

 angular: html.match(/angular/i) !== null,

 svelte: html.match(/svelte/i) !== null,

 },

 trackers: (html.match(/google-analytics|googletagmanager|facebook\.com\/tr|gtag|doubleclick|mouseflow|clarity\.ms|hotjar|mixpanel|segment\.com/gi) || []),

 };



 const hostname = new URL(url).hostname;

 const scriptMatches = html.match(/<script[^>]*src=["']https?:\/\/[^"']+["']/gi) || [];

 analysis.thirdPartyScripts = scriptMatches.filter(script => !script.includes(hostname)).length;



 const sizeMB = contentLength / (1024 * 1024);



 // === METRIC CALCULATIONS (unchanged) ===

 let karpovScore = 85;

 if (loadTime > 5000) karpovScore -= 40;

 else if (loadTime > 3000) karpovScore -= 30;

 else if (loadTime > 2000) karpovScore -= 20;

 else if (loadTime > 1000) karpovScore -= 10;

 else if (loadTime < 500) karpovScore += 10;

 karpovScore -= Math.min(30, analysis.scripts * 2);

 karpovScore -= Math.min(15, analysis.images * 0.6);

 karpovScore -= Math.min(12, analysis.stylesheets * 3.5);

 karpovScore -= Math.min(15, analysis.videos * 8);

 karpovScore -= Math.min(25, sizeMB * 10);

 if (analysis.hasAsync > 0) karpovScore += 5;

 if (analysis.hasDefer > 0) karpovScore += 4;

 if (analysis.hasPreload > 0) karpovScore += 3;

 if (analysis.hasLazyLoad) karpovScore += 8;

 if (analysis.hasMinified) karpovScore += 6;

 const karpov = Math.max(0, Math.min(100, Math.round(karpovScore)));



 let vortexScore = 40;

 const imageAccessScore = analysis.images > 0 ? ((analysis.altTags - analysis.emptyAlts) / analysis.images) * 30 : 5;

 vortexScore += imageAccessScore;

 vortexScore += Math.min(20, analysis.ariaLabels * 2.5);

 vortexScore += Math.min(12, analysis.ariaAttrs * 1);

 vortexScore += Math.min(10, analysis.roles * 2);

 vortexScore += Math.min(10, analysis.labels * 2.5);

 if (analysis.headings.h1 === 1) vortexScore += 8;

 else if (analysis.headings.h1 > 1) vortexScore -= 5;

 else if (analysis.headings.h1 === 0) vortexScore -= 10;

 if (analysis.headings.h2 >= 2) vortexScore += 5;

 const vortex = Math.max(0, Math.min(100, Math.round(vortexScore)));



 let novaScore = 10;

 const cdnProviders = ['cloudflare', 'akamai', 'fastly', 'cloudfront', 'cdn77', 'bunnycdn', 'stackpath'];

 const serverHeader = siteHeaders.get('server')?.toLowerCase() || '';

 const viaHeader = siteHeaders.get('via')?.toLowerCase() || '';

 if (cdnProviders.some(cdn => serverHeader.includes(cdn) || viaHeader.includes(cdn))) novaScore += 35;

 if (siteHeaders.get('x-cache') || siteHeaders.get('cf-cache-status') || siteHeaders.get('x-varnish')) novaScore += 25;

 if (siteHeaders.get('cache-control')?.includes('public')) novaScore += 18;

 if (siteHeaders.get('cache-control')?.includes('max-age')) novaScore += 10;

 const encoding = siteHeaders.get('content-encoding') || '';

 if (encoding.includes('br')) novaScore += 12;

 else if (encoding.includes('gzip')) novaScore += 6;

 const nova = Math.min(100, Math.round(novaScore));



 let aetherScore = 8;

 if (analysis.hasWebAssembly) aetherScore += 22;

 if (analysis.hasServiceWorker) aetherScore += 18;

 if (analysis.hasModules) aetherScore += 16;

 if (analysis.hasWebP) aetherScore += 12;

 if (analysis.hasAVIF) aetherScore += 14;

 if (analysis.hasAsync > 5) aetherScore += 6;

 if (analysis.hasDefer > 5) aetherScore += 4;

 if (analysis.frameworks.react) aetherScore += 8;

 else if (analysis.frameworks.vue || analysis.frameworks.svelte) aetherScore += 10;

 else if (analysis.frameworks.angular) aetherScore += 6;

 const aether = Math.min(100, Math.round(aetherScore));



 let pulseScore = 12;

 if (analysis.title && analysis.title.length > 10) pulseScore += 15;

 if (analysis.metaDescription && analysis.metaDescription.length > 50) pulseScore += 12;

 if (analysis.canonical) pulseScore += 11;

 if (analysis.headings.h1 === 1) pulseScore += 8;

 if (analysis.ogTags.title) pulseScore += 14;

 if (analysis.ogTags.description) pulseScore += 11;

 if (analysis.ogTags.image) pulseScore += 16;

 if (analysis.ogTags.url) pulseScore += 6;

 if (analysis.twitterCard) pulseScore += 10;

 const pulse = Math.min(100, Math.round(pulseScore));



 let edenScore = 100;

 if (sizeMB > 10) edenScore = Math.max(10, 100 - (sizeMB - 10) * 8);

 else if (sizeMB > 5) edenScore = Math.max(35, 100 - (sizeMB - 5) * 10);

 else if (sizeMB > 3) edenScore = Math.max(55, 100 - (sizeMB - 3) * 12);

 else if (sizeMB > 1.5) edenScore = Math.max(75, 100 - (sizeMB - 1.5) * 15);

 else if (sizeMB < 0.3) edenScore = Math.max(70, 100 - (0.3 - sizeMB) * 50);

 const eden = Math.round(edenScore);



 let helixScore = 45;

 helixScore -= analysis.trackers.length * 6.5;

 helixScore -= Math.min(15, analysis.thirdPartyScripts * 1.2);

 if (siteHeaders.get('strict-transport-security')) helixScore += 14;

 if (siteHeaders.get('content-security-policy')) helixScore += 13;

 if (siteHeaders.get('x-frame-options')) helixScore += 10;

 if (siteHeaders.get('x-content-type-options')) helixScore += 8;

 if (siteHeaders.get('referrer-policy')) helixScore += 6;

 if (siteHeaders.get('permissions-policy')) helixScore += 7;

 if (url.startsWith('https://')) helixScore += 5;

 const helix = Math.max(0, Math.min(100, Math.round(helixScore)));



 let echoScore = 48;

 if (sizeMB < 1) echoScore += 8;

 if (analysis.hasWebP || analysis.hasAVIF) echoScore += 6;

 if (analysis.hasLazyLoad) echoScore += 4;

 try {

 const hostname = new URL(url).hostname;

 const greenUrl = `https://api.thegreenwebfoundation.org/greencheck/${hostname}`;

 const greenResponse = await fetch(greenUrl);

 if (greenResponse.ok) {

 const greenData = await greenResponse.json();

 if (greenData.green) echoScore = Math.min(100, echoScore + 34);

 }

 } catch (e) {

 console.log('Green check failed:', e.message);

 }

 const echo = Math.round(echoScore);



 let quantumScore = 62;

 if (!html.includes('document.write')) quantumScore += 9;

 if (html.includes('integrity=')) quantumScore += 8;

 if (!html.match(/eval\(/)) quantumScore += 7;

 if (html.includes('crossorigin')) quantumScore += 6;

 if (html.includes('rel="noopener"')) quantumScore += 5;

 if (!html.includes('<!DOCTYPE html>') && !html.includes('<!doctype html>')) quantumScore -= 8;

 if (analysis.inlineScripts > 5) quantumScore -= 6;

 const quantum = Math.min(100, Math.round(quantumScore));



 let nexusScore = 48;

 if (html.includes('viewport')) nexusScore += 24;

 const mediaQueries = (html.match(/@media/gi) || []).length;

 nexusScore += Math.min(16, mediaQueries * 2.8);

 if (html.includes('mobile-web-app-capable')) nexusScore += 6;

 if (html.includes('apple-mobile-web-app')) nexusScore += 6;

 const nexus = Math.min(100, Math.round(nexusScore));



 const pScore = (

 karpov * 0.10 +

 vortex * 0.10 +

 pulse * 0.10 +

 helix * 0.10 +

 nexus * 0.10 +

 echo * 0.10 +

 nova * 0.10 +

 quantum * 0.10 +

 aether * 0.10 +

 eden * 0.10

 );



 const result = {

 url,

 timestamp: new Date().toISOString(),

 pscore: Math.round(pScore),

 analysisTime: Date.now() - startTime,

 pageSize: `${sizeMB.toFixed(2)} MB`,

 loadTime: `${(loadTime / 1000).toFixed(2)}s`,

 karpov, vortex, nova, aether, pulse, eden, helix, echo, quantum, nexus,

 breakdown: {

 karpov: { loadTimeMs: loadTime, scripts: analysis.scripts, images: analysis.images, stylesheets: analysis.stylesheets, videos: analysis.videos, hasAsync: analysis.hasAsync, hasDefer: analysis.hasDefer, hasMinified: analysis.hasMinified },

 vortex: { totalImages: analysis.images, imagesWithAlt : analysis.altTags, emptyAlts: analysis.emptyAlts, ariaLabels: analysis.ariaLabels, roles: analysis.roles, labels: analysis.labels, h1Count: analysis.headings.h1 },

 nova: { hasCDN: cdnProviders.some(cdn => serverHeader.includes(cdn) || viaHeader.includes(cdn)), hasCache: !!(siteHeaders.get('x-cache') || siteHeaders.get('cf-cache-status')), compression: encoding, serverHeader: serverHeader },

 aether: { hasWebAssembly: analysis.hasWebAssembly, hasServiceWorker: analysis.hasServiceWorker, hasModules: analysis.hasModules, framework: Object.keys(analysis.frameworks).find(k => analysis.frameworks[k]) || 'none' },

 pulse: { hasTitle: !!analysis.title, hasMetaDescription: !!analysis.metaDescription, ogTags: analysis.ogTags, hasCanonical: analysis.canonical },

 eden: { sizeBytes: contentLength, sizeMB },

 helix: { trackerCount: analysis.trackers.length, thirdPartyScripts: analysis.thirdPartyScripts, securityHeaders: { hsts: !!siteHeaders.get('strict-transport-security'), csp: !!siteHeaders.get('content-security-policy'), xFrame: !!siteHeaders.get('x-frame-options') }}

 }

 };



 return new Response(JSON.stringify(result), {

 status: 200,

 headers: corsHeaders

 });



 } catch (error) {

 console.error('Scan error:', error);

 return new Response(JSON.stringify({

 error: true,

 message: error.message

 }), { status: 500, headers: corsHeaders });

 }

}



Other files:



// functions/api/enterprise-daily.js

// Cloudflare Function for daily random enterprise website showcase



export async function onRequest(context) {

  const corsHeaders = {

    'Access-Control-Allow-Origin': '*',

    'Access-Control-Allow-Methods': 'GET, OPTIONS',

    'Access-Control-Allow-Headers': 'Content-Type',

    'Content-Type': 'application/json'

  };



  if (context.request.method === 'OPTIONS') {

    return new Response(null, { status: 200, headers: corsHeaders });

  }



  if (context.request.method !== 'GET') {

    return new Response(JSON.stringify({ error: 'Only GET allowed' }), {

      status: 405,

      headers: corsHeaders

    });

  }



  try {

    const KV = context.env.PYTHIA_TOP50_KV; // Reuse same KV namespace

    const today = new Date().toISOString().split('T')[0];

    const cacheKey = `enterprise_daily_${today}`;

    

    // Check if we have today's winner already cached

    const cached = await KV.get(cacheKey, 'json');

    if (cached) {

      return new Response(JSON.stringify(cached), {

        status: 200,

        headers: corsHeaders

      });

    }

    

    // If not cached, return message that scan is in progress or pending

    return new Response(JSON.stringify({

      error: true,

      message: 'Daily enterprise scan runs at 12:01 AM PT. Check back tomorrow for today\'s top performer!',

      nextScan: '12:01 AM PT (8:01 AM UTC)'

    }), {

      status: 503,

      headers: corsHeaders

    });

    

  } catch (error) {

    console.error('Enterprise daily error:', error);

    return new Response(JSON.stringify({

      error: true,

      message: error.message

    }), {

      status: 500,

      headers: corsHeaders

    });

  }

}





// functions/api/top5.js

// Updated Pythia‚Ñ¢ API for Top 5 rankings (slices from top 50, with averages)



export async function onRequest(context) {

  const corsHeaders = {

    'Access-Control-Allow-Origin': '*',

    'Access-Control-Allow-Methods': 'GET, OPTIONS',

    'Access-Control-Allow-Headers': 'Content-Type',

    'Content-Type': 'application/json'

  };



  if (context.request.method === 'OPTIONS') {

    return new Response(null, { status: 200, headers: corsHeaders });

  }



  if (context.request.method !== 'GET') {

    return new Response(JSON.stringify({ error: 'Only GET allowed' }), {

      status: 405,

      headers: corsHeaders

    });

  }



  try {

    const KV = context.env.PYTHIA_TOP50_KV;

    const today = new Date().toISOString().split('T')[0];

    const cacheKey = `top5_${today}`;

    

    // Try cached today's top 5

    let cached = await KV.get(cacheKey, 'json');

    if (cached) {

      return new Response(JSON.stringify(cached), {

        status: 200,

        headers: corsHeaders

      });

    }

    

    // Fallback to latest top 50 and slice top 5

    const latest = await KV.get('latest-top50', 'json');

    if (!latest || latest.length < 5) {

      return new Response(JSON.stringify({

        error: true,

        message: 'No top 5 data available yet. Daily scan runs at 12:01 AM PT.'

      }), {

        status: 503,

        headers: corsHeaders

      });

    }

    

    // Add 5-day averages (from top50.js logic)

    const top5WithAvg = await Promise.all(latest.slice(0, 5).map(async (result) => {

      const historyKey = `history_${result.url}`;

      let history = await KV.get(historyKey, 'json') || [];

      

      history.push({ date: today, pscore: result.pscore });

      if (history.length > 30) history = history.slice(-30);

      

      let fiveDayAvg = null;

      if (history.length >= 5) {

        const last5 = history.slice(-5);

        const sum = last5.reduce((acc, item) => acc + item.pscore, 0);

        fiveDayAvg = Math.round(sum / 5);

      }

      

      await KV.put(historyKey, JSON.stringify(history), { expirationTtl: 60 * 60 * 24 * 31 });

      

      return { ...result, fiveDayAvg };

    }));

    

    // Cache for today

    const dataToCache = {

      timestamp: Date.now(),

      results: top5WithAvg

    };

    await KV.put(cacheKey, JSON.stringify(dataToCache), { expirationTtl: 60 * 60 * 24 });

    

    return new Response(JSON.stringify(dataToCache), {

      status: 200,

      headers: corsHeaders

    });

    

  } catch (error) {

    console.error('Top5 error:', error);

    return new Response(JSON.stringify({

      error: true,

      message: error.message

    }), {

      status: 500,

      headers: corsHeaders

    });

  }

}





// functions/api/top50.js

// Updated Pythia API for Top 50 rankings (reads KV, with 5-day averages)



export async function onRequest(context) {

  const corsHeaders = {

    'Access-Control-Allow-Origin': '*',

    'Access-Control-Allow-Methods': 'GET, OPTIONS',

    'Access-Control-Allow-Headers': 'Content-Type',

    'Content-Type': 'application/json'

  };



  if (context.request.method === 'OPTIONS') {

    return new Response(null, { status: 200, headers: corsHeaders });

  }



  if (context.request.method !== 'GET') {

    return new Response(JSON.stringify({ error: 'Only GET allowed' }), {

      status: 405,

      headers: corsHeaders

    });

  }



  try {

    const KV = context.env.PYTHIA_TOP50_KV;

    const today = new Date().toISOString().split('T')[0];

    const cacheKey = `top50_${today}`;

    

    // Try cached today's data

    let cached = await KV.get(cacheKey, 'json');

    if (cached) {

      return new Response(JSON.stringify(cached), {

        status: 200,

        headers: corsHeaders

      });

    }

    

    // Fallback to latest (from cron Worker)

    const latest = await KV.get('latest-top50', 'json');

    if (!latest || latest.length === 0) {

      return new Response(JSON.stringify({

        error: true,

        message: 'No results available yet. Daily scan runs at 12:01 AM PT.'

      }), {

        status: 503,

        headers: corsHeaders

      });

    }

    

    // Add 5-day running averages (from your logic, using KV history)

    const resultsWithAvg = await Promise.all(latest.map(async (result) => {

      const historyKey = `history_${result.url}`;

      let history = await KV.get(historyKey, 'json') || [];

      

      // Append today's score (from latest scan)

      history.push({ date: today, pscore: result.pscore });

      

      if (history.length > 30) {

        history = history.slice(-30);  // Keep last 30 days

      }

      

      let fiveDayAvg = null;

      if (history.length >= 5) {

        const last5 = history.slice(-5);

        const sum = last5.reduce((acc, item) => acc + item.pscore, 0);

        fiveDayAvg = Math.round(sum / 5);

      }

      

      // Store updated history (expire in 31 days)

      await KV.put(historyKey, JSON.stringify(history), {

        expirationTtl: 60 * 60 * 24 * 31

      });

      

      return { ...result, fiveDayAvg };

    }));

    

    // Cache for today

    const dataToCache = {

      timestamp: Date.now(),

      results: resultsWithAvg

    };

    await KV.put(cacheKey, JSON.stringify(dataToCache), {

      expirationTtl: 60 * 60 * 24  // 1 day

    });

    

    return new Response(JSON.stringify(dataToCache), {

      status: 200,

      headers: corsHeaders

    });

    

  } catch (error) {

    console.error('Top50 error:', error);

    return new Response(JSON.stringify({

      error: true,

      message: error.message

    }), {

      status: 500,

      headers: corsHeaders

    });

  }

}







// workers/enterprise-daily-scanner.js

// Scans 1000 random enterprise websites and finds the best performer



export default {

  async scheduled(event, env, ctx) {

    console.log('Starting daily enterprise scan of 1000 random sites...');

    

    // Fortune 1000 + Global 500 + Tech companies + Popular brands

    const ENTERPRISE_DOMAINS = [

      // Top Tech Companies

      'microsoft.com', 'apple.com', 'alphabet.com', 'amazon.com', 'meta.com',

      'tesla.com', 'nvidia.com', 'intel.com', 'amd.com', 'qualcomm.com',

      'salesforce.com', 'oracle.com', 'sap.com', 'adobe.com', 'ibm.com',

      'dell.com', 'hp.com', 'cisco.com', 'vmware.com', 'red hat.com',

      

      // Financial Services

      'jpmorganchase.com', 'bankofamerica.com', 'wellsfargo.com', 'citigroup.com',

      'goldmansachs.com', 'morganstanley.com', 'ubs.com', 'deutschebank.com',

      'hsbc.com', 'barclays.com', 'visa.com', 'mastercard.com', 'amex.com',

      'paypal.com', 'stripe.com', 'square.com', 'blackrock.com', 'vanguard.com',

      

      // Retail & E-commerce

      'walmart.com', 'target.com', 'costco.com', 'kroger.com', 'homedepot.com',

      'lowes.com', 'bestbuy.com', 'macys.com', 'nordstrom.com', 'gap.com',

      'nike.com', 'adidas.com', 'puma.com', 'underarmour.com', 'lululemon.com',

      'zara.com', 'hm.com', 'uniqlo.com', 'ikea.com', 'wayfair.com',

      

      // Automotive

      'ford.com', 'gm.com', 'toyota.com', 'honda.com', 'nissan.com',

      'bmw.com', 'mercedes-benz.com', 'volkswagen.com', 'audi.com', 'porsche.com',

      'ferrari.com', 'lamborghini.com', 'tesla.com', 'rivian.com', 'lucidmotors.com',

      

      // Food & Beverage

      'coca-cola.com', 'pepsico.com', 'nestle.com', 'unilever.com', 'kraftheinz.com',

      'mcdonalds.com', 'starbucks.com', 'yum.com', 'chipotle.com', 'dominos.com',

      'subway.com', 'wendys.com', 'burgerking.com', 'tacobell.com', 'kfc.com',

      

      // Healthcare & Pharma

      'pfizer.com', 'jnj.com', 'abbvie.com', 'merck.com', 'bayer.com',

      'novartis.com', 'roche.com', 'sanofi.com', 'gsk.com', 'astrazeneca.com',

      'unitedhealth.com', 'cvs.com', 'walgreens.com', 'cigna.com', 'anthem.com',

      

      // Energy

      'exxonmobil.com', 'chevron.com', 'shell.com', 'bp.com', 'totalenergies.com',

      'conocophillips.com', 'equinor.com', 'eni.com', 'nexteraenergy.com',

      

      // Aerospace & Defense

      'boeing.com', 'lockheedmartin.com', 'raytheon.com', 'northropgrumman.com',

      'generaldynamics.com', 'airbus.com', 'spacex.com', 'blueorigin.com',

      

      // Telecommunications

      'verizon.com', 'att.com', 't-mobile.com', 'comcast.com', 'charter.com',

      'vodafone.com', 'orange.com', 'deutschetelekom.com', 'telefonica.com',

      

      // Entertainment & Media

      'disney.com', 'comcast.com', 'netflix.com', 'warnermedia.com', 'viacomcbs.com',

      'sony.com', 'nbcuniversal.com', 'fox.com', 'hulu.com', 'spotify.com',

      'youtube.com', 'twitch.tv', 'roblox.com', 'ea.com', 'activision.com',

      

      // Travel & Hospitality

      'marriott.com', 'hilton.com', 'hyatt.com', 'ihg.com', 'airbnb.com',

      'booking.com', 'expedia.com', 'tripadvisor.com', 'delta.com', 'united.com',

      'american airlines.com', 'southwest.com', 'lufthansa.com', 'emirates.com',

      

      // Manufacturing & Industrial

      'ge.com', 'siemens.com', '3m.com', 'caterpillar.com', 'deere.com',

      'honeywell.com', 'emerson.com', 'schneider-electric.com', 'abb.com',

      

      // Consumer Goods

      'pg.com', 'colgate.com', 'loreal.com', 'estee lauder.com', 'lvmh.com',

      'hermes.com', 'gucci.com', 'prada.com', 'burberry.com', 'chanel.com',

      

      // Professional Services

      'deloitte.com', 'pwc.com', 'ey.com', 'kpmg.com', 'accenture.com',

      'mckinsey.com', 'bcg.com', 'bain.com', 'boozallen.com',

      

      // Education & Research

      'harvard.edu', 'stanford.edu', 'mit.edu', 'oxford.ac.uk', 'cambridge.ac.uk',

      'yale.edu', 'princeton.edu', 'columbia.edu', 'upenn.edu', 'cornell.edu',

      

      // Add 900 more by repeating with variations and subdomains

      // ... (truncated for brevity - in production, you'd have the full 1000)

    ];

    

    // Function to generate 1000 unique URLs

    function generateUrls() {

      const urls = [];

      const variations = ['', 'www.', 'www2.', 'shop.', 'store.', 'blog.', 'careers.', 'investors.'];

      const protocols = ['https://'];

      

      ENTERPRISE_DOMAINS.forEach(domain => {

        variations.forEach(subdomain => {

          protocols.forEach(protocol => {

            urls.push(`${protocol}${subdomain}${domain}`);

            if (urls.length >= 1000) return;

          });

          if (urls.length >= 1000) return;

        });

        if (urls.length >= 1000) return;

      });

      

      // Shuffle for randomness

      return urls.sort(() => Math.random() - 0.5).slice(0, 1000);

    }

    

    const KV = env.PYTHIA_TOP50_KV;

    const today = new Date().toISOString().split('T')[0];

    

    try {

      const urlsToScan = generateUrls();

      console.log(`Generated ${urlsToScan.length} URLs to scan`);

      

      let bestResult = null;

      let scannedCount = 0;

      

      // Scan in batches of 10 to avoid overwhelming the API

      for (let i = 0; i < urlsToScan.length; i += 10) {

        const batch = urlsToScan.slice(i, i + 10);

        

        const batchPromises = batch.map(async (url) => {

          try {

            const response = await fetch('https://pythia.pages.dev/api/scan', {

              method: 'POST',

              headers: { 'Content-Type': 'application/json' },

              body: JSON.stringify({ url })

            });

            

            if (response.ok) {

              const data = await response.json();

              if (data && data.pscore !== undefined) {

                scannedCount++;

                

                // Keep track of the best one

                if (!bestResult || data.pscore > bestResult.pscore) {

                  bestResult = {

                    url: data.url,

                    pscore: data.pscore,

                    pageSize: data.pageSize,

                    loadTime: data.loadTime,

                    karpov: data.karpov,

                    vortex: data.vortex,

                    pulse: data.pulse,

                    helix: data.helix,

                    timestamp: Date.now()

                  };

                  console.log(`New best: ${data.url} with P-Score ${data.pscore}`);

                }

                

                return data;

              }

            }

          } catch (error) {

            console.error(`Failed to scan ${url}:`, error.message);

          }

          return null;

        });

        

        await Promise.all(batchPromises);

        

        // Progress log every 100 sites

        if ((i + 10) % 100 === 0) {

          console.log(`Progress: ${i + 10}/1000 sites scanned, best so far: ${bestResult?.pscore || 'none'}`);

        }

        

        // Wait 1 second between batches to respect rate limits

        await new Promise(resolve => setTimeout(resolve, 1000));

      }

      

      if (bestResult) {

        const cacheKey = `enterprise_daily_${today}`;

        const dataToCache = {

          winner: bestResult,

          totalScanned: scannedCount,

          scanDate: today,

          scanTimestamp: Date.now()

        };

        

        await KV.put(cacheKey, JSON.stringify(dataToCache), {

          expirationTtl: 60 * 60 * 24 // 24 hours

        });

        

        console.log(`‚úÖ Successfully scanned ${scannedCount} enterprise sites for ${today}`);

        console.log(`üèÜ Winner: ${bestResult.url} with P-Score ${bestResult.pscore}`);

      } else {

        console.log('‚ùå No successful scans completed');

      }

      

    } catch (error) {

      console.error('Enterprise daily scan failed:', error);

    }

  },



  async fetch(request, env, ctx) {

    return new Response('Enterprise daily scanner - use scheduled trigger', { status: 200 });

  }

};











name = "pythia-enterprise-daily"

main = "enterprise-daily-scanner.js"

compatibility_date = "2025-11-04"



[[kv_namespaces]]

binding = "PYTHIA_TOP50_KV"

id = "6561d92e53c2470296e0ec367a44fa51"





// workers/top50-scheduler.js

// Cloudflare Worker that runs on a cron schedule to trigger Top 50 scanning



export default {

  async scheduled(event, env, ctx) {

    console.log('Starting daily Top 50 scan...');

    

    const TOP_50_URLS = [

      'https://www.google.com', 'https://www.youtube.com', 'https://www.facebook.com',

      'https://twitter.com', 'https://www.instagram.com', 'https://www.linkedin.com',

      'https://www.reddit.com', 'https://www.wikipedia.org', 'https://www.amazon.com',

      'https://www.netflix.com', 'https://www.yahoo.com', 'https://www.ebay.com',

      'https://www.microsoft.com', 'https://www.apple.com', 'https://www.pinterest.com',

      'https://github.com', 'https://www.stackoverflow.com', 'https://www.twitch.tv',

      'https://wordpress.com', 'https://www.paypal.com', 'https://www.bbc.com',

      'https://www.cnn.com', 'https://www.nytimes.com', 'https://www.espn.com',

      'https://www.imdb.com', 'https://www.quora.com', 'https://medium.com',

      'https://www.tumblr.com', 'https://www.shopify.com', 'https://www.etsy.com',

      'https://www.target.com', 'https://www.walmart.com', 'https://www.bestbuy.com',

      'https://www.homedepot.com', 'https://www.ikea.com', 'https://www.spotify.com',

      'https://soundcloud.com', 'https://vimeo.com', 'https://www.dropbox.com',

      'https://zoom.us', 'https://www.salesforce.com', 'https://www.adobe.com',

      'https://www.oracle.com', 'https://www.ibm.com', 'https://www.cloudflare.com',

      'https://www.airbnb.com', 'https://www.booking.com', 'https://www.tripadvisor.com',

      'https://www.uber.com', 'https://www.tiktok.com'

    ];

    

    const KV = env.PYTHIA_TOP50_KV;

    const today = new Date().toISOString().split('T')[0];

    

    try {

      const results = [];

      

      // Scan in batches of 5 to avoid rate limits

      for (let i = 0; i < TOP_50_URLS.length; i += 5) {

        const batch = TOP_50_URLS.slice(i, i + 5);

        

        const batchPromises = batch.map(async (url) => {

          try {

            const response = await fetch('https://pythia.pages.dev/api/scan', {

              method: 'POST',

              headers: { 'Content-Type': 'application/json' },

              body: JSON.stringify({ url })

            });

            

            if (response.ok) {

              const data = await response.json();

              if (data && data.pscore !== undefined) {

                return { url, pscore: data.pscore, timestamp: Date.now() };

              }

            }

          } catch (error) {

            console.error(`Failed to scan ${url}:`, error.message);

          }

          return null;

        });

        

        const batchResults = await Promise.all(batchPromises);

        results.push(...batchResults.filter(r => r !== null));

        

        // Wait 2 seconds between batches

        await new Promise(resolve => setTimeout(resolve, 2000));

      }

      

      // Calculate 5-day running averages

      const resultsWithAvg = await Promise.all(results.map(async (result) => {

        const historyKey = `history_${result.url}`;

        let history = await KV.get(historyKey, 'json') || [];

        

        history.push({ date: today, pscore: result.pscore });

        

        if (history.length > 30) {

          history = history.slice(-30);

        }

        

        let fiveDayAvg = null;

        if (history.length >= 5) {

          const last5 = history.slice(-5);

          const sum = last5.reduce((acc, item) => acc + item.pscore, 0);

          fiveDayAvg = Math.round(sum / 5);

        }

        

        await KV.put(historyKey, JSON.stringify(history), {

          expirationTtl: 60 * 60 * 24 * 31

        });

        

        return { ...result, fiveDayAvg };

      }));

      

      const cacheKey = `top50_${today}`;

      const dataToCache = {

        timestamp: Date.now(),

        results: resultsWithAvg

      };

      

      await KV.put(cacheKey, JSON.stringify(dataToCache), {

        expirationTtl: 60 * 60 * 24

      });

      

      console.log(`Successfully scanned ${results.length} sites for ${today}`);

      

    } catch (error) {

      console.error('Scheduled scan failed:', error);

    }

  },



  async fetch(request, env, ctx) {

    // Allow manual triggering via HTTP request

    return new Response('Top 50 scanner - use scheduled trigger', { status: 200 });

  }

};













name = "pythia-top50-cron"

main = "top50-scheduler.js"

compatibility_date = "2025-11-04"



[[kv_namespaces]]

binding = "PYTHIA_TOP50_KV"

id = "6561d92e53c2470296e0ec367a44fa51"







name = "pythia-visit-counter"

main = "visit-counter.js"

compatibility_date = "2025-11-05"



[[kv_namespaces]]

binding = "PYTHIA_TOP50_KV"

id = "6561d92e53c2470296e0ec367a44fa51"



[[routes]]

pattern = "p-score.me/api/visits"

custom_domain = true









// workers/visit-counter.js

// Simple visit counter that increments on each page view



export default {

  async fetch(request, env, ctx) {

    const corsHeaders = {

      'Access-Control-Allow-Origin': '*',

      'Access-Control-Allow-Methods': 'GET, OPTIONS',

      'Access-Control-Allow-Headers': 'Content-Type',

      'Content-Type': 'application/json'

    };



    if (request.method === 'OPTIONS') {

      return new Response(null, { status: 200, headers: corsHeaders });

    }



    if (request.method !== 'GET') {

      return new Response(JSON.stringify({ error: 'Only GET allowed' }), {

        status: 405,

        headers: corsHeaders

      });

    }



    try {

      const KV = env.PYTHIA_TOP50_KV;

      const counterKey = 'site_visit_count';

      

      // Get current count

      let count = parseInt(await KV.get(counterKey) || '0');

      

      // Increment

      count++;

      

      // Store new count (never expires)

      await KV.put(counterKey, count.toString());

      

      return new Response(JSON.stringify({

        visits: count

      }), {

        status: 200,

        headers: corsHeaders

      });

      

    } catch (error) {

      console.error('Visit counter error:', error);

      return new Response(JSON.stringify({

        error: true,

        message: error.message

      }), { status: 500, headers: corsHeaders });

    }

  }

};







name = "pythia-visit-counter"

main = "visit-counter.js"

compatibility_date = "2025-11-04"



[[kv_namespaces]]

binding = "PYTHIA_TOP50_KV"

id = "6561d92e53c2470296e0ec367a44fa51"







<!DOCTYPE html>

<html>

<head><title>Privacy ‚Äì p-score.me</title></head>

<body style="font-family:Arial; padding:20px;">

<h1>Privacy Policy</h1>

<p><strong>Last updated: 5 November 2025</strong></p>

<p>We **do not collect** any personal data.</p>

<p>We scan **public HTML only** ‚Äî no cookies, no emails, no logins.</p>

<p>Scans are deleted after 24 hours.</p>

<p>Want to opt out? Add to your <code>robots.txt</code>:</p>

<pre>User-agent: PythiaBot

Disallow: /</pre>

</body>

</html>







Skip to content

Navigation Menu

CJTF32Pythia

Type¬†/¬†to search

Code

Issues

Pull requests

Actions

Projects

Security

Insights

Settings

Pythia

/

pythia-oracle.png

t

CJTF32

Add files via upload

14200e2¬†¬∑¬†2 days ago
