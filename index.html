<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Optimization -->
  <title>Pythia‚Ñ¢ - Website Performance Analysis Tool | One Score to Rank Them All</title>
  <meta name="description" content="Pythia‚Ñ¢ is the ultimate website performance oracle analyzing speed, accessibility, SEO, privacy, and sustainability. Get one unified P-Score for any website in seconds.">
  <meta name="keywords" content="website performance, one score, site speed test, SEO analyzer, accessibility checker, website security, performance testing, web optimization, P-Score">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://p-score.me/">
  <meta property="og:title" content="Pythia‚Ñ¢ - Website Performance Oracle | Scanned by Pythia üîÆ">
  <meta property="og:description" content="Complete website performance analysis in one unified P-Score. Measure speed, accessibility, SEO, privacy, sustainability and more.">
  <meta property="og:image" content="https://p-score.me/pythia-oracle.png">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://p-score.me/">
  <meta property="twitter:title" content="Pythia‚Ñ¢ - Website Performance Analysis Tool">
  <meta property="twitter:description" content="One score to rank them all. Complete website performance oracle. Scanned by Pythia‚Ñ¢ üîÆ">
  <meta property="twitter:image" content="https://p-score.me/pythia-oracle.png">
  
  <!-- Canonical -->
  <link rel="canonical" href="https://p-score.me/">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Loading Spinner Animation */
    @keyframes retro-spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .retro-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #003300;
      border-top: 4px solid #00ff00;
      border-radius: 50%;
      animation: retro-spin 1s linear infinite;
      margin: 20px auto;
    }
    
    body.retro .retro-spinner {
      border: 4px solid #003300;
      border-top: 4px solid #00ff00;
      box-shadow: 0 0 20px #00ff00;
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
      50% { box-shadow: 0 0 40px rgba(99, 102, 241, 0.6); }
    }
    .scanning { animation: pulse-glow 2s infinite; }
    
    /* CRT Effects */
    @keyframes flicker {
      0% { opacity: 0.98; }
      5% { opacity: 1; }
      10% { opacity: 0.98; }
      15% { opacity: 1; }
      20% { opacity: 0.97; }
      25% { opacity: 1; }
      100% { opacity: 1; }
    }
    
    @keyframes scanline {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100vh); }
    }
    
    body.retro::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 255, 0, 0.03) 0px,
        rgba(0, 255, 0, 0.03) 1px,
        transparent 1px,
        transparent 2px
      );
      pointer-events: none;
      z-index: 9999;
      animation: flicker 0.15s infinite;
    }
    
    body.retro::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: linear-gradient(
        to bottom,
        rgba(0, 255, 0, 0) 0%,
        rgba(0, 255, 0, 0.3) 50%,
        rgba(0, 255, 0, 0) 100%
      );
      pointer-events: none;
      z-index: 9998;
      animation: scanline 6s linear infinite;
    }
    
    /* Curved Distortion Effect */
    body.retro .modern-card {
      filter: url(#crt-curve);
    }
    
    /* Typing Animation */
    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }
    
    @keyframes blink {
      50% { border-color: transparent; }
    }
    
    .typing-effect {
      overflow: hidden;
      border-right: 3px solid #00ff00;
      white-space: nowrap;
      animation: typing 2s steps(40, end), blink 0.75s step-end infinite;
      display: inline-block;
    }
    
    /* Boot Sequence */
    @keyframes boot-fade {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    
    .boot-sequence {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      color: #00ff00;
      font-family: 'Courier New', monospace;
      padding: 40px;
      z-index: 10000;
      overflow-y: auto;
      animation: boot-fade 0.5s ease-in;
    }
    
    .boot-line {
      opacity: 0;
      animation: boot-fade 0.3s ease-in forwards;
    }
    
    /* Collapsed State */
    .detail-content {
      max-height: 3000px;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }
    
    .detail-content.collapsed {
      max-height: 0;
    }
    
    .menu-overlay {
      position: fixed; top: 0; left: -100%; width: 80%; max-width: 400px; height: 100vh;
      background: white; box-shadow: 2px 0 10px rgba(0,0,0,0.3); transition: left 0.3s ease;
      z-index: 1000; overflow-y: auto;
    }
    .menu-overlay.open { left: 0; }
    .menu-backdrop {
      position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: rgba(0,0,0,0.5);
      opacity: 0; visibility: hidden; transition: all 0.3s ease; z-index: 999;
    }
    .menu-backdrop.open { opacity: 1; visibility: visible; }
    .page-content { display: none; }
    .page-content.active { display: block; }
    
    /* Site Visit Counter */
    .visit-counter {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.8);
      color: #00ff00;
      padding: 10px 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      z-index: 1000;
      border: 2px solid #00ff00;
      box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
    }
    
    /* Retro Mode Styles */
    body.retro {
      background: #000000 !important;
      font-family: 'Courier New', monospace !important;
      image-rendering: pixelated;
      color: #00ff00 !important;
      background-image: 
        repeating-linear-gradient(0deg, transparent, transparent 2px, #001100 2px, #001100 4px),
        repeating-linear-gradient(90deg, transparent, transparent 2px, #001100 2px, #001100 4px);
      background-size: 40px 40px;
    }
    body.retro * {
      font-family: 'Courier New', monospace !important;
      image-rendering: pixelated;
    }
    body.retro .modern-card {
      background: #0a0a0a !important;
      border: 4px solid #00ff00 !important;
      border-radius: 0 !important;
      box-shadow: 0 0 20px #00ff00 !important;
    }
    body.retro .retro-button {
      background: #003300 !important;
      border: 3px solid #00ff00 !important;
      border-radius: 0 !important;
      color: #00ff00 !important;
      font-weight: bold !important;
      padding: 8px 16px !important;
      text-shadow: 0 0 5px #00ff00;
    }
    body.retro .retro-button:hover {
      background: #005500 !important;
      box-shadow: 0 0 15px #00ff00;
    }
    body.retro #themeToggle,
    body.retro .page-content button,
    body.retro .menu-overlay button {
      background: #001a00 !important;
      color: #33ff33 !important;
      border: 2px solid #33ff33 !important;
      text-shadow: 0 0 3px #33ff33 !important;
    }
    body.retro #themeToggle:hover,
    body.retro .page-content button:hover {
      background: #003300 !important;
      color: #66ff66 !important;
    }
    body.retro .text-gray-500,
    body.retro .text-gray-600,
    body.retro .text-gray-700,
    body.retro .text-gray-800,
    body.retro p:not(.font-bold):not(h1):not(h2):not(h3) {
      color: #33ff33 !important;
      text-shadow: 0 0 2px #33ff33 !important;
    }
    body.retro .score-card {
      border: 3px solid #00ff00 !important;
      border-radius: 0 !important;
      box-shadow: 0 0 10px currentColor !important;
      background: #001a00 !important;
    }
    body.retro h1, body.retro h2, body.retro h3 {
      color: #00ff00 !important;
      text-shadow: 2px 2px 0 #003300, 0 0 10px #00ff00 !important;
    }
    body.retro p, body.retro div, body.retro span, body.retro label {
      color: #00ff00 !important;
    }
    body.retro .bg-gray-50, body.retro .bg-green-50, body.retro .bg-red-50 {
      background: #001a00 !important;
      border: 1px solid #003300 !important;
    }
    body.retro .bg-white { background: #000000 !important; }
    body.retro input {
      background: #000000 !important;
      border: 2px solid #00ff00 !important;
      color: #00ff00 !important;
    }
    body.retro input::placeholder { color: #006600 !important; }
    body.retro .menu-overlay {
      background: #000000 !important;
      border-right: 4px solid #00ff00 !important;
    }
    
    body.retro #pythiaLogo {
      width: 160px !important;
      height: 160px !important;
    }
    
    #mainTagline {
      font-size: 2rem !important;
    }
    body.retro #mainTagline {
      font-size: 2.5rem !important;
    }
    
    body.retro {
      background: 
        repeating-linear-gradient(0deg, #000000 0px, #003300 2px, #000000 4px),
        repeating-linear-gradient(90deg, #000000 0px, #001a00 2px, #000000 4px) !important;
    }
    
    body.retro .rivalry-item:nth-child(odd) {
      background: #003300 !important;
      border: 2px solid #00ff00 !important;
    }
    body.retro .rivalry-item:nth-child(even) {
      background: #001a00 !important;
      border: 2px solid #006600 !important;
    }
    
    /* Summon Mode (Secret Color Palette) */
    body.summon-mode {
      background: #1a0033 !important;
      background-image: 
        repeating-linear-gradient(0deg, transparent, transparent 2px, #330066 2px, #330066 4px),
        repeating-linear-gradient(90deg, transparent, transparent 2px, #2a0044 2px, #2a0044 4px) !important;
    }
    
    body.summon-mode .modern-card {
      border-color: #ff00ff !important;
      box-shadow: 0 0 30px #ff00ff !important;
    }
    
    body.summon-mode h1, body.summon-mode h2, body.summon-mode h3 {
      color: #ff00ff !important;
      text-shadow: 2px 2px 0 #660066, 0 0 15px #ff00ff !important;
    }
    
    body.summon-mode p, body.summon-mode div, body.summon-mode span {
      color: #ff66ff !important;
    }
    
    /* Badge Styles */
    .badge-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 16px;
      padding: 30px;
      color: white;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    body.retro .badge-card {
      background: #001a00 !important;
      border: 4px solid #00ff00 !important;
      border-radius: 0 !important;
      box-shadow: 0 0 20px #00ff00 !important;
    }
    
    .badge-pscore {
      font-size: 72px;
      font-weight: bold;
      text-shadow: 0 0 20px rgba(255,255,255,0.5);
    }
    
    body.retro .badge-pscore {
      color: #00ff00 !important;
      text-shadow: 0 0 30px #00ff00 !important;
    }
    
    /* Sound Toggle */
    .sound-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.8);
      border: 2px solid #00ff00;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 1001;
      transition: all 0.3s ease;
    }
    
    .sound-toggle:hover {
      box-shadow: 0 0 15px #00ff00;
      transform: scale(1.1);
    }
  </style>
  
  <!-- SVG Filter for CRT Curve Effect -->
  <svg style="display: none;">
    <defs>
      <filter id="crt-curve">
        <feGaussianBlur in="SourceGraphic" stdDeviation="0" result="blur" />
        <feTurbulence type="turbulence" baseFrequency="0.001" numOctaves="1" result="turbulence" />
        <feDisplacementMap in="blur" in2="turbulence" scale="2" xChannelSelector="R" yChannelSelector="G" />
      </filter>
    </defs>
  </svg>
</head>
<body class="bg-gray-100 text-gray-900 min-h-screen">
  
  <!-- Boot Sequence (shown on first retro load) -->
  <div id="bootSequence" class="boot-sequence hidden">
    <div class="boot-line">PYTHIA‚Ñ¢ SYSTEM v2.0</div>
    <div class="boot-line">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>
    <div class="boot-line">Initializing Oracle Matrix...</div>
    <div class="boot-line">Loading Performance Analyzers...</div>
    <div class="boot-line">Calibrating P-Score Metrics...</div>
    <div class="boot-line">‚Ä¢ KARPOV Speed Engine [OK]</div>
    <div class="boot-line">‚Ä¢ VORTEX Accessibility Core [OK]</div>
    <div class="boot-line">‚Ä¢ PULSE SEO Module [OK]</div>
    <div class="boot-line">‚Ä¢ HELIX Privacy Shield [OK]</div>
    <div class="boot-line">‚Ä¢ NEXUS Mobile Adapter [OK]</div>
    <div class="boot-line">‚Ä¢ ECHO Sustainability Scanner [OK]</div>
    <div class="boot-line">‚Ä¢ NOVA Infrastructure Probe [OK]</div>
    <div class="boot-line">‚Ä¢ QUANTUM Code Analyzer [OK]</div>
    <div class="boot-line">‚Ä¢ AETHER Tech Detector [OK]</div>
    <div class="boot-line">‚Ä¢ EDEN Efficiency Monitor [OK]</div>
    <div class="boot-line">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>
    <div class="boot-line">System Ready. Press any key...</div>
  </div>
  
  <!-- Sound Toggle -->
  <div class="sound-toggle hidden" id="soundToggle" title="Toggle Sound Effects">
    <span id="soundIcon">üîä</span>
  </div>
  
  <!-- Site Visit Counter -->
  <div class="visit-counter" id="visitCounter">
    Visitors: <span id="visitCount">Loading...</span>
  </div>
  
  <!-- Mobile Menu Button -->
  <button id="menuBtn" class="fixed top-5 left-5 z-50 bg-indigo-600 text-white p-3 rounded-lg shadow-lg hover:bg-indigo-700 transition">‚ò∞</button>
  
  <!-- Theme Toggle -->
  <button id="themeToggle" class="fixed top-5 right-80 z-50 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-gray-700 transition text-sm">
    <span id="themeIcon">üñ•Ô∏è</span> <span id="themeText">RETRO</span>
  </button>
  
  <!-- Menu Backdrop -->
  <div class="menu-backdrop" id="menuBackdrop"></div>
  
  <!-- Slide-out Menu -->
  <nav class="menu-overlay" id="menuOverlay">
    <div class="p-6">
      <button id="closeMenu" class="absolute top-4 right-4 text-2xl text-gray-600 hover:text-gray-900">√ó</button>
      <h2 class="text-2xl font-bold mb-6 text-indigo-600">Pythia‚Ñ¢ Menu</h2>
      <ul class="space-y-3">
        <li><button onclick="showPage('scan')" class="w-full text-left p-3 bg-indigo-100 hover:bg-indigo-200 rounded-lg transition font-bold">üîç Scan Website</button></li>
        <li><button onclick="showPage('rivalry')" class="w-full text-left p-3 bg-purple-100 hover:bg-purple-200 rounded-lg transition font-bold">‚öîÔ∏è Rivalry Battle</button></li>
        <li><button onclick="showPage('top50')" class="w-full text-left p-3 bg-green-100 hover:bg-green-200 rounded-lg transition font-bold">üèÜ Top 50 Rankings</button></li>
        <li><button onclick="showPage('enterprise')" class="w-full text-left p-3 bg-yellow-100 hover:bg-yellow-200 rounded-lg transition font-bold">üè¢ Enterprise Daily</button></li>
        <li><button onclick="showPage('about')" class="w-full text-left p-3 bg-gray-100 hover:bg-gray-200 rounded-lg transition font-bold">‚ÑπÔ∏è About</button></li>
        <li><button onclick="showPage('legal')" class="w-full text-left p-3 bg-blue-100 hover:bg-blue-200 rounded-lg transition font-bold">‚öñÔ∏è Legal & Privacy</button></li>
      </ul>
    </div>
  </nav>
  
  <div class="max-w-4xl mx-auto p-6 relative z-10">
    
    <!-- SCAN PAGE -->
    <div id="scanPage" class="page-content active">
      <div class="text-center mb-8">
        <img src="/pythia-oracle.png" alt="Pythia Oracle" class="mx-auto mb-4" style="width: 140px; height: 140px;" id="pythiaLogo">
        <h1 class="text-4xl font-bold text-indigo-600 mb-2" id="mainTagline">Pythia‚Ñ¢</h1>
        <p class="text-gray-600 text-lg mb-4">One Score to Rank Them All</p>
        
        <!-- Pythia Description -->
        <div class="modern-card bg-white rounded-lg shadow-lg p-6 mb-6">
          <p class="text-sm text-gray-700 italic leading-relaxed">
            At Delphi in ancient Greece, the Pythia spoke cryptic truths from the gods. 
            Now seek her oracle wisely ‚Äî your site awaits her verdict!
          </p>
        </div>
        
        <div class="flex gap-2 justify-center mb-4">
          <button onclick="shareOn('twitter')" class="retro-button px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition text-xs">Twitter</button>
          <button onclick="shareOn('facebook')" class="retro-button px-3 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition text-xs">Facebook</button>
          <button onclick="shareOn('whatsapp')" class="retro-button px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition text-xs">WhatsApp</button>
          <button onclick="shareOn('email')" class="retro-button px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition text-xs">Email</button>
        </div>
      </div>
      
      <div class="modern-card bg-white rounded-lg shadow-lg p-6 mb-6">
        <label for="urlInput" class="block text-sm font-bold mb-2">Enter Website URL:</label>
        <input type="text" id="urlInput" placeholder="example.com or https://example.com" 
          class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-4" />
        <div class="flex gap-2">
          <button id="analyzeBtn" onclick="analyzeWebsite()" class="retro-button flex-1 bg-indigo-600 text-white py-3 rounded-lg font-bold hover:bg-indigo-700 transition">
            Analyze
          </button>
          <button id="demoBtn" onclick="tryDemoUrl()" class="retro-button bg-purple-600 text-white py-3 px-4 rounded-lg font-bold hover:bg-purple-700 transition">
            Try Demo
          </button>
          <button id="consultBtn" onclick="consultPythia()" class="retro-button bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 px-4 rounded-lg font-bold hover:from-pink-600 hover:to-purple-700 transition">
            üîÆ Consult
          </button>
        </div>
      </div>
      
      <!-- Loading Spinner -->
      <div id="loadingSpinner" class="hidden text-center my-8">
        <div class="retro-spinner"></div>
        <p class="text-gray-600 mt-4 font-bold">Consulting the Oracle...</p>
      </div>
      
      <!-- Pythia Consultation Results -->
      <div id="consultationResults" class="modern-card bg-gradient-to-br from-purple-900 to-indigo-900 rounded-lg shadow-lg p-6 mb-6 hidden">
        <h3 class="text-2xl font-bold text-center mb-4" style="color: #00ff00;">üîÆ The Oracle Speaks üîÆ</h3>
        <div id="consultationText" class="text-lg text-center italic" style="color: #66ff66; text-shadow: 0 0 10px #00ff00;"></div>
      </div>
      
      <!-- Results -->
      <div id="scanResults" class="hidden"></div>
      
      <!-- Badge Generator -->
      <div id="badgeSection" class="modern-card bg-white rounded-lg shadow-lg p-6 mt-6 hidden">
        <h3 class="text-xl font-bold mb-4">üèÖ Generate Badge</h3>
        <div class="mb-4">
          <label class="block text-sm font-bold mb-2">Compare with:</label>
          <select id="badgeCompare" class="w-full p-2 border border-gray-300 rounded-lg">
            <option value="">Select a site...</option>
          </select>
        </div>
        <button onclick="generateBadge()" class="retro-button w-full bg-purple-600 text-white py-2 rounded-lg font-bold hover:bg-purple-700 transition">
          Generate Badge
        </button>
        
        <div id="badgePreview" class="mt-6 hidden">
          <div id="badgeCard" class="badge-card">
            <div class="text-sm opacity-80 mb-2">Scanned by Pythia‚Ñ¢ üîÆ</div>
            <div class="badge-pscore" id="badgePscore">--</div>
            <div class="text-xl font-bold mb-2">P-Score</div>
            <div id="badgeComparison" class="text-lg mb-4">--</div>
            <div class="text-xs opacity-75" id="badgeUrl">--</div>
            <div class="text-xs mt-4">
              <div>‚ïê‚ïê‚ïê ‚ö° PYTHIA‚Ñ¢ ORACLE ‚ö° ‚ïê‚ïê‚ïê</div>
              <div class="mt-2">p-score.me</div>
            </div>
          </div>
          <div class="mt-4 flex gap-2">
            <button onclick="downloadBadge()" class="retro-button flex-1 bg-green-600 text-white py-2 rounded-lg font-bold hover:bg-green-700 transition">
              üì• Download PNG
            </button>
            <button onclick="shareBadge()" class="retro-button flex-1 bg-blue-600 text-white py-2 rounded-lg font-bold hover:bg-blue-700 transition">
              üîó Share
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- RIVALRY BATTLE PAGE -->
    <div id="rivalryPage" class="page-content">
      <div class="text-center mb-6">
        <h1 class="text-4xl font-bold text-purple-600 mb-2">‚öîÔ∏è Rivalry Battle</h1>
        <p class="text-gray-600">Watch websites compete for supremacy</p>
      </div>
      
      <div class="modern-card bg-white rounded-lg shadow-lg p-6 mb-6">
        <h3 class="text-lg font-bold mb-4">Epic Rivalries</h3>
        <div id="rivalriesList" class="space-y-2"></div>
      </div>
      
      <div class="modern-card bg-white rounded-lg shadow-lg p-6 mb-6">
        <h3 class="text-lg font-bold mb-4">Custom Battle</h3>
        <input type="text" id="customUrl1" placeholder="First website URL" class="w-full p-3 border border-gray-300 rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-purple-500" />
        <input type="text" id="customUrl2" placeholder="Second website URL" class="w-full p-3 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-purple-500" />
        <button id="customBattleBtn" class="retro-button w-full bg-purple-600 text-white py-3 rounded-lg font-bold hover:bg-purple-700 transition">‚öîÔ∏è Start Battle</button>
      </div>
      
      <div id="battleResults" class="hidden">
        <div id="winnerIcon" class="text-center mb-4 hidden"><img src="" alt="Winner" class="w-16 h-16 mx-auto" /></div>
        <div id="winnerAnnouncement" class="modern-card bg-gradient-to-r from-yellow-400 to-orange-500 rounded-lg shadow-lg p-6 mb-6 text-center text-white text-3xl font-bold"></div>
        <div class="grid md:grid-cols-2 gap-4 mb-4">
          <div id="contestant1Results" class="modern-card bg-white rounded-lg shadow-lg p-6"></div>
          <div id="contestant2Results" class="modern-card bg-white rounded-lg shadow-lg p-6"></div>
        </div>
        <button id="shareRivalryBtn" onclick="shareBattleResult()" class="retro-button w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition mb-4">üîó Share Result</button>
      </div>
    </div>
    
    <!-- TOP 50 RANKINGS PAGE -->
    <div id="top50Page" class="page-content">
      <div class="text-center mb-6">
        <h1 class="text-4xl font-bold text-green-600 mb-2">üèÜ Top 50 Rankings</h1>
        <p class="text-gray-600">Daily performance leaderboard</p>
      </div>
      
      <div id="top50Loading" class="text-center py-12">
        <div class="retro-spinner"></div>
        <p class="text-gray-600 mt-4">Loading rankings...</p>
      </div>
      
      <div id="top50Results" class="hidden">
        <div class="modern-card bg-white rounded-lg shadow-lg p-6 mb-6">
          <h3 class="text-xl font-bold mb-4 text-green-600">ü•á Top 5 Performers</h3>
          <div id="top50TopList" class="space-y-2"></div>
        </div>
        
        <div class="modern-card bg-white rounded-lg shadow-lg p-6">
          <h3 class="text-xl font-bold mb-4 text-red-600">üìâ Bottom 5 of Top 50</h3>
          <div id="top50BottomList" class="space-y-2"></div>
        </div>
      </div>
    </div>
    
    <!-- ENTERPRISE DAILY PAGE -->
    <div id="enterprisePage" class="page-content">
      <div class="text-center mb-6">
        <h1 class="text-4xl font-bold text-yellow-600 mb-2">üè¢ Enterprise Daily</h1>
        <p class="text-gray-600">Best performing enterprise site today</p>
      </div>
      
      <div id="enterpriseDailyLoading" class="text-center py-12">
        <div class="retro-spinner"></div>
        <p class="text-gray-600 mt-4">Loading today's winner...</p>
      </div>
      
      <div id="enterpriseDailyResults" class="hidden">
        <div class="modern-card bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg shadow-lg p-8 text-center text-white">
          <div class="text-sm opacity-90 mb-2">Today's Enterprise Champion</div>
          <h2 id="enterpriseWinner" class="text-3xl font-bold mb-4">--</h2>
          <div class="text-6xl font-bold mb-2" id="enterprisePscore">--</div>
          <div class="text-xl mb-4">P-Score</div>
          <div class="text-sm opacity-90 mb-4">Load Time: <span id="enterpriseLoadTime">--</span></div>
          <div class="text-xs opacity-75" id="enterpriseTotalScanned">--</div>
          <a id="enterpriseLink" href="#" target="_blank" class="inline-block mt-4 bg-white text-orange-600 px-6 py-2 rounded-lg font-bold hover:bg-gray-100 transition">Visit Site ‚Üí</a>
        </div>
      </div>
    </div>
    
    <!-- ABOUT PAGE -->
    <div id="aboutPage" class="page-content">
      <div class="text-center mb-6">
        <h1 class="text-4xl font-bold text-indigo-600 mb-2">About Pythia‚Ñ¢</h1>
      </div>
      
      <div class="modern-card bg-white rounded-lg shadow-lg p-6 mb-6">
        <h2 class="text-2xl font-bold mb-4">What is Pythia‚Ñ¢?</h2>
        <p class="text-gray-700 mb-4">
          Pythia‚Ñ¢ is the ultimate website performance oracle that analyzes websites across 10 critical dimensions and delivers one unified P-Score from 0-100.
        </p>
        
        <h3 class="text-xl font-bold mb-3 mt-6">The 10 Metrics:</h3>
        <ul class="space-y-2 text-gray-700">
          <li><strong>‚ö° KARPOV:</strong> Speed & Performance</li>
          <li><strong>‚ôø VORTEX:</strong> Accessibility</li>
          <li><strong>üì± PULSE:</strong> Social & SEO Optimization</li>
          <li><strong>üîí HELIX:</strong> Privacy & Security</li>
          <li><strong>üì± NEXUS:</strong> Mobile Responsiveness</li>
          <li><strong>üå± ECHO:</strong> Green Hosting & Sustainability</li>
          <li><strong>üåê NOVA:</strong> Scalability & Infrastructure</li>
          <li><strong>‚ú® QUANTUM:</strong> Best Practices & Code Quality</li>
          <li><strong>üöÄ AETHER:</strong> Modern Tech & Future-Readiness</li>
          <li><strong>üìä EDEN:</strong> Efficiency & Page Weight</li>
        </ul>
        
        <p class="text-gray-700 mt-6">
          Each metric is weighted equally (10%) to create a holistic P-Score that represents overall website excellence.
        </p>
      </div>
    </div>
    
    <!-- LEGAL PAGE -->
    <div id="legalPage" class="page-content">
      <div class="text-center mb-6">
        <h1 class="text-4xl font-bold text-blue-600 mb-2">‚öñÔ∏è Legal & Privacy</h1>
      </div>
      
      <div class="modern-card bg-white rounded-lg shadow-lg p-6 mb-6">
        <h2 class="text-2xl font-bold mb-4">Terms of Service</h2>
        
        <h3 class="text-lg font-bold mb-2 mt-4">Disclaimer</h3>
        <p class="text-gray-700 mb-4">
          P-Scores are automated algorithmic estimates based on publicly available data and are not endorsements or guarantees of website quality. 
          Scores may not reflect all aspects of website performance or user experience. 
        </p>
        <p class="text-gray-700 mb-4">
          If you believe your website's score is inaccurate or wish to dispute it, please contact us at: 
          <a href="mailto:dispute@p-score.me" class="text-indigo-600 underline">dispute@p-score.me</a>
        </p>
        
        <h3 class="text-lg font-bold mb-2 mt-4">API Compliance</h3>
        <p class="text-gray-700 mb-4">
          Pythia‚Ñ¢ uses publicly available APIs with proper attribution. We comply with Google PageSpeed API Terms of Service, 
          including rate limiting (25 queries per hour per IP), appropriate User-Agent headers, and caching mechanisms.
        </p>
        
        <h3 class="text-lg font-bold mb-2 mt-4">Robots.txt Compliance</h3>
        <p class="text-gray-700 mb-4">
          Pythia‚Ñ¢ respects robots.txt directives. Sites can block our bot (User-Agent: PythiaBot/1.0) via robots.txt. 
          We rotate user agents and limit scanning to 50 sites per hour to avoid excessive load.
        </p>
        
        <h3 class="text-lg font-bold mb-2 mt-4">Rate Limiting</h3>
        <p class="text-gray-700 mb-4">
          To ensure fair use, we limit each IP address to 25 scan requests per hour. This helps prevent abuse and ensures 
          system stability for all users.
        </p>
      </div>
      
      <div class="modern-card bg-white rounded-lg shadow-lg p-6 mb-6">
        <h2 class="text-2xl font-bold mb-4">Privacy Policy</h2>
        
        <h3 class="text-lg font-bold mb-2 mt-4">Data Collection</h3>
        <p class="text-gray-700 mb-4">
          Pythia‚Ñ¢ does not collect or store personally identifiable information (PII). We only analyze publicly accessible website data.
        </p>
        
        <h3 class="text-lg font-bold mb-2 mt-4">GDPR Compliance</h3>
        <p class="text-gray-700 mb-4">
          We process only public data under the "legitimate interest" legal basis per GDPR Article 6(1)(f). 
          Data processing is minimized to what is necessary for performance analysis. Users may request data deletion by 
          emailing: <a href="mailto:privacy@p-score.me" class="text-indigo-600 underline">privacy@p-score.me</a>
        </p>
        
        <h3 class="text-lg font-bold mb-2 mt-4">Opt-Out</h3>
        <p class="text-gray-700 mb-4">
          Website owners can opt out of Pythia‚Ñ¢ scanning by adding the following to their robots.txt file:
        </p>
        <pre class="bg-gray-100 p-3 rounded text-sm mb-4">User-agent: PythiaBot
Disallow: /</pre>
        
        <h3 class="text-lg font-bold mb-2 mt-4">Cookies</h3>
        <p class="text-gray-700 mb-4">
          This website uses minimal cookies only for essential functionality (e.g., remembering theme preferences). 
          We do not use tracking cookies or third-party analytics.
        </p>
      </div>
      
      <div class="modern-card bg-white rounded-lg shadow-lg p-6 mb-6">
        <h2 class="text-2xl font-bold mb-4">Accessibility</h2>
        <p class="text-gray-700 mb-4">
          We are committed to making Pythia‚Ñ¢ accessible to all users. This site is designed to meet WCAG 2.1 Level AA standards. 
          If you encounter any accessibility issues, please contact us at: 
          <a href="mailto:accessibility@p-score.me" class="text-indigo-600 underline">accessibility@p-score.me</a>
        </p>
      </div>
      
      <div class="modern-card bg-white rounded-lg shadow-lg p-6">
        <h2 class="text-2xl font-bold mb-4">Contact</h2>
        <p class="text-gray-700 mb-2">For any legal inquiries, disputes, or privacy concerns:</p>
        <ul class="text-gray-700 space-y-1">
          <li>‚Ä¢ General: <a href="mailto:legal@p-score.me" class="text-indigo-600 underline">legal@p-score.me</a></li>
          <li>‚Ä¢ Disputes: <a href="mailto:dispute@p-score.me" class="text-indigo-600 underline">dispute@p-score.me</a></li>
          <li>‚Ä¢ Privacy: <a href="mailto:privacy@p-score.me" class="text-indigo-600 underline">privacy@p-score.me</a></li>
          <li>‚Ä¢ Accessibility: <a href="mailto:accessibility@p-score.me" class="text-indigo-600 underline">accessibility@p-score.me</a></li>
        </ul>
      </div>
    </div>
    
  </div>
  
  <!-- Footer -->
  <footer class="text-center py-8 mt-12">
    <p class="text-gray-600 mb-2">
      Pythia‚Ñ¢ uses public APIs with attribution. Scores are algorithmic estimates, not endorsements.
    </p>
    <p class="text-gray-500 text-sm mb-4">
      <a href="#" onclick="showPage('legal'); return false;" class="underline">ToS</a> | 
      <a href="#" onclick="showPage('legal'); return false;" class="underline">Privacy</a>
    </p>
    <p class="text-gray-600 font-bold mb-2" style="font-family: 'Courier New', monospace;">
      Made by Cronix
    </p>
    <p class="text-gray-400 text-xs">
      ¬© 2025 Cronix Holdings (Pty) Ltd, South Africa
    </p>
  </footer>
  
  <script>
    const SCAN_API = '/api/scan';
    const TOP50_API = '/api/top50';
    const ENTERPRISE_API = '/api/enterprise-daily';
    const VISIT_COUNTER_KEY = 'pythia_visits';
    
    let soundEnabled = false;
    let currentScanData = null;
    let currentBattleData = null;
    let konamiCode = [];
    const konamiSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
    
    // Konami Code Easter Egg
    document.addEventListener('keydown', (e) => {
      konamiCode.push(e.key);
      if (konamiCode.length > 10) konamiCode.shift();
      if (JSON.stringify(konamiCode) === JSON.stringify(konamiSequence)) {
        document.body.classList.toggle('summon-mode');
        playSound('summon');
        alert('üîÆ SUMMON MODE ACTIVATED! üîÆ');
      }
    });
    
    // Sound Effects
    function playSound(type) {
      if (!soundEnabled) return;
      
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      switch(type) {
        case 'click':
          oscillator.frequency.value = 800;
          gainNode.gain.value = 0.1;
          oscillator.start();
          oscillator.stop(audioContext.currentTime + 0.05);
          break;
        case 'scan':
          oscillator.frequency.value = 400;
          gainNode.gain.value = 0.15;
          oscillator.start();
          oscillator.stop(audioContext.currentTime + 0.1);
          break;
        case 'summon':
          oscillator.frequency.value = 600;
          gainNode.gain.value = 0.2;
          oscillator.start();
          oscillator.stop(audioContext.currentTime + 0.3);
          break;
      }
    }
    
    // Sound Toggle
    document.getElementById('soundToggle')?.addEventListener('click', () => {
      soundEnabled = !soundEnabled;
      document.getElementById('soundIcon').textContent = soundEnabled ? 'üîä' : 'üîá';
      playSound('click');
    });
    
    // Boot Sequence
    function showBootSequence() {
      const bootEl = document.getElementById('bootSequence');
      if (!bootEl || document.body.classList.contains('retro')) return;
      
      bootEl.classList.remove('hidden');
      const lines = bootEl.querySelectorAll('.boot-line');
      
      lines.forEach((line, i) => {
        setTimeout(() => {
          line.style.animationDelay = `${i * 0.3}s`;
        }, i * 300);
      });
      
      setTimeout(() => {
        bootEl.classList.add('hidden');
      }, lines.length * 300 + 2000);
    }
    
    // Theme Toggle
    document.getElementById('themeToggle').addEventListener('click', () => {
      playSound('click');
      const isRetro = document.body.classList.toggle('retro');
      document.getElementById('themeText').textContent = isRetro ? 'BORING' : 'RETRO';
      document.getElementById('themeIcon').textContent = isRetro ? 'üíº' : 'üñ•Ô∏è';
      document.getElementById('soundToggle').classList.toggle('hidden', !isRetro);
      
      if (isRetro && !sessionStorage.getItem('boot_shown')) {
        showBootSequence();
        sessionStorage.setItem('boot_shown', 'true');
      }
    });
    
    // Menu Functions
    document.getElementById('menuBtn').addEventListener('click', () => {
      playSound('click');
      document.getElementById('menuOverlay').classList.add('open');
      document.getElementById('menuBackdrop').classList.add('open');
    });
    
    document.getElementById('closeMenu').addEventListener('click', closeMenu);
    document.getElementById('menuBackdrop').addEventListener('click', closeMenu);
    
    function closeMenu() {
      playSound('click');
      document.getElementById('menuOverlay').classList.remove('open');
      document.getElementById('menuBackdrop').classList.remove('open');
    }
    
    function showPage(page) {
      playSound('click');
      document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
      document.getElementById(`${page}Page`).classList.add('active');
      closeMenu();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // Visit Counter
    async function updateVisitCounter() {
      try {
        // This would normally fetch from a Worker/KV, but for demo purposes:
        let visits = parseInt(localStorage.getItem(VISIT_COUNTER_KEY) || '0');
        visits++;
        localStorage.setItem(VISIT_COUNTER_KEY, visits);
        document.getElementById('visitCount').textContent = visits.toLocaleString();
      } catch (e) {
        document.getElementById('visitCount').textContent = '---';
      }
    }
    
    // URL Normalizer
    function normalizeUrl(url) {
      url = url.trim();
      if (!url.startsWith('http://') && !url.startsWith('https://')) {
        url = 'https://' + url;
      }
      return url;
    }
    
    // Enter key support
    document.getElementById('urlInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        analyzeWebsite();
      }
    });
    
    // Try Demo URL
    async function tryDemoUrl() {
      playSound('click');
      try {
        const response = await fetch(TOP50_API);
        const data = await response.json();
        if (data.results && data.results.length > 0) {
          const randomSite = data.results[Math.floor(Math.random() * data.results.length)];
          document.getElementById('urlInput').value = randomSite.url;
          analyzeWebsite();
        }
      } catch (e) {
        document.getElementById('urlInput').value = 'https://www.google.com';
        analyzeWebsite();
      }
    }
    
    // Consult Pythia (AI Mode)
    async function consultPythia() {
      playSound('summon');
      const url = document.getElementById('urlInput').value.trim();
      if (!url) {
        alert('Please enter a URL first!');
        return;
      }
      
      const consultResults = document.getElementById('consultationResults');
      const consultText = document.getElementById('consultationText');
      
      consultResults.classList.remove('hidden');
      consultText.innerHTML = 'The Oracle gazes into the digital ether...';
      
      const prophecies = [
        `Beware! The site ${url} bears the mark of ${Math.floor(Math.random() * 100)} tracking demons. Cleanse thyself or face eternal cookies!`,
        `I see... great speed in your future, but accessibility haunts your present. The gods of WCAG are displeased!`,
        `The prophecy speaks of ${Math.floor(Math.random() * 50 + 20)} scripts... too many cooks spoil the DOM, mortal.`,
        `Your site's loading time shall eclipse ${Math.random() * 5 + 1}s. The impatient shall flee to faster shores!`,
        `I foresee a P-Score betwixt ${Math.floor(Math.random() * 30 + 40)} and ${Math.floor(Math.random() * 20 + 70)}. The stars are... inconclusive.`,
        `The Oracle detects ${Math.random() > 0.5 ? 'green' : 'coal-powered'} hosting. The planet ${Math.random() > 0.5 ? 'thanks' : 'weeps for'} thee!`,
        `Hark! Your mobile users cry out in despair. Responsive design is not a suggestion, 'tis a commandment!`,
        `Security headers? The Oracle sees but shadows. Your site is vulnerable to the dark arts of XSS!`,
        `A great battle awaits... ${url} versus its rivals. Only the P-Score shall crown the victor!`,
        `The gods whisper: "Lazy loading, thou must embrace. Images without loading='lazy' are an abomination!"`
      ];
      
      setTimeout(() => {
        consultText.innerHTML = prophecies[Math.floor(Math.random() * prophecies.length)];
      }, 2000);
    }
    
    // Analyze Website
    async function analyzeWebsite() {
      playSound('scan');
      let url = document.getElementById('urlInput').value.trim();
      if (!url) {
        alert('Please enter a URL');
        return;
      }
      
      url = normalizeUrl(url);
      document.getElementById('urlInput').value = url;
      
      const resultsDiv = document.getElementById('scanResults');
      const loadingDiv = document.getElementById('loadingSpinner');
      const badgeSection = document.getElementById('badgeSection');
      resultsDiv.classList.add('hidden');
      badgeSection.classList.add('hidden');
      loadingDiv.classList.remove('hidden');
      document.getElementById('analyzeBtn').disabled = true;
      
      try {
        const response = await fetch(SCAN_API, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ url })
        });
        
        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.message || 'Scan failed');
        }
        
        const result = await response.json();
        currentScanData = result;
        displayResults(result);
        loadingDiv.classList.add('hidden');
        resultsDiv.classList.remove('hidden');
        
        // Show badge section
        await populateBadgeCompare();
        badgeSection.classList.remove('hidden');
        
      } catch (error) {
        loadingDiv.classList.add('hidden');
        alert(`Analysis failed: ${error.message}`);
      } finally {
        document.getElementById('analyzeBtn').disabled = false;
      }
    }
    
    // Display Results
    function displayResults(result) {
      const resultsDiv = document.getElementById('scanResults');
      
      const isRetro = document.body.classList.contains('retro');
      const divider = isRetro ? '‚ïê‚ïê‚ïê ‚ö° ORACLE REPORT ‚ö° ‚ïê‚ïê‚ïê' : '';
      
      resultsDiv.innerHTML = `
        <div class="modern-card bg-white rounded-lg shadow-lg p-6 mb-6">
          ${isRetro ? `<div class="text-center mb-4 text-2xl font-bold">${divider}</div>` : ''}
          <h2 class="text-2xl font-bold mb-4">Analysis Results</h2>
          <div class="mb-4">
            <span class="text-sm text-gray-600">URL:</span>
            <a href="${result.url}" target="_blank" class="text-indigo-600 underline ml-2">${result.url}</a>
          </div>
          <div class="mb-4">
            <span class="text-sm text-gray-600">Scanned:</span>
            <span class="ml-2">${new Date(result.timestamp).toLocaleString()}</span>
          </div>
          
          <div class="text-center mb-6 p-8 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg">
            <div class="text-white text-6xl font-bold mb-2">${result.pscore}</div>
            <div class="text-white text-2xl font-bold">P-Score</div>
            <div class="text-white text-sm mt-2 opacity-90">Scanned by Pythia‚Ñ¢ üîÆ</div>
          </div>
          
          <div class="grid grid-cols-2 md:grid-cols-5 gap-3 mb-6">
            <div class="score-card text-center p-3 rounded-lg bg-blue-50">
              <div class="text-xs text-gray-600 mb-1">‚ö° Speed</div>
              <div class="text-2xl font-bold" style="color: ${getScoreColor(result.karpov)}">${result.karpov}</div>
            </div>
            <div class="score-card text-center p-3 rounded-lg bg-green-50">
              <div class="text-xs text-gray-600 mb-1">‚ôø Access</div>
              <div class="text-2xl font-bold" style="color: ${getScoreColor(result.vortex)}">${result.vortex}</div>
            </div>
            <div class="score-card text-center p-3 rounded-lg bg-purple-50">
              <div class="text-xs text-gray-600 mb-1">üì± SEO</div>
              <div class="text-2xl font-bold" style="color: ${getScoreColor(result.pulse)}">${result.pulse}</div>
            </div>
            <div class="score-card text-center p-3 rounded-lg bg-red-50">
              <div class="text-xs text-gray-600 mb-1">üîí Privacy</div>
              <div class="text-2xl font-bold" style="color: ${getScoreColor(result.helix)}">${result.helix}</div>
            </div>
            <div class="score-card text-center p-3 rounded-lg bg-yellow-50">
              <div class="text-xs text-gray-600 mb-1">üì± Mobile</div>
              <div class="text-2xl font-bold" style="color: ${getScoreColor(result.nexus)}">${result.nexus}</div>
            </div>
            <div class="score-card text-center p-3 rounded-lg bg-green-50">
              <div class="text-xs text-gray-600 mb-1">üå± Green</div>
              <div class="text-2xl font-bold" style="color: ${getScoreColor(result.echo)}">${result.echo}</div>
            </div>
            <div class="score-card text-center p-3 rounded-lg bg-indigo-50">
              <div class="text-xs text-gray-600 mb-1">üåê Scale</div>
              <div class="text-2xl font-bold" style="color: ${getScoreColor(result.nova)}">${result.nova}</div>
            </div>
            <div class="score-card text-center p-3 rounded-lg bg-pink-50">
              <div class="text-xs text-gray-600 mb-1">‚ú® Quality</div>
              <div class="text-2xl font-bold" style="color: ${getScoreColor(result.quantum)}">${result.quantum}</div>
            </div>
            <div class="score-card text-center p-3 rounded-lg bg-cyan-50">
              <div class="text-xs text-gray-600 mb-1">üöÄ Tech</div>
              <div class="text-2xl font-bold" style="color: ${getScoreColor(result.aether)}">${result.aether}</div>
            </div>
            <div class="score-card text-center p-3 rounded-lg bg-amber-50">
              <div class="text-xs text-gray-600 mb-1">üìä Efficient</div>
              <div class="text-2xl font-bold" style="color: ${getScoreColor(result.eden)}">${result.eden}</div>
            </div>
          </div>
          
          <div class="flex justify-between items-center mb-4">
            <button onclick="toggleDetails()" id="toggleDetailsBtn" class="retro-button bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition text-sm">
              ‚ñº Show Details
            </button>
            <button onclick="downloadReport()" class="retro-button bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm">
              üì• Download Report
            </button>
          </div>
          
          <div id="detailContent" class="detail-content collapsed">
            <div class="grid md:grid-cols-2 gap-4 mt-6">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-bold mb-2">‚ö° KARPOV - Speed (${result.karpov}/100)</h4>
                <ul class="text-sm text-gray-700 space-y-1">
                  <li>‚Ä¢ Load Time: ${result.breakdown.karpov.loadTimeMs}ms</li>
                  <li>‚Ä¢ Scripts: ${result.breakdown.karpov.scripts}</li>
                  <li>‚Ä¢ Images: ${result.breakdown.karpov.images}</li>
                  <li>‚Ä¢ Stylesheets: ${result.breakdown.karpov.stylesheets}</li>
                  <li>‚Ä¢ Async Loading: ${result.breakdown.karpov.hasAsync ? '‚úì' : '‚úó'}</li>
                  <li>‚Ä¢ Minified: ${result.breakdown.karpov.hasMinified ? '‚úì' : '‚úó'}</li>
                </ul>
              </div>
              
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-bold mb-2">‚ôø VORTEX - Accessibility (${result.vortex}/100)</h4>
                <ul class="text-sm text-gray-700 space-y-1">
                  <li>‚Ä¢ Images with Alt: ${result.breakdown.vortex.imagesWithAlt}/${result.breakdown.vortex.totalImages}</li>
                  <li>‚Ä¢ ARIA Labels: ${result.breakdown.vortex.ariaLabels}</li>
                  <li>‚Ä¢ Roles: ${result.breakdown.vortex.roles}</li>
                  <li>‚Ä¢ Form Labels: ${result.breakdown.vortex.labels}</li>
                  <li>‚Ä¢ H1 Count: ${result.breakdown.vortex.h1Count} ${result.breakdown.vortex.h1Count === 1 ? '‚úì' : '‚ö†Ô∏è'}</li>
                </ul>
              </div>
              
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-bold mb-2">üì± PULSE - SEO (${result.pulse}/100)</h4>
                <ul class="text-sm text-gray-700 space-y-1">
                  <li>‚Ä¢ Title Tag: ${result.breakdown.pulse.hasTitle ? '‚úì' : '‚úó'}</li>
                  <li>‚Ä¢ Meta Description: ${result.breakdown.pulse.hasMetaDescription ? '‚úì' : '‚úó'}</li>
                  <li>‚Ä¢ Canonical URL: ${result.breakdown.pulse.hasCanonical ? '‚úì' : '‚úó'}</li>
                  <li>‚Ä¢ OG Title: ${result.breakdown.pulse.ogTags.title ? '‚úì' : '‚úó'}</li>
                  <li>‚Ä¢ OG Image: ${result.breakdown.pulse.ogTags.image ? '‚úì' : '‚úó'}</li>
                </ul>
              </div>
              
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-bold mb-2">üîí HELIX - Privacy (${result.helix}/100)</h4>
                <ul class="text-sm text-gray-700 space-y-1">
                  <li>‚Ä¢ Trackers: ${result.breakdown.helix.trackerCount}</li>
                  <li>‚Ä¢ 3rd Party Scripts: ${result.breakdown.helix.thirdPartyScripts}</li>
                  <li>‚Ä¢ HSTS: ${result.breakdown.helix.securityHeaders.hsts ? '‚úì' : '‚úó'}</li>
                  <li>‚Ä¢ CSP: ${result.breakdown.helix.securityHeaders.csp ? '‚úì' : '‚úó'}</li>
                  <li>‚Ä¢ X-Frame-Options: ${result.breakdown.helix.securityHeaders.xFrame ? '‚úì' : '‚úó'}</li>
                </ul>
              </div>
              
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-bold mb-2">üåê NOVA - Infrastructure (${result.nova}/100)</h4>
                <ul class="text-sm text-gray-700 space-y-1">
                  <li>‚Ä¢ CDN: ${result.breakdown.nova.hasCDN ? '‚úì' : '‚úó'}</li>
                  <li>‚Ä¢ Caching: ${result.breakdown.nova.hasCache ? '‚úì' : '‚úó'}</li>
                  <li>‚Ä¢ Compression: ${result.breakdown.nova.compression || 'None'}</li>
                  <li>‚Ä¢ Server: ${result.breakdown.nova.serverHeader || 'Unknown'}</li>
                </ul>
              </div>
              
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-bold mb-2">üöÄ AETHER - Modern Tech (${result.aether}/100)</h4>
                <ul class="text-sm text-gray-700 space-y-1">
                  <li>‚Ä¢ WebAssembly: ${result.breakdown.aether.hasWebAssembly ? '‚úì' : '‚úó'}</li>
                  <li>‚Ä¢ Service Worker: ${result.breakdown.aether.hasServiceWorker ? '‚úì' : '‚úó'}</li>
                  <li>‚Ä¢ ES Modules: ${result.breakdown.aether.hasModules ? '‚úì' : '‚úó'}</li>
                  <li>‚Ä¢ Framework: ${result.breakdown.aether.framework}</li>
                </ul>
              </div>
              
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-bold mb-2">üìä EDEN - Efficiency (${result.eden}/100)</h4>
                <ul class="text-sm text-gray-700 space-y-1">
                  <li>‚Ä¢ Page Size: ${result.breakdown.eden.sizeMB.toFixed(2)} MB</li>
                  <li>‚Ä¢ Total Bytes: ${result.breakdown.eden.sizeBytes.toLocaleString()}</li>
                  <li>‚Ä¢ Optimal Range: 0.5-1.5 MB</li>
                </ul>
              </div>
              
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-bold mb-2">Additional Metrics</h4>
                <ul class="text-sm text-gray-700 space-y-1">
                  <li>‚Ä¢ Load Time: ${result.loadTime}</li>
                  <li>‚Ä¢ Page Size: ${result.pageSize}</li>
                  <li>‚Ä¢ Analysis Time: ${result.analysisTime}ms</li>
                </ul>
              </div>
            </div>
            
            ${isRetro ? `<div class="text-center mt-6 text-xl font-bold">${divider}</div>` : ''}
          </div>
        </div>
      `;
    }
    
    function toggleDetails() {
      playSound('click');
      const content = document.getElementById('detailContent');
      const btn = document.getElementById('toggleDetailsBtn');
      const isCollapsed = content.classList.contains('collapsed');
      
      content.classList.toggle('collapsed');
      btn.innerHTML = isCollapsed ? '‚ñ≤ Hide Details' : '‚ñº Show Details';
    }
    
    function getScoreColor(score) {
      if (score >= 80) return '#10b981';
      if (score >= 60) return '#f59e0b';
      return '#ef4444';
    }
    
    // Download Report
    function downloadReport() {
      playSound('click');
      if (!currentScanData) return;
      
      const isRetro = document.body.classList.contains('retro');
      const divider = isRetro ? '‚ïê‚ïê‚ïê ‚ö° ORACLE REPORT ‚ö° ‚ïê‚ïê‚ïê' : '=====================================';
      
      const report = `
${divider}
PYTHIA‚Ñ¢ WEBSITE PERFORMANCE REPORT
${divider}

URL: ${currentScanData.url}
Scanned: ${new Date(currentScanData.timestamp).toLocaleString()}
Analysis Time: ${currentScanData.analysisTime}ms

${divider}
P-SCORE: ${currentScanData.pscore}/100
${divider}

DETAILED METRICS:
‚ö° KARPOV (Speed): ${currentScanData.karpov}/100
‚ôø VORTEX (Accessibility): ${currentScanData.vortex}/100
üì± PULSE (SEO): ${currentScanData.pulse}/100
üîí HELIX (Privacy): ${currentScanData.helix}/100
üì± NEXUS (Mobile): ${currentScanData.nexus}/100
üå± ECHO (Green): ${currentScanData.echo}/100
üåê NOVA (Infrastructure): ${currentScanData.nova}/100
‚ú® QUANTUM (Quality): ${currentScanData.quantum}/100
üöÄ AETHER (Tech): ${currentScanData.aether}/100
üìä EDEN (Efficiency): ${currentScanData.eden}/100

PERFORMANCE SUMMARY:
‚Ä¢ Load Time: ${currentScanData.loadTime}
‚Ä¢ Page Size: ${currentScanData.pageSize}
‚Ä¢ Scripts: ${currentScanData.breakdown.karpov.scripts}
‚Ä¢ Images: ${currentScanData.breakdown.karpov.images}

ACCESSIBILITY:
‚Ä¢ Images with Alt Text: ${currentScanData.breakdown.vortex.imagesWithAlt}/${currentScanData.breakdown.vortex.totalImages}
‚Ä¢ ARIA Labels: ${currentScanData.breakdown.vortex.ariaLabels}
‚Ä¢ H1 Count: ${currentScanData.breakdown.vortex.h1Count}

SEO OPTIMIZATION:
‚Ä¢ Title Tag: ${currentScanData.breakdown.pulse.hasTitle ? '‚úì' : '‚úó'}
‚Ä¢ Meta Description: ${currentScanData.breakdown.pulse.hasMetaDescription ? '‚úì' : '‚úó'}
‚Ä¢ Canonical URL: ${currentScanData.breakdown.pulse.hasCanonical ? '‚úì' : '‚úó'}

PRIVACY & SECURITY:
‚Ä¢ Trackers Detected: ${currentScanData.breakdown.helix.trackerCount}
‚Ä¢ 3rd Party Scripts: ${currentScanData.breakdown.helix.thirdPartyScripts}
‚Ä¢ HSTS: ${currentScanData.breakdown.helix.securityHeaders.hsts ? '‚úì' : '‚úó'}
‚Ä¢ CSP: ${currentScanData.breakdown.helix.securityHeaders.csp ? '‚úì' : '‚úó'}

INFRASTRUCTURE:
‚Ä¢ CDN: ${currentScanData.breakdown.nova.hasCDN ? '‚úì' : '‚úó'}
‚Ä¢ Caching: ${currentScanData.breakdown.nova.hasCache ? '‚úì' : '‚úó'}
‚Ä¢ Compression: ${currentScanData.breakdown.nova.compression || 'None'}

MODERN TECHNOLOGY:
‚Ä¢ WebAssembly: ${currentScanData.breakdown.aether.hasWebAssembly ? '‚úì' : '‚úó'}
‚Ä¢ Service Worker: ${currentScanData.breakdown.aether.hasServiceWorker ? '‚úì' : '‚úó'}
‚Ä¢ ES Modules: ${currentScanData.breakdown.aether.hasModules ? '‚úì' : '‚úó'}
‚Ä¢ Framework: ${currentScanData.breakdown.aether.framework}

${divider}
Scanned by Pythia‚Ñ¢ üîÆ
https://p-score.me
${divider}

¬© 2025 Cronix Holdings (Pty) Ltd, South Africa
      `.trim();
      
      const blob = new Blob([report], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `pythia-report-${new Date().getTime()}.txt`;
      a.click();
      URL.revokeObjectURL(url);
    }
    
    // Badge Functions
    async function populateBadgeCompare() {
      try {
        const response = await fetch(TOP50_API);
        const data = await response.json();
        const select = document.getElementById('badgeCompare');
        
        select.innerHTML = '<option value="">Select a site...</option>';
        data.results.slice(0, 10).forEach(site => {
          const hostname = new URL(site.url).hostname;
          select.innerHTML += `<option value="${site.url}" data-pscore="${site.pscore}">${hostname} (${site.pscore})</option>`;
        });
      } catch (e) {
        console.error('Failed to load comparison sites:', e);
      }
    }
    
    function generateBadge() {
      playSound('click');
      if (!currentScanData) {
        alert('Please scan a website first!');
        return;
      }
      
      const select = document.getElementById('badgeCompare');
      const selectedOption = select.options[select.selectedIndex];
      
      if (!selectedOption.value) {
        alert('Please select a site to compare with!');
        return;
      }
      
      const compareHostname = new URL(selectedOption.value).hostname;
      const comparePscore = parseInt(selectedOption.dataset.pscore);
      const currentPscore = currentScanData.pscore;
      const diff = currentPscore - comparePscore;
      
      let comparisonText = '';
      if (diff > 0) {
        comparisonText = `${diff} points better than ${compareHostname}!`;
      } else if (diff < 0) {
        comparisonText = `${Math.abs(diff)} points behind ${compareHostname}`;
      } else {
        comparisonText = `Tied with ${compareHostname}!`;
      }
      
      document.getElementById('badgePscore').textContent = currentPscore;
      document.getElementById('badgeComparison').textContent = comparisonText;
      document.getElementById('badgeUrl').textContent = new URL(currentScanData.url).hostname;
      document.getElementById('badgePreview').classList.remove('hidden');
    }
    
    function downloadBadge() {
      playSound('click');
      // In production, this would use html2canvas or similar to create an actual image
      alert('Badge download feature coming soon! For now, take a screenshot.');
    }
    
    function shareBadge() {
      playSound('click');
      const text = `Check out my P-Score: ${currentScanData.pscore}! Scanned by Pythia‚Ñ¢ üîÆ`;
      shareContent(text, window.location.href);
    }
    
    // Rivalry Functions
    const epicRivalries = [
      { name1: 'Google', name2: 'Bing', url1: 'https://www.google.com', url2: 'https://www.bing.com', logo1: 'https://www.google.com/favicon.ico', logo2: 'https://www.bing.com/favicon.ico' },
      { name1: 'YouTube', name2: 'Vimeo', url1: 'https://www.youtube.com', url2: 'https://vimeo.com', logo1: 'https://www.youtube.com/favicon.ico', logo2: 'https://vimeo.com/favicon.ico' },
      { name1: 'Facebook', name2: 'Twitter', url1: 'https://www.facebook.com', url2: 'https://twitter.com', logo1: 'https://www.facebook.com/favicon.ico', logo2: 'https://twitter.com/favicon.ico' },
      { name1: 'Amazon', name2: 'eBay', url1: 'https://www.amazon.com', url2: 'https://www.ebay.com', logo1: 'https://www.amazon.com/favicon.ico', logo2: 'https://www.ebay.com/favicon.ico' },
      { name1: 'Netflix', name2: 'Hulu', url1: 'https://www.netflix.com', url2: 'https://www.hulu.com', logo1: 'https://www.netflix.com/favicon.ico', logo2: 'https://www.hulu.com/favicon.ico' },
    ];
    
    function renderRivalries() {
      const list = document.getElementById('rivalriesList');
      list.innerHTML = epicRivalries.map(rivalry => {
        return `<div class="rivalry-item flex justify-between items-center p-3 bg-gray-50 rounded-lg">
          <span class="text-sm font-bold">${rivalry.name1} vs ${rivalry.name2}</span>
          <button onclick="startBattle('${rivalry.url1}', '${rivalry.url2}', '${rivalry.name1}', '${rivalry.name2}', '${rivalry.logo1 || ''}', '${rivalry.logo2 || ''}')" 
            class="retro-button px-4 py-2 bg-red-500 text-white font-bold rounded-lg hover:bg-red-600 transition text-sm">‚öîÔ∏è</button>
        </div>`;
      }).join('');
    }
    
    document.getElementById('customBattleBtn').addEventListener('click', () => {
      let url1 = document.getElementById('customUrl1').value.trim();
      let url2 = document.getElementById('customUrl2').value.trim();
      if (!url1 || !url2) {
        alert('Please enter two URLs');
        return;
      }
      url1 = normalizeUrl(url1);
      url2 = normalizeUrl(url2);
      const name1 = new URL(url1).hostname;
      const name2 = new URL(url2).hostname;
      startBattle(url1, url2, name1, name2);
    });
    
    async function startBattle(url1, url2, name1, name2, logo1 = '', logo2 = '') {
      playSound('scan');
      document.getElementById('battleResults').classList.add('hidden');
      const btn = event.target;
      btn.innerHTML = '<span class="sword-fighting">‚öîÔ∏è</span>';
      btn.disabled = true;
      
      try {
        const [response1, response2] = await Promise.all([
          fetch(SCAN_API, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ url: url1 }) }),
          fetch(SCAN_API, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ url: url2 }) })
        ]);
        
        const result1 = await response1.json();
        const result2 = await response2.json();
        
        const winner = result1.pscore > result2.pscore ? name1 : result2.pscore > result1.pscore ? name2 : 'TIE';
        const winnerLogo = result1.pscore > result2.pscore ? logo1 : result2.pscore > result1.pscore ? logo2 : '';
        const battleDate = new Date().toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });
        
        currentBattleData = { name1, name2, result1, result2, winner, battleDate };
        
        const winnerIcon = document.getElementById('winnerIcon');
        if (winnerLogo && winner !== 'TIE') {
          winnerIcon.querySelector('img').src = winnerLogo;
          winnerIcon.querySelector('img').alt = `${winner} logo`;
          winnerIcon.classList.remove('hidden');
        } else {
          winnerIcon.classList.add('hidden');
        }
        
        const winnerAnnouncement = document.getElementById('winnerAnnouncement');
        if (winner === 'TIE') {
          winnerAnnouncement.innerHTML = `ü§ù IT'S A TIE!<br><span class="text-2xl">${result1.pscore} - ${result2.pscore}</span><br><span class="text-xs opacity-75 mt-2 block">${battleDate}</span>`;
        } else {
          const winScore = winner === name1 ? result1.pscore : result2.pscore;
          const loseScore = winner === name1 ? result2.pscore : result1.pscore;
          winnerAnnouncement.innerHTML = `üèÜ ${winner.toUpperCase()} IS THE WINNER!<br><span class="text-2xl">${winScore} - ${loseScore}</span><br><span class="text-xs opacity-75 mt-2 block">${battleDate}</span>`;
        }
        
        document.getElementById('contestant1Results').innerHTML = `<div class="text-center"><div class="text-xl font-bold mb-2">${name1}</div><div class="text-3xl font-bold text-indigo-600">${result1.pscore}</div><div class="text-sm font-bold mt-2">P-Score</div><div class="text-xs text-gray-500 mt-2">Speed: ${result1.karpov} ‚Ä¢ Access: ${result1.vortex}<br>Scale: ${result1.nova} ‚Ä¢ Tech: ${result1.aether}</div></div>`;
        document.getElementById('contestant2Results').innerHTML = `<div class="text-center"><div class="text-xl font-bold mb-2">${name2}</div><div class="text-3xl font-bold text-purple-600">${result2.pscore}</div><div class="text-sm font-bold mt-2">P-Score</div><div class="text-xs text-gray-500 mt-2">Speed: ${result2.karpov} ‚Ä¢ Access: ${result2.vortex}<br>Scale: ${result2.nova} ‚Ä¢ Tech: ${result2.aether}</div></div>`;
        
        document.getElementById('battleResults').classList.remove('hidden');
        setTimeout(() => { window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }); }, 100);
      } catch (error) {
        alert(`Battle failed: ${error.message}`);
      } finally {
        btn.innerHTML = '‚öîÔ∏è';
        btn.disabled = false;
      }
    }
    
    function shareBattleResult() {
      playSound('click');
      if (currentBattleData) {
        const { name1, name2, result1, result2, winner, battleDate } = currentBattleData;
        const text = `‚öîÔ∏è PYTHIA‚Ñ¢ BATTLE (${battleDate}): ${name1} (${result1.pscore}) v ${name2} (${result2.pscore}) - ${winner.toUpperCase()} WINS! üèÜ Scanned by Pythia‚Ñ¢ üîÆ`;
        shareContent(text, window.location.href);
      }
    }
    
    async function loadTop50Results() {
      try {
        const response = await fetch(TOP50_API);
        const data = await response.json();
        if (data.error) throw new Error(data.message);
        
        const sorted = data.results.sort((a, b) => b.pscore - a.pscore);
        const top5 = sorted.slice(0, 5);
        const bottom5 = sorted.slice(-5).reverse();
        const scanDate = new Date(data.timestamp).toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit', timeZone: 'America/Los_Angeles' });
        
        document.getElementById('top50TopList').innerHTML = `<div class="text-xs text-gray-500 mb-3 italic">Last scan: ${scanDate} PT</div>${top5.map((site, i) => {
          const avgDisplay = site.fiveDayAvg ? ` (5d avg: ${site.fiveDayAvg})` : '';
          return `<div class="leaderboard-entry flex justify-between items-center p-3 rounded bg-green-50"><span class="text-sm font-bold text-gray-700">${i + 1}. ${new URL(site.url).hostname}</span><span class="text-lg font-bold text-green-600">${site.pscore}${avgDisplay}</span></div>`;
        }).join('')}`;
        
        document.getElementById('top50BottomList').innerHTML = `<div class="text-xs text-gray-500 mb-3 italic">Last scan: ${scanDate} PT</div>${bottom5.map((site, i) => {
          const rank = sorted.length - (4 - i);
          const avgDisplay = site.fiveDayAvg ? ` (5d avg: ${site.fiveDayAvg})` : '';
          return `<div class="leaderboard-entry flex justify-between items-center p-3 rounded bg-red-50"><span class="text-sm font-bold text-gray-700">${rank}. ${new URL(site.url).hostname}</span><span class="text-lg font-bold text-red-600">${site.pscore}${avgDisplay}</span></div>`;
        }).join('')}`;
        
        document.getElementById('top50Loading').classList.add('hidden');
        document.getElementById('top50Results').classList.remove('hidden');
      } catch (error) {
        document.getElementById('top50Loading').innerHTML = `<div class="text-red-600 font-bold">Failed to load rankings</div><div class="text-sm text-gray-500 mt-2">${error.message}</div>`;
      }
    }
    
    async function loadEnterpriseDaily() {
      try {
        const response = await fetch(ENTERPRISE_API);
        const data = await response.json();
        if (data.error) throw new Error(data.message);
        
        const winner = data.winner;
        document.getElementById('enterpriseWinner').textContent = new URL(winner.url).hostname;
        document.getElementById('enterprisePscore').textContent = winner.pscore;
        document.getElementById('enterpriseLoadTime').textContent = winner.loadTime;
        document.getElementById('enterpriseTotalScanned').textContent = `From ${data.totalScanned} sites scanned on ${data.scanDate}`;
        document.getElementById('enterpriseLink').href = winner.url;
        
        document.getElementById('enterpriseDailyLoading').classList.add('hidden');
        document.getElementById('enterpriseDailyResults').classList.remove('hidden');
      } catch (error) {
        document.getElementById('enterpriseDailyLoading').innerHTML = `<div class="text-gray-600 font-bold">No scan available yet</div><div class="text-sm text-gray-500 mt-2">${error.message}</div>`;
      }
    }
    
    function shareOn(platform) {
      playSound('click');
      const text = 'Check out Pythia‚Ñ¢ - The ultimate website performance oracle! ONE SCORE TO RANK THEM ALL üîÆ';
      const url = window.location.href;
      shareContent(text, url, platform);
    }
    
    function shareContent(text, url, platform = null) {
      const encodedText = encodeURIComponent(text);
      const encodedUrl = encodeURIComponent(url);
      if (!platform) {
        if (navigator.share) navigator.share({ title: 'Pythia‚Ñ¢', text, url });
        return;
      }
      let shareUrl;
      switch(platform) {
        case 'twitter': shareUrl = `https://twitter.com/intent/tweet?text=${encodedText}&url=${encodedUrl}`; break;
        case 'facebook': shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`; break;
        case 'whatsapp': shareUrl = `https://wa.me/?text=${encodedText}%20${encodedUrl}`; break;
        case 'email': shareUrl = `mailto:?subject=${encodeURIComponent('Pythia‚Ñ¢ - Website Performance Oracle')}&body=${encodedText}%20${encodedUrl}`; break;
      }
      if (shareUrl) window.open(shareUrl, '_blank', 'width=600,height=400');
    }
    
    // Initialize
    updateVisitCounter();
    renderRivalries();
    loadTop50Results();
    loadEnterpriseDaily();
  </script>
</body>
</html>
