<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pythia‚Ñ¢ ‚Äì Website Performance Oracle (BETA)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Boot Sequence Styles */
    #bootSequence {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: #000;
      color: #00ff00;
      font-family: 'Courier New', monospace;
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
    }
    
    #bootSequence.hidden {
      display: none;
    }
    
    #bootTerminal {
      width: 100%;
      max-width: 800px;
      text-align: left;
      font-size: 16px;
      line-height: 1.6;
    }
    
    .boot-line {
      opacity: 0;
      margin-bottom: 8px;
    }
    
    .boot-cursor {
      animation: cursor-blink 1s infinite;
    }
    
    @keyframes cursor-blink {
      0%, 49% { opacity: 1; }
      50%, 100% { opacity: 0; }
    }
    
    /* Pixellated fade-in effect for main content */
    body.loading-pixels {
      overflow: hidden;
    }
    
    #pixelOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      z-index: 9999;
      pointer-events: none;
      display: grid;
      grid-template-columns: repeat(40, 1fr);
      grid-template-rows: repeat(30, 1fr);
    }
    
    .pixel-cell {
      background: #000;
      transition: opacity 0.3s;
    }
    
    .pixel-cell.fade {
      opacity: 0;
    }
    
    /* CRT Effects */
    body.retro::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      pointer-events: none;
      z-index: 9998;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.15) 0px,
        rgba(0, 0, 0, 0) 1px,
        rgba(0, 0, 0, 0) 2px,
        rgba(0, 0, 0, 0.15) 3px
      );
      animation: crt-flicker 8s infinite;
    }
    
    @keyframes crt-flicker {
      0% { opacity: 0.95; }
      5% { opacity: 0.92; }
      10% { opacity: 0.95; }
      25% { opacity: 0.97; }
      35% { opacity: 0.93; }
      50% { opacity: 0.95; }
      65% { opacity: 0.96; }
      80% { opacity: 0.94; }
      100% { opacity: 0.95; }
    }
    
    /* CRT Curve Distortion */
    body.retro #mainContent {
      filter: contrast(1.1) brightness(1.05);
      transform: perspective(1000px) rotateX(0deg);
      transform-style: preserve-3d;
    }
    
    /* Retro Spinner */
    .retro-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid #003300;
      border-top: 3px solid #00ff00;
      border-radius: 0;
      animation: retro-spin 1s linear infinite;
      box-shadow: 0 0 10px #00ff00;
    }
    
    @keyframes retro-spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Typing Animation */
    .typing-text {
      overflow: hidden;
      border-right: 3px solid #00ff00;
      white-space: nowrap;
      animation: typing 2s steps(40, end), blink-caret 0.75s step-end infinite;
    }
    
    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }
    
    @keyframes blink-caret {
      from, to { border-color: transparent; }
      50% { border-color: #00ff00; }
    }
    
    .typing-text.done {
      border-right: none;
      animation: none;
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
      50% { box-shadow: 0 0 40px rgba(99, 102, 241, 0.6); }
    }
    .scanning { animation: pulse-glow 2s infinite; }
    
    /* Hamburger Menu */
    .menu-overlay {
      position: fixed;
      top: 0;
      left: -100%;
      width: 80%;
      max-width: 400px;
      height: 100vh;
      background: white;
      box-shadow: 2px 0 10px rgba(0,0,0,0.3);
      transition: left 0.3s ease;
      z-index: 1000;
      overflow-y: auto;
    }
    .menu-overlay.open {
      left: 0;
    }
    .menu-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: rgba(0,0,0,0.5);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 999;
    }
    .menu-backdrop.open {
      opacity: 1;
      visibility: visible;
    }
    
    /* Page Content Areas */
    .page-content {
      display: none;
    }
    .page-content.active {
      display: block;
    }
    
    /* Sound Toggle Button */
    #soundToggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: #003300;
      border: 3px solid #00ff00;
      color: #00ff00;
      font-size: 24px;
      cursor: pointer;
      z-index: 900;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 15px #00ff00;
      transition: all 0.3s;
    }
    
    #soundToggle:hover {
      background: #005500;
      box-shadow: 0 0 25px #00ff00;
    }
    
    #soundToggle.muted {
      background: #330000;
      border-color: #ff0000;
      color: #ff0000;
      box-shadow: 0 0 15px #ff0000;
    }
    
    /* Retro Mode Styles */
    body.retro {
      background: #000000 !important;
      font-family: 'Courier New', monospace !important;
      image-rendering: pixelated;
      color: #00ff00 !important;
      background: 
        repeating-linear-gradient(
          0deg,
          #000000 0px,
          #004400 3px,
          #000000 6px
        ),
        repeating-linear-gradient(
          90deg,
          #000000 0px,
          #002200 3px,
          #000000 6px
        ) !important;
      background-size: 6px 6px !important;
    }
    body.retro * {
      font-family: 'Courier New', monospace !important;
      image-rendering: pixelated;
    }
    body.retro .modern-card {
      background: #0a0a0a !important;
      border: 4px solid #00ff00 !important;
      border-radius: 0 !important;
      box-shadow: 0 0 20px #00ff00 !important;
    }
    body.retro .retro-button {
      background: #003300 !important;
      border: 3px solid #00ff00 !important;
      border-radius: 0 !important;
      color: #00ff00 !important;
      font-weight: bold !important;
      padding: 8px 16px !important;
      text-shadow: 0 0 5px #00ff00;
    }
    body.retro .retro-button:hover {
      background: #005500 !important;
      box-shadow: 0 0 15px #00ff00;
    }
    
    body.retro #themeToggle,
    body.retro .page-content button,
    body.retro .menu-overlay button {
      background: #001a00 !important;
      color: #33ff33 !important;
      border: 2px solid #33ff33 !important;
      text-shadow: 0 0 3px #33ff33 !important;
    }
    body.retro #themeToggle:hover,
    body.retro .page-content button:hover {
      background: #003300 !important;
      color: #66ff66 !important;
    }
    
    body.retro .text-gray-500,
    body.retro .text-gray-600,
    body.retro .text-gray-700,
    body.retro .text-gray-800,
    body.retro p:not(.font-bold):not(h1):not(h2):not(h3) {
      color: #33ff33 !important;
      text-shadow: 0 0 2px #33ff33 !important;
    }
    
    body.retro .score-card {
      border: 3px solid #00ff00 !important;
      border-radius: 0 !important;
      box-shadow: 0 0 10px currentColor !important;
      background: #001a00 !important;
    }
    body.retro h1, body.retro h2, body.retro h3 {
      color: #00ff00 !important;
      text-shadow: 2px 2px 0 #003300, 0 0 10px #00ff00 !important;
    }
    body.retro p, body.retro div, body.retro span, body.retro label {
      color: #00ff00 !important;
    }
    body.retro .text-gray-700, body.retro .text-gray-600, body.retro .text-gray-500, body.retro .text-gray-800 {
      color: #00ff00 !important;
    }
    body.retro .bg-gray-50, body.retro .bg-green-50, body.retro .bg-red-50 {
      background: #001a00 !important;
      border: 1px solid #003300 !important;
    }
    body.retro .bg-white {
      background: #000000 !important;
    }
    body.retro input {
      background: #000000 !important;
      border: 2px solid #00ff00 !important;
      color: #00ff00 !important;
    }
    body.retro input::placeholder {
      color: #006600 !important;
    }
    body.retro .menu-overlay {
      background: #000000 !important;
      border-right: 4px solid #00ff00 !important;
    }
    
    /* Make Pythia image 2x bigger */
    #pythiaLogo {
      width: 600px !important;
      height: auto !important;
      max-width: 45vw !important;
    }
    
    body.retro #pythiaLogo {
      width: 1200px !important;
      height: auto !important;
      max-width: 90vw !important;
    }
    
    /* Oracle text box styles */
    #oracleTextBox {
      max-width: 400px;
      padding: 24px;
      background: #001a00;
      border: 3px solid #00ff00;
      box-shadow: 0 0 20px #00ff00;
      font-family: 'Courier New', monospace;
      color: #00ff00;
      text-shadow: 0 0 5px #00ff00;
      line-height: 1.8;
    }
    
    #mainTagline {
      font-size: 2rem !important;
    }
    body.retro #mainTagline {
      font-size: 2.5rem !important;
    }
    
    body.retro .rivalry-item:nth-child(odd) {
      background: #004400 !important;
      border: 2px solid #00ff00 !important;
      margin-bottom: 2px !important;
    }
    body.retro .rivalry-item:nth-child(even) {
      background: #002200 !important;
      border: 2px solid #00aa00 !important;
      margin-bottom: 2px !important;
    }
    body.retro #scanResults .score-card,
    body.retro #contestant1Results,
    body.retro #contestant2Results,
    body.retro #winnerAnnouncement {
      color: #00ff66 !important;
      text-shadow: 0 0 8px #00ff66 !important;
    }
    body.retro #scanResults .score-card .text-2xl,
    body.retro #scanResults .score-card .text-3xl,
    body.retro #contestant1Results .text-3xl,
    body.retro #contestant2Results .text-3xl {
      color: #00ff66 !important;
      text-shadow: 0 0 15px #00ff66, 0 0 25px #00ff00 !important;
      font-weight: 900 !important;
    }
    body.retro #winnerAnnouncement {
      background: #003300 !important;
      border: 4px solid #00ff66 !important;
      color: #00ff66 !important;
      text-shadow: 0 0 10px #00ff66, 2px 2px 0 #001100 !important;
    }
    
    body.retro #themeToggle {
      color: #33ff33 !important;
      border-color: #33ff33 !important;
      background: #001a00 !important;
      text-shadow: 0 0 5px #33ff33 !important;
    }
    
    body.retro .rivalry-item {
      padding: 8px !important;
    }
    
    .tm-super {
      font-size: 0.6em;
      vertical-align: super;
      font-weight: normal;
    }
  </style>
</head>
<body class="retro loading-pixels">
  
  <!-- Boot Sequence -->
  <div id="bootSequence">
    <div id="bootTerminal">
      <div class="boot-line">PYTHIA‚Ñ¢ ORACLE v4.2.0</div>
      <div class="boot-line">Copyright ¬© 2025 Pythia Systems</div>
      <div class="boot-line">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
      <div class="boot-line">Initializing Oracle Neural Core...</div>
      <div class="boot-line">Loading Performance Analysis Modules...</div>
      <div class="boot-line">Calibrating Metrics Engine...</div>
      <div class="boot-line">Establishing Quantum Link...</div>
      <div class="boot-line">Synchronizing with Ancient Wisdom Database...</div>
      <div class="boot-line">Validating Cryptographic Signatures...</div>
      <div class="boot-line">Mounting Prophecy Subsystems...</div>
      <div class="boot-line">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>
      <div class="boot-line">‚úì All Systems Operational</div>
      <div class="boot-line">‚úì Oracle Ready</div>
      <div class="boot-line">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
      <div class="boot-line">READY TO DIVINE THE TRUTH...<span class="boot-cursor">_</span></div>
    </div>
  </div>
  
  <!-- Pixel Overlay for fade-in effect -->
  <div id="pixelOverlay"></div>

  <!-- Sound Toggle Button -->
  <button id="soundToggle" title="Toggle Sounds">üîä</button>

  <!-- Menu Backdrop -->
  <div class="menu-backdrop" id="menuBackdrop"></div>
  
  <!-- Side Menu Overlay -->
  <div class="menu-overlay" id="menuOverlay">
    <div class="p-6">
      <button id="closeMenuBtn" class="mb-6 px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">‚úï CLOSE</button>
      
      <h2 class="text-2xl font-bold mb-4">PYTHIA<span class="tm-super">TM</span> MENU</h2>
      
      <nav class="space-y-3">
        <button class="menu-nav-btn w-full text-left px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded font-semibold" data-page="home">üè† HOME</button>
        <button class="menu-nav-btn w-full text-left px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded font-semibold" data-page="battle">‚öîÔ∏è BATTLE MODE</button>
        <button class="menu-nav-btn w-full text-left px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded font-semibold" data-page="top50">üèÜ TOP 50 SCAN</button>
        <button class="menu-nav-btn w-full text-left px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded font-semibold" data-page="about">üìñ ABOUT</button>
        <button class="menu-nav-btn w-full text-left px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded font-semibold" data-page="share">üöÄ SHARE</button>
      </nav>
      
      <div class="mt-8 pt-6 border-t border-gray-300">
        <button id="themeToggle" class="w-full px-4 py-3 bg-indigo-600 text-white rounded hover:bg-indigo-700 font-bold">
          üåô BORING MODE
        </button>
      </div>
    </div>
  </div>
  
  <!-- Main Content -->
  <div id="mainContent" class="min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
      
      <!-- Header -->
      <div class="flex justify-between items-center mb-8">
        <button id="hamburgerBtn" class="text-3xl font-bold cursor-pointer">‚ò∞</button>
        <h1 class="text-4xl font-bold text-center flex-1">PYTHIA<span class="tm-super">TM</span></h1>
        <div style="width: 48px;"></div>
      </div>
      
      <!-- HOME PAGE -->
      <div id="homePage" class="page-content active">
        
        <!-- Hero Section with Oracle Text and Pythia Image -->
        <div class="flex flex-wrap items-center justify-center gap-8 mb-12">
          <!-- Oracle Text Box (LEFT of image) -->
          <div id="oracleTextBox" class="flex-shrink-0">
            <p class="text-sm leading-relaxed">
              At Delphi in ancient Greece, the Pythia<span class="tm-super">TM</span> spoke cryptic truths from the gods. Now seek her oracle wisely ‚Äî your site awaits her verdict!
            </p>
          </div>
          
          <!-- Pythia Logo -->
          <img id="pythiaLogo" src="pythia-oracle.png" alt="Pythia Oracle" class="flex-shrink-0">
        </div>
        
        <h2 id="mainTagline" class="text-center font-bold mb-8 text-indigo-600">ONE SCORE TO RANK THEM ALL</h2>
        
        <!-- Scanner Card -->
        <div class="modern-card bg-white rounded-xl shadow-lg p-8 mb-8 max-w-2xl mx-auto">
          <h3 class="text-2xl font-bold mb-4 text-center">CONSULT THE ORACLE</h3>
          <p class="text-gray-600 mb-6 text-center">Enter any website URL to receive Pythia<span class="tm-super">TM</span>'s divine assessment</p>
          
          <div class="flex gap-3 mb-4">
            <input 
              type="text" 
              id="urlInput" 
              placeholder="https://example.com" 
              class="flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500"
            >
            <button 
              id="scanBtn" 
              class="retro-button px-6 py-3 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700"
            >
              üîÆ SCAN
            </button>
          </div>
          
          <div id="scanStatus" class="text-center text-sm text-gray-500 mb-4 hidden">
            <div class="flex items-center justify-center gap-2">
              <div class="retro-spinner"></div>
              <span>Consulting the Oracle...</span>
            </div>
          </div>
          
          <div id="scanResults" class="hidden">
            <div class="text-center mb-6">
              <h4 class="text-xl font-bold mb-2">THE ORACLE HAS SPOKEN</h4>
              <div class="text-5xl font-bold text-indigo-600 my-4 typing-text" id="pscoreDisplay"></div>
              <p class="text-sm text-gray-500" id="scannedUrl"></p>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-5 gap-3 mb-6">
              <div class="score-card bg-gray-50 p-3 rounded text-center">
                <div class="text-xs text-gray-500 mb-1">SPEED</div>
                <div class="text-2xl font-bold" id="karpovScore">--</div>
              </div>
              <div class="score-card bg-gray-50 p-3 rounded text-center">
                <div class="text-xs text-gray-500 mb-1">ACCESS</div>
                <div class="text-2xl font-bold" id="vortexScore">--</div>
              </div>
              <div class="score-card bg-gray-50 p-3 rounded text-center">
                <div class="text-xs text-gray-500 mb-1">SCALE</div>
                <div class="text-2xl font-bold" id="novaScore">--</div>
              </div>
              <div class="score-card bg-gray-50 p-3 rounded text-center">
                <div class="text-xs text-gray-500 mb-1">TECH</div>
                <div class="text-2xl font-bold" id="aetherScore">--</div>
              </div>
              <div class="score-card bg-gray-50 p-3 rounded text-center">
                <div class="text-xs text-gray-500 mb-1">SEO</div>
                <div class="text-2xl font-bold" id="pulseScore">--</div>
              </div>
            </div>
            
            <div class="flex gap-3">
              <button id="shareBtn" class="flex-1 px-4 py-2 bg-green-600 text-white rounded font-bold hover:bg-green-700">
                üì§ SHARE
              </button>
              <button id="addToRivalryBtn" class="flex-1 px-4 py-2 bg-purple-600 text-white rounded font-bold hover:bg-purple-700">
                ‚öîÔ∏è ADD TO RIVALRY
              </button>
              <button id="addToLeaderboardBtn" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded font-bold hover:bg-blue-700">
                üèÜ LEADERBOARD
              </button>
            </div>
          </div>
        </div>
        
        <!-- Leaderboard Section -->
        <div class="modern-card bg-white rounded-xl shadow-lg p-8 mb-8 max-w-2xl mx-auto">
          <h3 class="text-2xl font-bold mb-4 text-center">üèÜ PYTHIA<span class="tm-super">TM</span> LEADERBOARD</h3>
          <p class="text-gray-600 mb-6 text-center text-sm">Your personal hall of champions</p>
          <div id="leaderboardList" class="space-y-2">
            <p class="text-center text-gray-400 italic">No sites scanned yet. The leaderboard awaits...</p>
          </div>
        </div>
        
        <!-- Rivalries Section -->
        <div class="modern-card bg-white rounded-xl shadow-lg p-8 max-w-2xl mx-auto">
          <h3 class="text-2xl font-bold mb-4 text-center">‚öîÔ∏è YOUR RIVALRIES</h3>
          <p class="text-gray-600 mb-6 text-center text-sm">Legendary battles preserved in the Oracle's archives</p>
          <div id="rivalriesList" class="space-y-3">
            <p class="text-center text-gray-400 italic">No rivalries yet. Add sites and declare battle!</p>
          </div>
        </div>
        
      </div>
      
      <!-- BATTLE MODE PAGE -->
      <div id="battlePage" class="page-content">
        <h2 class="text-3xl font-bold mb-8 text-center">‚öîÔ∏è BATTLE MODE</h2>
        
        <div class="modern-card bg-white rounded-xl shadow-lg p-8 mb-8 max-w-3xl mx-auto">
          <p class="text-center text-gray-600 mb-6">Pit two websites against each other in epic combat! Pythia<span class="tm-super">TM</span> will crown the champion.</p>
          
          <div class="grid md:grid-cols-2 gap-6 mb-6">
            <div>
              <label class="block text-sm font-bold mb-2">CONTESTANT 1</label>
              <input 
                type="text" 
                id="battleUrl1" 
                placeholder="https://site1.com" 
                class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg"
              >
              <input 
                type="text" 
                id="battleName1" 
                placeholder="Name (optional)" 
                class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg mt-2"
              >
            </div>
            <div>
              <label class="block text-sm font-bold mb-2">CONTESTANT 2</label>
              <input 
                type="text" 
                id="battleUrl2" 
                placeholder="https://site2.com" 
                class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg"
              >
              <input 
                type="text" 
                id="battleName2" 
                placeholder="Name (optional)" 
                class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg mt-2"
              >
            </div>
          </div>
          
          <button 
            id="battleBtn" 
            class="w-full retro-button px-6 py-4 bg-red-600 text-white rounded-lg font-bold text-xl hover:bg-red-700"
          >
            ‚öîÔ∏è COMMENCE BATTLE!
          </button>
          
          <div id="battleStatus" class="text-center text-sm text-gray-500 mt-4 hidden">
            <div class="flex items-center justify-center gap-2">
              <div class="retro-spinner"></div>
              <span>Battle in progress...</span>
            </div>
          </div>
        </div>
        
        <div id="battleResults" class="hidden max-w-4xl mx-auto">
          <div class="grid md:grid-cols-2 gap-6 mb-6">
            <div class="modern-card bg-white rounded-xl shadow-lg p-6">
              <div id="contestant1Results"></div>
            </div>
            <div class="modern-card bg-white rounded-xl shadow-lg p-6">
              <div id="contestant2Results"></div>
            </div>
          </div>
          
          <div id="winnerAnnouncement" class="modern-card bg-green-50 rounded-xl shadow-lg p-8 text-center">
          </div>
          
          <button id="shareRivalryBtn" class="w-full mt-6 px-6 py-3 bg-purple-600 text-white rounded-lg font-bold hover:bg-purple-700">
            üì§ SHARE BATTLE RESULTS
          </button>
        </div>
      </div>
      
      <!-- TOP 50 SCAN PAGE -->
      <div id="top50Page" class="page-content">
        <h2 class="text-3xl font-bold mb-8 text-center">üèÜ TOP 50 WEBSITES SCAN</h2>
        
        <div class="modern-card bg-white rounded-xl shadow-lg p-8 mb-8 max-w-3xl mx-auto">
          <p class="text-center text-gray-600 mb-6">Scan the world's most popular websites and see who reigns supreme in Pythia<span class="tm-super">TM</span>'s eyes!</p>
          
          <button 
            id="scanTop50Btn" 
            class="w-full retro-button px-6 py-4 bg-indigo-600 text-white rounded-lg font-bold text-xl hover:bg-indigo-700"
          >
            üöÄ SCAN TOP 50 WEBSITES
          </button>
          
          <div id="top50Loading" class="text-center mt-6 hidden">
            <div class="flex items-center justify-center gap-2 mb-2">
              <div class="retro-spinner"></div>
              <span class="text-gray-600 font-bold">Scanning in progress...</span>
            </div>
            <p id="scanProgress" class="text-sm text-gray-500">Preparing scan...</p>
          </div>
        </div>
        
        <div id="top50Results" class="hidden max-w-4xl mx-auto">
          <div class="grid md:grid-cols-2 gap-6">
            <div class="modern-card bg-white rounded-xl shadow-lg p-6">
              <h3 class="text-xl font-bold mb-4 text-green-600">‚ú® TOP 10 CHAMPIONS</h3>
              <div id="top50TopList" class="space-y-2"></div>
            </div>
            <div class="modern-card bg-white rounded-xl shadow-lg p-6">
              <h3 class="text-xl font-bold mb-4 text-red-600">üíÄ BOTTOM 10 LAGGARDS</h3>
              <div id="top50BottomList" class="space-y-2"></div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- ABOUT PAGE -->
      <div id="aboutPage" class="page-content">
        <div class="modern-card bg-white rounded-xl shadow-lg p-8 max-w-3xl mx-auto">
          <h2 class="text-3xl font-bold mb-6 text-center">üìñ ABOUT PYTHIA<span class="tm-super">TM</span></h2>
          
          <div class="prose max-w-none">
            <p class="mb-4">Pythia<span class="tm-super">TM</span> is the world's first AI-powered website performance oracle, channeling ancient wisdom through modern technology to deliver ONE SCORE TO RANK THEM ALL.</p>
            
            <h3 class="text-xl font-bold mt-6 mb-3">THE TEN DIVINE METRICS</h3>
            <ul class="space-y-2 mb-6">
              <li><strong>KARPOV (Speed)</strong> - Page load time and performance</li>
              <li><strong>VORTEX (Accessibility)</strong> - Inclusive design and usability</li>
              <li><strong>NOVA (Scalability)</strong> - CDN and infrastructure quality</li>
              <li><strong>AETHER (Tech)</strong> - Modern frameworks and innovation</li>
              <li><strong>PULSE (SEO)</strong> - Search engine optimization</li>
              <li><strong>EDEN (Efficiency)</strong> - Page weight and resource usage</li>
              <li><strong>HELIX (Privacy)</strong> - Security headers and tracking</li>
              <li><strong>ECHO (Green)</strong> - Environmental sustainability</li>
              <li><strong>QUANTUM (Code Quality)</strong> - Best practices and standards</li>
              <li><strong>NEXUS (Mobile)</strong> - Responsive design</li>
            </ul>
            
            <p class="mb-4">The P-SCORE synthesizes all ten metrics into a single, definitive judgment. May your sites find favor with the Oracle!</p>
            
            <p class="text-sm text-gray-500 italic mt-6">BETA v4.2.0 | ¬© 2025 Pythia<span class="tm-super">TM</span> Systems</p>
          </div>
        </div>
      </div>
      
      <!-- SHARE PAGE -->
      <div id="sharePage" class="page-content">
        <div class="modern-card bg-white rounded-xl shadow-lg p-8 max-w-2xl mx-auto">
          <h2 class="text-3xl font-bold mb-6 text-center">üöÄ SPREAD THE PROPHECY</h2>
          
          <p class="text-center text-gray-600 mb-8">Share Pythia<span class="tm-super">TM</span> with the world and help others discover the truth about their websites!</p>
          
          <div class="grid grid-cols-2 gap-4">
            <button onclick="shareOn('twitter')" class="px-6 py-4 bg-blue-400 text-white rounded-lg font-bold hover:bg-blue-500">
              üê¶ TWITTER
            </button>
            <button onclick="shareOn('facebook')" class="px-6 py-4 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700">
              üìò FACEBOOK
            </button>
            <button onclick="shareOn('whatsapp')" class="px-6 py-4 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600">
              üí¨ WHATSAPP
            </button>
            <button onclick="shareOn('email')" class="px-6 py-4 bg-gray-600 text-white rounded-lg font-bold hover:bg-gray-700">
              ‚úâÔ∏è EMAIL
            </button>
          </div>
        </div>
      </div>
      
    </div>
  </div>
  
  <!-- Audio Elements for Retro Sounds -->
  <audio id="clickSound" preload="auto">
    <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=" type="audio/wav">
  </audio>
  <audio id="beepSound" preload="auto">
    <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=" type="audio/wav">
  </audio>
  
  <script>
    // === SOUND SYSTEM ===
    let soundEnabled = true;
    const clickSound = document.getElementById('clickSound');
    const beepSound = document.getElementById('beepSound');
    
    // Generate simple beep sounds using Web Audio API
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    
    function playClick() {
      if (!soundEnabled) return;
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.frequency.value = 800;
      oscillator.type = 'square';
      gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.1);
    }
    
    function playBeep() {
      if (!soundEnabled) return;
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.frequency.value = 1200;
      oscillator.type = 'sine';
      gainNode.gain.setValueAtTime(0.15, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.15);
    }
    
    document.getElementById('soundToggle').addEventListener('click', () => {
      soundEnabled = !soundEnabled;
      const btn = document.getElementById('soundToggle');
      if (soundEnabled) {
        btn.textContent = 'üîä';
        btn.classList.remove('muted');
        playBeep();
      } else {
        btn.textContent = 'üîá';
        btn.classList.add('muted');
      }
    });
    
    // Add click sounds to all buttons
    document.addEventListener('click', (e) => {
      if (e.target.tagName === 'BUTTON') {
        playClick();
      }
    });
    
    // === BOOT SEQUENCE ===
    window.addEventListener('DOMContentLoaded', () => {
      const bootSequence = document.getElementById('bootSequence');
      const bootLines = document.querySelectorAll('.boot-line');
      
      // Animate boot lines
      let currentLine = 0;
      function showNextLine() {
        if (currentLine < bootLines.length) {
          const delays = [0, 100, 200, 300, 500, 700, 900, 1100, 1300, 1500, 1700, 2100, 2300, 2500, 3000];
          const delay = delays[currentLine] || 100;
          
          setTimeout(() => {
            bootLines[currentLine].style.opacity = '1';
            playBeep();
            currentLine++;
            showNextLine();
          }, delay);
        } else {
          // Boot complete, pause then fade out
          setTimeout(() => {
            bootSequence.style.transition = 'opacity 0.5s';
            bootSequence.style.opacity = '0';
            setTimeout(() => {
              bootSequence.classList.add('hidden');
              document.body.classList.remove('loading-pixels');
              startPixelFadeIn();
            }, 500);
          }, 2000);
        }
      }
      
      showNextLine();
    });
    
    // === PIXELLATED FADE-IN ===
    function startPixelFadeIn() {
      const overlay = document.getElementById('pixelOverlay');
      const cellCount = 1200; // 40x30 grid
      
      // Create pixel cells
      for (let i = 0; i < cellCount; i++) {
        const cell = document.createElement('div');
        cell.className = 'pixel-cell';
        overlay.appendChild(cell);
      }
      
      const cells = overlay.querySelectorAll('.pixel-cell');
      const indices = Array.from({ length: cellCount }, (_, i) => i);
      
      // Shuffle array for random order
      for (let i = indices.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [indices[i], indices[j]] = [indices[j], indices[i]];
      }
      
      // Fade cells in random order over 2 seconds
      const totalTime = 2000;
      const interval = totalTime / cellCount;
      
      indices.forEach((index, i) => {
        setTimeout(() => {
          cells[index].classList.add('fade');
        }, i * interval);
      });
      
      // Remove overlay after animation
      setTimeout(() => {
        overlay.style.display = 'none';
      }, totalTime + 300);
    }
    
    // === THEME TOGGLE ===
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    
    // Start in retro mode
    let isRetro = true;
    
    themeToggle.addEventListener('click', () => {
      isRetro = !isRetro;
      body.classList.toggle('retro');
      themeToggle.textContent = isRetro ? 'üåô BORING MODE' : 'üéÆ RETRO MODE';
      playBeep();
    });
    
    // === MENU NAVIGATION ===
    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const menuOverlay = document.getElementById('menuOverlay');
    const menuBackdrop = document.getElementById('menuBackdrop');
    const closeMenuBtn = document.getElementById('closeMenuBtn');
    const menuNavBtns = document.querySelectorAll('.menu-nav-btn');
    const pages = {
      home: document.getElementById('homePage'),
      battle: document.getElementById('battlePage'),
      top50: document.getElementById('top50Page'),
      about: document.getElementById('aboutPage'),
      share: document.getElementById('sharePage')
    };
    
    function openMenu() {
      menuOverlay.classList.add('open');
      menuBackdrop.classList.add('open');
    }
    
    function closeMenu() {
      menuOverlay.classList.remove('open');
      menuBackdrop.classList.remove('open');
    }
    
    function showPage(pageName) {
      Object.values(pages).forEach(page => page.classList.remove('active'));
      pages[pageName].classList.add('active');
      closeMenu();
      window.scrollTo(0, 0);
    }
    
    hamburgerBtn.addEventListener('click', openMenu);
    closeMenuBtn.addEventListener('click', closeMenu);
    menuBackdrop.addEventListener('click', closeMenu);
    
    menuNavBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const page = btn.getAttribute('data-page');
        showPage(page);
      });
    });
    
    // === CACHE SYSTEM ===
    const CACHE_DURATION = 5 * 60 * 1000; // 5 minutes
    
    function getCachedScan(url) {
      const cached = localStorage.getItem(`scan_${url}`);
      if (!cached) return null;
      
      const data = JSON.parse(cached);
      if (Date.now() - data.timestamp > CACHE_DURATION) {
        localStorage.removeItem(`scan_${url}`);
        return null;
      }
      return data.result;
    }
    
    function setCachedScan(url, result) {
      const data = { timestamp: Date.now(), result };
      localStorage.setItem(`scan_${url}`, JSON.stringify(data));
    }
    
    // === LEADERBOARD SYSTEM ===
    function getLeaderboard() {
      const data = localStorage.getItem('pythia_leaderboard');
      return data ? JSON.parse(data) : [];
    }
    
    function saveToLeaderboard(url, pscore) {
      let leaderboard = getLeaderboard();
      const existing = leaderboard.findIndex(item => item.url === url);
      
      if (existing !== -1) {
        leaderboard[existing] = { url, pscore, date: new Date().toLocaleDateString() };
      } else {
        leaderboard.push({ url, pscore, date: new Date().toLocaleDateString() });
      }
      
      leaderboard.sort((a, b) => b.pscore - a.pscore);
      leaderboard = leaderboard.slice(0, 20);
      localStorage.setItem('pythia_leaderboard', JSON.stringify(leaderboard));
      updateLeaderboardDisplay();
    }
    
    function updateLeaderboardDisplay() {
      const leaderboard = getLeaderboard();
      const container = document.getElementById('leaderboardList');
      
      if (leaderboard.length === 0) {
        container.innerHTML = '<p class="text-center text-gray-400 italic">No sites scanned yet. The leaderboard awaits...</p>';
        return;
      }
      
      container.innerHTML = leaderboard.map((item, i) => `
        <div class="leaderboard-entry flex justify-between items-center p-3 rounded ${i < 3 ? 'bg-green-50' : 'bg-gray-50'}">
          <span class="font-bold text-gray-700">${i + 1}. ${new URL(item.url).hostname}</span>
          <span class="text-xl font-bold ${i < 3 ? 'text-green-600' : 'text-gray-600'}">${item.pscore}</span>
        </div>
      `).join('');
    }
    
    // === RIVALRY SYSTEM ===
    function getRivalries() {
      const data = localStorage.getItem('pythia_rivalries');
      return data ? JSON.parse(data) : [];
    }
    
    function saveRivalry(url, pscore) {
      let rivalries = getRivalries();
      rivalries.push({ url, pscore, date: new Date().toLocaleDateString() });
      localStorage.setItem('pythia_rivalries', JSON.stringify(rivalries));
      renderRivalries();
    }
    
    function removeRivalry(index) {
      let rivalries = getRivalries();
      rivalries.splice(index, 1);
      localStorage.setItem('pythia_rivalries', JSON.stringify(rivalries));
      renderRivalries();
    }
    
    function renderRivalries() {
      const rivalries = getRivalries();
      const container = document.getElementById('rivalriesList');
      
      if (rivalries.length === 0) {
        container.innerHTML = '<p class="text-center text-gray-400 italic">No rivalries yet. Add sites and declare battle!</p>';
        return;
      }
      
      container.innerHTML = rivalries.map((item, i) => `
        <div class="rivalry-item flex justify-between items-center p-3 rounded bg-gray-50">
          <div>
            <div class="font-bold text-gray-700">${new URL(item.url).hostname}</div>
            <div class="text-xs text-gray-500">${item.date}</div>
          </div>
          <div class="flex items-center gap-3">
            <span class="text-lg font-bold text-purple-600">${item.pscore}</span>
            <button onclick="removeRivalry(${i})" class="text-red-500 hover:text-red-700">‚úï</button>
          </div>
        </div>
      `).join('');
    }
    
    // === MAIN SCANNER ===
    let lastScanResult = null;
    
    document.getElementById('scanBtn').addEventListener('click', scanWebsite);
    document.getElementById('urlInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') scanWebsite();
    });
    
    async function scanWebsite() {
      const urlInput = document.getElementById('urlInput');
      const url = urlInput.value.trim();
      
      if (!url) {
        alert('Please enter a URL');
        return;
      }
      
      const scanBtn = document.getElementById('scanBtn');
      const scanStatus = document.getElementById('scanStatus');
      const scanResults = document.getElementById('scanResults');
      
      scanBtn.disabled = true;
      scanBtn.innerHTML = '<div class="retro-spinner"></div>';
      scanStatus.classList.remove('hidden');
      scanResults.classList.add('hidden');
      
      playBeep();
      
      try {
        const cached = getCachedScan(url);
        let data;
        
        if (cached) {
          data = cached;
          await new Promise(resolve => setTimeout(resolve, 500));
        } else {
          const response = await fetch('/api/scan', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ url })
          });
          
          if (!response.ok) {
            throw new Error(`Scan failed: ${response.status}`);
          }
          
          data = await response.json();
          setCachedScan(url, data);
        }
        
        lastScanResult = { url, ...data };
        
        // Display results with typing animation
        document.getElementById('pscoreDisplay').textContent = data.pscore;
        document.getElementById('scannedUrl').textContent = url;
        document.getElementById('karpovScore').textContent = data.karpov;
        document.getElementById('vortexScore').textContent = data.vortex;
        document.getElementById('novaScore').textContent = data.nova;
        document.getElementById('aetherScore').textContent = data.aether;
        document.getElementById('pulseScore').textContent = data.pulse;
        
        scanResults.classList.remove('hidden');
        
        // Reset typing animation
        const typingEl = document.getElementById('pscoreDisplay');
        typingEl.classList.remove('done');
        typingEl.classList.add('typing-text');
        setTimeout(() => {
          typingEl.classList.add('done');
        }, 2000);
        
        playBeep();
        
      } catch (error) {
        alert(`Scan failed: ${error.message}`);
      } finally {
        scanBtn.disabled = false;
        scanBtn.innerHTML = 'üîÆ SCAN';
        scanStatus.classList.add('hidden');
      }
    }
    
    // === SHARE RESULTS ===
    document.getElementById('shareBtn').addEventListener('click', () => {
      if (lastScanResult) {
        const text = `I scanned ${lastScanResult.url} with Pythia‚Ñ¢ Oracle and got a P-SCORE of ${lastScanResult.pscore}! üîÆ`;
        shareContent(text, window.location.href);
      }
    });
    
    document.getElementById('addToRivalryBtn').addEventListener('click', () => {
      if (lastScanResult) {
        saveRivalry(lastScanResult.url, lastScanResult.pscore);
        alert('Added to rivalries!');
      }
    });
    
    document.getElementById('addToLeaderboardBtn').addEventListener('click', () => {
      if (lastScanResult) {
        saveToLeaderboard(lastScanResult.url, lastScanResult.pscore);
        alert('Added to leaderboard!');
      }
    });
    
    // === BATTLE MODE ===
    let currentBattleData = null;
    document.getElementById('battleBtn').addEventListener('click', runBattle);
    
    async function runBattle() {
      const url1 = document.getElementById('battleUrl1').value.trim();
      const url2 = document.getElementById('battleUrl2').value.trim();
      const name1 = document.getElementById('battleName1').value.trim() || new URL(url1).hostname;
      const name2 = document.getElementById('battleName2').value.trim() || new URL(url2).hostname;
      
      if (!url1 || !url2) {
        alert('Please enter both URLs');
        return;
      }
      
      const btn = document.getElementById('battleBtn');
      const status = document.getElementById('battleStatus');
      
      btn.disabled = true;
      btn.innerHTML = '<div class="retro-spinner"></div> BATTLE IN PROGRESS...';
      status.classList.remove('hidden');
      
      playBeep();
      
      try {
        const [result1, result2] = await Promise.all([
          scanUrl(url1),
          scanUrl(url2)
        ]);
        
        const winner = result1.pscore > result2.pscore ? name1 : 
                       result2.pscore > result1.pscore ? name2 : 'TIE';
        
        const battleDate = new Date().toLocaleString('en-US', { 
          month: 'short', 
          day: 'numeric', 
          year: 'numeric' 
        });
        
        currentBattleData = { name1, name2, result1, result2, winner, battleDate };
        
        document.getElementById('winnerAnnouncement').innerHTML = `
          <h3 class="text-3xl font-bold mb-4">üèÜ ${winner.toUpperCase()} WINS!</h3>
          <p class="text-lg">${name1}: ${result1.pscore} vs ${name2}: ${result2.pscore}</p>
          <p class="text-sm mt-2 text-gray-500">Battle Date: ${battleDate}</p>
        `;
        
        document.getElementById('contestant1Results').innerHTML = `
          <div class="text-center">
            <div class="text-xl font-bold mb-2">${name1}</div>
            <div class="text-3xl font-bold text-indigo-600">${result1.pscore}</div>
            <div class="text-xs text-gray-500 mt-2">
              Speed: ${result1.karpov} ‚Ä¢ Access: ${result1.vortex}<br>
              Scale: ${result1.nova} ‚Ä¢ Tech: ${result1.aether}
            </div>
          </div>
        `;
        
        document.getElementById('contestant2Results').innerHTML = `
          <div class="text-center">
            <div class="text-xl font-bold mb-2">${name2}</div>
            <div class="text-3xl font-bold text-purple-600">${result2.pscore}</div>
            <div class="text-xs text-gray-500 mt-2">
              Speed: ${result2.karpov} ‚Ä¢ Access: ${result2.vortex}<br>
              Scale: ${result2.nova} ‚Ä¢ Tech: ${result2.aether}
            </div>
          </div>
        `;
        
        document.getElementById('battleResults').classList.remove('hidden');
        setTimeout(() => {
          window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }, 100);
        
        playBeep();
        
      } catch (error) {
        alert(`Battle failed: ${error.message}`);
      } finally {
        btn.innerHTML = '‚öîÔ∏è COMMENCE BATTLE!';
        btn.disabled = false;
        status.classList.add('hidden');
      }
    }
    
    async function scanUrl(url) {
      const cached = getCachedScan(url);
      if (cached) return cached;
      
      const response = await fetch('/api/scan', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ url })
      });
      
      if (!response.ok) {
        throw new Error(`Failed to scan ${url}`);
      }
      
      const data = await response.json();
      setCachedScan(url, data);
      return data;
    }
    
    document.getElementById('shareRivalryBtn').addEventListener('click', () => {
      if (currentBattleData) {
        const { name1, name2, result1, result2, winner, battleDate } = currentBattleData;
        const text = `‚öîÔ∏è PYTHIA‚Ñ¢ BATTLE (${battleDate}): ${name1} (${result1.pscore}) v ${name2} (${result2.pscore}) - ${winner.toUpperCase()} WINS! üèÜ`;
        shareContent(text, window.location.href);
      }
    });
    
    // === TOP 50 SCANNER ===
    document.getElementById('scanTop50Btn').addEventListener('click', scanTop50Websites);
    
    async function scanTop50Websites() {
      const TOP_50_URLS = [
        'https://www.google.com', 'https://www.youtube.com', 'https://www.facebook.com',
        'https://www.x.com', 'https://www.instagram.com', 'https://www.linkedin.com',
        'https://www.reddit.com', 'https://www.wikipedia.org', 'https://www.amazon.com',
        'https://www.netflix.com', 'https://www.yahoo.com', 'https://www.ebay.com',
        'https://www.microsoft.com', 'https://www.apple.com', 'https://www.pinterest.com',
        'https://www.github.com', 'https://www.stackoverflow.com', 'https://www.twitch.tv',
        'https://www.wordpress.com', 'https://www.paypal.com', 'https://www.bbc.com',
        'https://www.cnn.com', 'https://www.nytimes.com', 'https://www.espn.com',
        'https://www.imdb.com', 'https://www.quora.com', 'https://www.medium.com',
        'https://www.tumblr.com', 'https://www.shopify.com', 'https://www.etsy.com',
        'https://www.target.com', 'https://www.walmart.com', 'https://www.bestbuy.com',
        'https://www.homedepot.com', 'https://www.ikea.com', 'https://www.spotify.com',
        'https://www.soundcloud.com', 'https://www.vimeo.com', 'https://www.dropbox.com',
        'https://www.zoom.us', 'https://www.salesforce.com', 'https://www.adobe.com',
        'https://www.oracle.com', 'https://www.ibm.com', 'https://www.cloudflare.com',
        'https://www.airbnb.com', 'https://www.booking.com', 'https://www.tripadvisor.com',
        'https://www.uber.com', 'https://www.tiktok.com'
      ];
      
      const btn = document.getElementById('scanTop50Btn');
      const loading = document.getElementById('top50Loading');
      const results = document.getElementById('top50Results');
      const progress = document.getElementById('scanProgress');
      
      btn.disabled = true;
      btn.innerHTML = '<div class="retro-spinner"></div> SCANNING...';
      loading.classList.remove('hidden');
      results.classList.add('hidden');
      
      playBeep();
      
      try {
        const scanResults = [];
        let completed = 0;
        
        for (let i = 0; i < TOP_50_URLS.length; i += 5) {
          const batch = TOP_50_URLS.slice(i, i + 5);
          
          const batchPromises = batch.map(async (url) => {
            const cached = getCachedScan(url);
            if (cached) {
              completed++;
              progress.textContent = `Scanned ${completed} of ${TOP_50_URLS.length} sites...`;
              return { url, pscore: cached.pscore };
            }
            
            try {
              const response = await fetch('/api/scan', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ url })
              });
              
              if (response.ok) {
                const data = await response.json();
                if (data && data.pscore !== undefined) {
                  setCachedScan(url, data);
                  completed++;
                  progress.textContent = `Scanned ${completed} of ${TOP_50_URLS.length} sites...`;
                  return { url, pscore: data.pscore };
                }
              }
            } catch (error) {
              console.error(`Failed ${url}:`, error.message);
            }
            return null;
          });
          
          const batchResults = await Promise.all(batchPromises);
          const validResults = batchResults.filter(r => r !== null && r.url && r.pscore !== undefined);
          scanResults.push(...validResults);
          
          await new Promise(resolve => setTimeout(resolve, 500));
        }
        
        if (scanResults.length >= 10) {
          const sorted = scanResults.sort((a, b) => b.pscore - a.pscore);
          const top10 = sorted.slice(0, 10);
          const bottom10 = sorted.slice(-10);
          
          const scanDate = new Date().toLocaleString('en-US', { 
            month: 'short', 
            day: 'numeric', 
            year: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit' 
          });
          
          document.getElementById('top50TopList').innerHTML = `
            <div class="text-xs text-gray-500 mb-3 italic">Scanned: ${scanDate} (${scanResults.length} sites)</div>
            ${top10.map((site, i) => `
              <div class="leaderboard-entry flex justify-between items-center p-2 rounded bg-green-50">
                <span class="text-sm font-bold text-gray-700">${i + 1}. ${new URL(site.url).hostname}</span>
                <span class="text-lg font-bold text-green-600">${site.pscore}</span>
              </div>
            `).join('')}
          `;
          
          document.getElementById('top50BottomList').innerHTML = `
            <div class="text-xs text-gray-500 mb-3 italic">Scanned: ${scanDate} (${scanResults.length} sites)</div>
            ${bottom10.reverse().map((site, i) => {
              const rank = sorted.length - (9 - i);
              return `
                <div class="leaderboard-entry flex justify-between items-center p-2 rounded bg-red-50">
                  <span class="text-sm font-bold text-gray-700">${rank}. ${new URL(site.url).hostname}</span>
                  <span class="text-lg font-bold text-red-600">${site.pscore}</span>
                </div>
              `;
            }).join('')}
          `;
          
          loading.classList.add('hidden');
          results.classList.remove('hidden');
          playBeep();
        } else {
          throw new Error(`Only ${scanResults.length} sites scanned successfully. Need at least 10.`);
        }
        
      } catch (error) {
        alert(`Top 50 scan failed: ${error.message}`);
      } finally {
        btn.innerHTML = 'üöÄ SCAN TOP 50 WEBSITES';
        btn.disabled = false;
        loading.classList.add('hidden');
      }
    }
    
    // === SOCIAL SHARING ===
    function shareOn(platform) {
      const text = 'Check out Pythia‚Ñ¢ - The ultimate website performance oracle! ONE SCORE TO RANK THEM ALL üîÆ';
      const url = window.location.href;
      shareContent(text, url, platform);
    }
    
    function shareContent(text, url, platform = null) {
      const encodedText = encodeURIComponent(text);
      const encodedUrl = encodeURIComponent(url);
      
      if (!platform) {
        if (navigator.share) {
          navigator.share({ title: 'Pythia‚Ñ¢', text, url });
        }
        return;
      }
      
      let shareUrl;
      switch(platform) {
        case 'twitter':
          shareUrl = `https://twitter.com/intent/tweet?text=${encodedText}&url=${encodedUrl}`;
          break;
        case 'facebook':
          shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`;
          break;
        case 'whatsapp':
          shareUrl = `https://wa.me/?text=${encodedText}%20${encodedUrl}`;
          break;
        case 'email':
          shareUrl = `mailto:?subject=${encodeURIComponent('Pythia‚Ñ¢')}&body=${encodedText}%20${encodedUrl}`;
          break;
      }
      
      if (shareUrl) {
        window.open(shareUrl, '_blank', 'width=600,height=400');
      }
    }
    
    // === INITIALIZE ===
    updateLeaderboardDisplay();
    renderRivalries();
  </script>
  
</body>
</html>
