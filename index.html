<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Optimization -->
  <title>Pythia - Website Performance Analysis Tool | One Score to Rank Them All</title>
  <meta name="description" content="Pythia is the ultimate website performance oracle analyzing speed, accessibility, SEO, privacy, and sustainability. Get one unified P-Score for any website in seconds.">
  <meta name="keywords" content="website performance, one score, site speed test, SEO analyzer, accessibility checker, website security, performance testing, web optimization, P-Score">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://pythia.pages.dev/">
  <meta property="og:title" content="Pythia - Website Performance Oracle | One Score to Rank Them All">
  <meta property="og:description" content="Complete website performance analysis in one unified P-Score. Measure speed, accessibility, SEO, privacy, sustainability and more.">
  <meta property="og:image" content="https://pythia.pages.dev/pythia-oracle.png">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://pythia.pages.dev/">
  <meta property="twitter:title" content="Pythia - Website Performance Analysis Tool">
  <meta property="twitter:description" content="One score to rank them all. Complete website performance oracle.">
  <meta property="twitter:image" content="https://pythia.pages.dev/pythia-oracle.png">
  
  <!-- Canonical -->
  <link rel="canonical" href="https://pythia.pages.dev/">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
      50% { box-shadow: 0 0 40px rgba(99, 102, 241, 0.6); }
    }
    .scanning { animation: pulse-glow 2s infinite; }
    
    .menu-overlay {
      position: fixed; top: 0; left: -100%; width: 80%; max-width: 400px; height: 100vh;
      background: white; box-shadow: 2px 0 10px rgba(0,0,0,0.3); transition: left 0.3s ease;
      z-index: 1000; overflow-y: auto;
    }
    .menu-overlay.open { left: 0; }
    .menu-backdrop {
      position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: rgba(0,0,0,0.5);
      opacity: 0; visibility: hidden; transition: all 0.3s ease; z-index: 999;
    }
    .menu-backdrop.open { opacity: 1; visibility: visible; }
    .page-content { display: none; }
    .page-content.active { display: block; }
    
    /* Retro Mode Styles */
    body.retro {
      background: #000000 !important;
      font-family: 'Courier New', monospace !important;
      image-rendering: pixelated;
      color: #00ff00 !important;
      background-image: 
        repeating-linear-gradient(0deg, transparent, transparent 2px, #001100 2px, #001100 4px),
        repeating-linear-gradient(90deg, transparent, transparent 2px, #001100 2px, #001100 4px);
      background-size: 40px 40px;
    }
    body.retro * {
      font-family: 'Courier New', monospace !important;
      image-rendering: pixelated;
    }
    body.retro .modern-card {
      background: #0a0a0a !important;
      border: 4px solid #00ff00 !important;
      border-radius: 0 !important;
      box-shadow: 0 0 20px #00ff00 !important;
    }
    body.retro .retro-button {
      background: #003300 !important;
      border: 3px solid #00ff00 !important;
      border-radius: 0 !important;
      color: #00ff00 !important;
      font-weight: bold !important;
      padding: 8px 16px !important;
      text-shadow: 0 0 5px #00ff00;
    }
    body.retro .retro-button:hover {
      background: #005500 !important;
      box-shadow: 0 0 15px #00ff00;
    }
    body.retro #themeToggle,
    body.retro .page-content button,
    body.retro .menu-overlay button {
      background: #001a00 !important;
      color: #33ff33 !important;
      border: 2px solid #33ff33 !important;
      text-shadow: 0 0 3px #33ff33 !important;
    }
    body.retro #themeToggle:hover,
    body.retro .page-content button:hover {
      background: #003300 !important;
      color: #66ff66 !important;
    }
    body.retro .text-gray-500,
    body.retro .text-gray-600,
    body.retro .text-gray-700,
    body.retro .text-gray-800,
    body.retro p:not(.font-bold):not(h1):not(h2):not(h3) {
      color: #33ff33 !important;
      text-shadow: 0 0 2px #33ff33 !important;
    }
    body.retro .score-card {
      border: 3px solid #00ff00 !important;
      border-radius: 0 !important;
      box-shadow: 0 0 10px currentColor !important;
      background: #001a00 !important;
    }
    body.retro h1, body.retro h2, body.retro h3 {
      color: #00ff00 !important;
      text-shadow: 2px 2px 0 #003300, 0 0 10px #00ff00 !important;
    }
    body.retro p, body.retro div, body.retro span, body.retro label {
      color: #00ff00 !important;
    }
    body.retro .bg-gray-50, body.retro .bg-green-50, body.retro .bg-red-50 {
      background: #001a00 !important;
      border: 1px solid #003300 !important;
    }
    body.retro .bg-white { background: #000000 !important; }
    body.retro input {
      background: #000000 !important;
      border: 2px solid #00ff00 !important;
      color: #00ff00 !important;
    }
    body.retro input::placeholder { color: #006600 !important; }
    body.retro .menu-overlay {
      background: #000000 !important;
      border-right: 4px solid #00ff00 !important;
    }
    
    body.retro #pythiaLogo {
      width: 160px !important;
      height: 160px !important;
    }
    
    #mainTagline {
      font-size: 2rem !important;
    }
    body.retro #mainTagline {
      font-size: 2.5rem !important;
    }
    
    body.retro {
      background: 
        repeating-linear-gradient(0deg, #000000 0px, #003300 2px, #000000 4px),
        repeating-linear-gradient(90deg, #000000 0px, #001a00 2px, #000000 4px) !important;
    }
    
    body.retro .rivalry-item:nth-child(odd) {
      background: #003300 !important;
      border: 2px solid #00ff00 !important;
    }
    body.retro .rivalry-item:nth-child(even) {
      background: #001a00 !important;
      border: 2px solid #006600 !important;
    }
    body.retro #scanResults .score-card,
    body.retro #contestant1Results,
    body.retro #contestant2Results,
    body.retro #winnerAnnouncement {
      color: #00ff66 !important;
      text-shadow: 0 0 8px #00ff66 !important;
    }
    body.retro #winnerAnnouncement {
      background: #003300 !important;
      border: 4px solid #00ff66 !important;
      color: #00ff66 !important;
      text-shadow: 0 0 10px #00ff66, 2px 2px 0 #001100 !important;
    }
    body.retro #themeToggle {
      color: #33ff33 !important;
      background: #002200 !important;
      text-shadow: 0 0 8px #33ff33, 1px 1px 2px #000 !important;
      font-weight: 900 !important;
      border: 3px solid #33ff33 !important;
    }
    body.retro .back-button,
    body.retro .about-content,
    body.retro .weighting-philosophy,
    body.retro .component-description {
      color: #33ff33 !important;
      text-shadow: 0 0 5px #33ff33, 1px 1px 0 #000 !important;
    }
    
    @keyframes sword-fight {
      0%, 100% { transform: rotate(-20deg) translateX(-5px); }
      25% { transform: rotate(20deg) translateX(5px); }
      50% { transform: rotate(-20deg) translateX(-5px); }
      75% { transform: rotate(20deg) translateX(5px); }
    }
    .sword-fighting {
      animation: sword-fight 0.6s infinite;
      display: inline-block;
    }
    
    .tooltip { position: relative; display: inline-block; }
    .tooltip .tooltiptext {
      visibility: hidden; width: 280px; background-color: #1f2937; color: #fff;
      text-align: left; border-radius: 8px; padding: 12px; position: absolute; z-index: 1000;
      bottom: 125%; left: 50%; margin-left: -140px; opacity: 0; transition: opacity 0.3s;
      font-size: 13px; line-height: 1.4; box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    }
    .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
    
    .leaderboard-entry { transition: all 0.2s; }
    .leaderboard-entry:hover {
      transform: translateX(4px);
      background: rgba(99, 102, 241, 0.1);
    }
    
    .cache-badge {
      display: inline-block; padding: 2px 8px; border-radius: 12px;
      font-size: 10px; font-weight: bold; margin-left: 8px;
    }
    .cache-live { background: #10b981; color: white; }
    .cache-stored { background: #6366f1; color: white; }
    
    .winner-icon {
      width: 80px; height: 80px; object-fit: contain; margin: 0 auto 1rem;
      border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 min-h-screen p-4 md:p-8">
  
  <div id="menuBackdrop" class="menu-backdrop" onclick="closeMenu()"></div>
  
  <div id="menuOverlay" class="menu-overlay">
    <div class="p-6">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-indigo-600">Menu</h2>
        <button onclick="closeMenu()" class="text-3xl text-gray-600 hover:text-gray-800">&times;</button>
      </div>
      <nav class="space-y-2">
        <button onclick="showPage('main')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-indigo-50 font-bold text-gray-700">üè† Home</button>
        <button onclick="showPage('pscore-explainer')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-indigo-50 font-bold text-gray-700">üìä P-Score Explainer</button>
        <button onclick="showPage('components')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-indigo-50 font-bold text-gray-700">üîß P-Score Components</button>
        <button onclick="showPage('custom')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-indigo-50 font-bold text-indigo-600">üíé Custom Scans (Premium)</button>
        <button onclick="showPage('about')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-indigo-50 font-bold text-gray-700">‚ÑπÔ∏è About</button>
      </nav>
    </div>
  </div>
  
  <div class="max-w-7xl mx-auto">
    
    <div id="mainPage" class="page-content active">
      
      <div class="text-center mb-6">
        <div class="flex justify-between items-center mb-2">
          <button id="hamburger" onclick="openMenu()" class="text-3xl text-gray-700 hover:text-indigo-600 transition">‚ò∞</button>
          <button id="themeToggle" class="px-4 py-2 bg-gray-200 rounded-lg text-sm font-bold hover:bg-gray-300 transition">üïπÔ∏è RETRO MODE</button>
        </div>
        <div class="flex items-center justify-center gap-4 mb-2">
          <img id="pythiaLogo" src="pythia-oracle.png" alt="Pythia Oracle" class="w-20 h-20" style="display:none; image-rendering: pixelated;">
          <h1 class="text-6xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">Pythia</h1>
        </div>
        <p class="text-gray-600 text-lg">Complete website performance oracle <span class="text-sm bg-yellow-200 px-2 py-1 rounded">BETA</span></p>
        <h2 id="mainTagline" class="text-xl font-bold text-indigo-600 mt-2 tracking-wide">ONE SCORE TO RANK THEM ALL</h2>
        <p class="text-xs text-gray-500 mt-2 max-w-2xl mx-auto"><strong>Disclaimer:</strong> Pythia is an independent analysis tool. Scores are heuristic-based and for informational purposes only.</p>
      </div>
      
      <div class="modern-card bg-white rounded-2xl shadow-xl p-6 mb-8">
        <div class="flex flex-col md:flex-row gap-4">
          <input id="urlInput" type="url" placeholder="https://example.com" class="flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-indigo-500 transition" aria-label="Enter website URL to analyze">
          <button id="scanBtn" class="retro-button px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold rounded-xl hover:from-indigo-700 hover:to-purple-700 transition transform hover:scale-105" aria-label="Analyze website performance">ANALYZE</button>
          <button id="exportBtn" class="retro-button px-6 py-3 bg-gray-600 text-white font-bold rounded-xl hover:bg-gray-700 transition" style="display:none;" aria-label="Export analysis results">üìä EXPORT</button>
        </div>
      </div>
      
      <div id="pscoreContainer" class="hidden mb-8">
        <div class="modern-card bg-gradient-to-br from-indigo-600 to-purple-700 rounded-2xl shadow-2xl p-8 text-center text-white">
          <div class="text-sm font-bold uppercase tracking-wider opacity-90 mb-2">Overall P-Score</div>
          <div id="pscoreValue" class="text-7xl font-bold mb-2" aria-live="polite">--</div>
          <div class="text-lg opacity-90">Performance ‚Ä¢ Sustainability ‚Ä¢ Future-Ready</div>
          <div id="siteInfo" class="text-sm opacity-75 mt-3"></div>
        </div>
      </div>
      
      <div id="resultsContainer" class="hidden grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8" role="region" aria-label="Website performance metrics"></div>
      
      <div id="leaderboard" class="hidden modern-card bg-white rounded-2xl shadow-xl p-6 mb-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">üèÜ Global Leaderboard</h2>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <h3 class="text-lg font-bold text-green-600 mb-3">Top 10 Sites (User Scanned)</h3>
            <div id="topSites" class="space-y-2"></div>
          </div>
          <div>
            <h3 class="text-lg font-bold text-red-600 mb-3">Bottom 10 Sites (User Scanned)</h3>
            <div id="bottomSites" class="space-y-2"></div>
          </div>
        </div>
      </div>
      
      <div class="grid lg:grid-cols-2 gap-8 mb-8">
        
        <!-- NEW: Enterprise Website of the Day -->
        <div class="modern-card bg-white rounded-2xl shadow-xl p-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-2">üåü Enterprise Website of the Day</h2>
          <p class="text-sm text-gray-600 mb-4">Random scan of 1,000 enterprise sites ‚Ä¢ Updated daily at 12:01 AM PT</p>
          <div id="enterpriseDailyResults" class="hidden">
            <div class="bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-lg border-2 border-yellow-400">
              <div class="text-center">
                <div class="text-sm font-bold text-gray-500 mb-2">üèÜ TODAY'S TOP PERFORMER</div>
                <div id="enterpriseWinner" class="text-2xl font-bold text-indigo-600 mb-2"></div>
                <div class="grid grid-cols-2 gap-2 text-sm">
                  <div class="bg-white p-2 rounded">
                    <div class="text-gray-500">P-Score</div>
                    <div id="enterprisePscore" class="text-2xl font-bold text-green-600"></div>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <div class="text-gray-500">Load Time</div>
                    <div id="enterpriseLoadTime" class="text-lg font-bold"></div>
                  </div>
                </div>
                <div id="enterpriseTotalScanned" class="text-xs text-gray-500 mt-3"></div>
                <a id="enterpriseLink" href="#" target="_blank" class="mt-3 inline-block px-4 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition">Visit Website ‚Üí</a>
              </div>
            </div>
          </div>
          <div id="enterpriseDailyLoading" class="text-center py-8">
            <div class="text-4xl mb-2">üåü</div>
            <div class="font-bold text-gray-700">Loading today's winner...</div>
            <div class="text-sm text-gray-500 mt-2">Scans 1,000 random enterprise sites daily</div>
          </div>
        </div>
        
        <div class="modern-card bg-white rounded-2xl shadow-xl p-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-2">‚öîÔ∏è Rivalry Battle Arena</h2>
          <p class="text-sm text-gray-600 mb-4">Pit legendary rivals against each other</p>
          <div class="mb-6">
            <h3 class="text-lg font-bold text-indigo-600 mb-3">Epic Rivalries</h3>
            <div id="rivalryList" class="max-h-96 overflow-y-auto space-y-2 border rounded-lg p-3"></div>
          </div>
          <div class="border-t pt-6">
            <h3 class="text-lg font-bold text-purple-600 mb-3">Custom Battle</h3>
            <div class="grid gap-4 mb-4">
              <input id="customUrl1" type="url" placeholder="https://example1.com" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-indigo-500" aria-label="First competitor URL">
              <input id="customUrl2" type="url" placeholder="https://example2.com" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-indigo-500" aria-label="Second competitor URL">
            </div>
            <button id="customBattleBtn" class="retro-button w-full py-3 bg-purple-600 text-white font-bold rounded-lg hover:bg-purple-700 transition">‚öîÔ∏è START CUSTOM BATTLE</button>
          </div>
        </div>
      </div>
      
      <div class="modern-card bg-white rounded-2xl shadow-xl p-6 mb-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-2">üåç World's Top 50 Websites</h2>
        <p class="text-sm text-gray-600 mb-4">Daily scan at 12:01 AM PT ‚Ä¢ Cached for 24 hours</p>
        <div id="top50Results" class="hidden">
          <h3 class="text-lg font-bold text-green-600 mb-3">ü•á Top 10 Global Sites</h3>
          <div id="top50TopList" class="space-y-2 mb-6"></div>
          <h3 class="text-lg font-bold text-red-600 mb-3">üîª Bottom 10 Global Sites (41-50)</h3>
          <div id="top50BottomList" class="space-y-2"></div>
        </div>
        <div id="top50Loading" class="text-center py-8">
          <div class="text-4xl mb-2">üìä</div>
          <div class="font-bold text-gray-700">Loading today's rankings...</div>
          <div class="text-sm text-gray-500 mt-2">Updated daily at 12:01 AM PT</div>
        </div>
      </div>
      
      <div id="battleResults" class="hidden modern-card mb-8 p-6 rounded-lg border-4 border-yellow-400 bg-gradient-to-r from-yellow-50 to-orange-50">
        <div class="text-center">
          <div id="winnerIcon" class="hidden mb-4"><img class="winner-icon" alt="Winner logo"></div>
          <div id="winnerAnnouncement" class="text-4xl font-bold mb-4"></div>
          <div class="grid md:grid-cols-2 gap-4 mt-4">
            <div id="contestant1Results" class="p-4 bg-white rounded-lg shadow"></div>
            <div id="contestant2Results" class="p-4 bg-white rounded-lg shadow"></div>
          </div>
          <button id="shareRivalryBtn" class="mt-4 px-6 py-2 bg-blue-500 text-white font-bold rounded-lg hover:bg-blue-600">üì¢ SHARE THIS BATTLE</button>
        </div>
      </div>
      
      <footer class="mt-8 text-center text-sm text-gray-500">
        <p>Powered by independent analysis, Green Web Foundation API, and advanced heuristics</p>
        <p class="mt-1">Analysis time varies 5-15 seconds ‚Ä¢ Scores cached 5min for stability</p>
        <div class="mt-6 flex justify-center gap-3 flex-wrap">
          <button onclick="shareOn('twitter')" class="px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition text-xs font-bold" aria-label="Share on X (Twitter)">ùïè Share on X</button>
          <button onclick="shareOn('facebook')" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-xs font-bold" aria-label="Share on Facebook">üìò Share on Facebook</button>
          <button onclick="shareOn('whatsapp')" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition text-xs font-bold" aria-label="Share on WhatsApp">üí¨ Share on WhatsApp</button>
          <button onclick="shareOn('email')" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition text-xs font-bold" aria-label="Share via Email">‚úâÔ∏è Share via Email</button>
        </div>
        <p id="retroQuote" class="mt-4 text-xs italic text-gray-400" style="display:none;">"I am in doubt whether to pronounce you man or god,<br>but I think rather you are a god, Lycurgus."</p>
      </footer>
    </div>
    
    <div id="pscoreExplainerPage" class="page-content">
      <div class="page-header">
        <button onclick="openMenu()" class="text-3xl text-gray-700 hover:text-indigo-600 transition">‚ò∞</button>
        <button id="themeToggle2" onclick="toggleTheme()" class="px-4 py-2 bg-gray-200 rounded-lg text-sm font-bold hover:bg-gray-300 transition">üïπÔ∏è RETRO MODE</button>
      </div>
      <article class="modern-card bg-white rounded-2xl shadow-xl p-8">
        <h1 class="text-4xl font-bold text-indigo-600 mb-6">üìä P-Score Explainer</h1>
        <div class="prose max-w-none">
          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">What is the P-Score?</h2>
          <p class="text-gray-700 leading-relaxed mb-4">The P-Score (Performance Score) is Pythia's unified metric that distills complex website analysis into a single, actionable number from 0-100. Think of it as a health checkup for your digital presence, measuring website performance across multiple critical dimensions.</p>
          
          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">How It Works</h2>
          <p class="text-gray-700 leading-relaxed mb-4">Pythia analyzes 10 distinct aspects of your website‚Äîfrom lightning-fast loading times to privacy practices‚Äîand intelligently weighs them to generate one comprehensive score. Our algorithm evaluates site speed, accessibility, SEO optimization, security headers, and sustainability practices.</p>
          
          <div class="bg-indigo-50 p-6 rounded-lg my-6">
            <h3 class="text-xl font-bold text-indigo-600 mb-3">Weighting Philosophy</h3>
            <p class="weighting-philosophy text-gray-700 mb-2">The P-Score balances multiple factors for optimal website performance measurement. Each component is carefully weighted to reflect its importance in modern web development:</p>
            <ul class="weighting-philosophy list-disc ml-6 text-gray-700 space-y-1">
              <li><strong>Karpov Speed</strong> - Page load performance and responsiveness</li>
              <li><strong>Vortex Accessibility</strong> - Inclusive design for all users</li>
              <li><strong>Pulse SEO</strong> - Search engine optimization and social presence</li>
              <li><strong>Helix Privacy</strong> - User privacy and security measures</li>
              <li><strong>Nexus Mobile</strong> - Mobile-first responsive design</li>
              <li><strong>Echo Sustainability</strong> - Environmental impact and green hosting</li>
              <li><strong>Nova Infrastructure</strong> - Scalability and CDN usage</li>
              <li><strong>Quantum Quality</strong> - Code quality and best practices</li>
              <li><strong>Aether Technology</strong> - Modern frameworks and future-readiness</li>
              <li><strong>Eden Efficiency</strong> - Page weight and resource optimization</li>
            </ul>
          </div>
          
          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Score Ranges</h2>
          <div class="grid md:grid-cols-3 gap-4 my-4">
            <div class="p-4 bg-green-50 border-2 border-green-500 rounded-lg">
              <div class="text-3xl font-bold text-green-600">80-100</div>
              <div class="text-sm text-gray-700">Excellent - Top tier website performance</div>
            </div>
            <div class="p-4 bg-yellow-50 border-2 border-yellow-500 rounded-lg">
              <div class="text-3xl font-bold text-yellow-600">60-79</div>
              <div class="text-sm text-gray-700">Good - Room for optimization</div>
            </div>
            <div class="p-4 bg-red-50 border-2 border-red-500 rounded-lg">
              <div class="text-3xl font-bold text-red-600">0-59</div>
              <div class="text-sm text-gray-700">Needs Work - Critical issues detected</div>
            </div>
          </div>
          
          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Why One Score?</h2>
          <p class="text-gray-700 leading-relaxed mb-4">In today's complex web ecosystem, developers and stakeholders are overwhelmed with metrics. Page load times, accessibility scores, SEO rankings, security audits‚Äîeach tool provides different data in different formats. Pythia solves this by providing a single, comprehensive score that considers all these factors.</p>
          
          <p class="text-gray-700 leading-relaxed mb-4">The P-Score makes it easy to:</p>
          <ul class="list-disc ml-6 text-gray-700 space-y-2 mb-4">
            <li>Compare website performance at a glance</li>
            <li>Track improvements over time</li>
            <li>Communicate technical performance to non-technical stakeholders</li>
            <li>Identify which areas need the most attention</li>
            <li>Benchmark against competitors</li>
          </ul>
          
          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Methodology</h2>
          <p class="text-gray-700 leading-relaxed mb-4">Our scoring algorithm is based on industry best practices, W3C standards, and real-world performance data. Each component is measured using specific metrics:</p>
          
          <div class="bg-gray-50 p-4 rounded-lg my-4">
            <h4 class="font-bold text-gray-800 mb-2">For Speed (Karpov):</h4>
            <p class="text-sm text-gray-700">We measure Time to First Byte, First Contentful Paint, total page weight, number of requests, and resource optimization techniques like minification, compression, and lazy loading.</p>
          </div>
          
          <div class="bg-gray-50 p-4 rounded-lg my-4">
            <h4 class="font-bold text-gray-800 mb-2">For Accessibility (Vortex):</h4>
            <p class="text-sm text-gray-700">We analyze semantic HTML structure, ARIA labels, alt text coverage, color contrast, keyboard navigation support, and heading hierarchy.</p>
          </div>
          
          <div class="bg-gray-50 p-4 rounded-lg my-4">
            <h4 class="font-bold text-gray-800 mb-2">For Security (Helix):</h4>
            <p class="text-sm text-gray-700">We check for HTTPS, security headers (CSP, HSTS, X-Frame-Options), third-party trackers, and data collection practices.</p>
          </div>
          
          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Limitations</h2>
          <p class="text-gray-700 leading-relaxed mb-4">While Pythia provides comprehensive analysis, it's important to understand its limitations:</p>
          <ul class="list-disc ml-6 text-gray-700 space-y-2 mb-4">
            <li>Scores are based on publicly accessible content only</li>
            <li>Some advanced features may require authentication</li>
            <li>Client-side JavaScript execution is limited</li>
            <li>Results may vary based on geographic location and network conditions</li>
            <li>Heuristic analysis may not catch all issues</li>
          </ul>
          
          <p class="text-gray-700 leading-relaxed">Use Pythia as part of a comprehensive quality assurance strategy, not as the only measure of website performance.</p>
        </div>
      </article>
    </div>
    
    <div id="componentsPage" class="page-content">
      <div class="page-header">
        <button onclick="openMenu()" class="text-3xl text-gray-700 hover:text-indigo-600 transition">‚ò∞</button>
        <button id="themeToggle3" onclick="toggleTheme()" class="px-4 py-2 bg-gray-200 rounded-lg text-sm font-bold hover:bg-gray-300 transition">üïπÔ∏è RETRO MODE</button>
      </div>
      <article class="modern-card bg-white rounded-2xl shadow-xl p-8">
        <h1 class="text-4xl font-bold text-indigo-600 mb-6">üîß P-Score Components</h1>
        <p class="text-gray-700 mb-6">Each of Pythia's 10 components measures a specific aspect of website performance. Together, they provide a comprehensive view of your site's health.</p>
        
        <div class="space-y-6">
          <div class="border-l-4 border-blue-500 pl-4">
            <h3 class="text-xl font-bold text-blue-600">Karpov Speed</h3>
            <p class="component-description text-gray-700">Measures page load time, resource optimization, and rendering performance. Evaluates Time to Interactive, First Contentful Paint, and total page weight. Checks for async/defer script loading, minification, compression, and lazy loading techniques. Fast sites rank higher in search engines and provide better user experiences.</p>
            <div class="mt-2 text-sm text-gray-600">
              <strong>Key Metrics:</strong> Load time, script count, image count, stylesheet count, video embeds, optimization techniques
            </div>
          </div>
          
          <div class="border-l-4 border-green-500 pl-4">
            <h3 class="text-xl font-bold text-green-600">Vortex Accessibility</h3>
            <p class="component-description text-gray-700">Evaluates inclusive design: alt text on images, ARIA labels for screen readers, semantic HTML structure, and keyboard navigation support. Ensures your website is usable by people with disabilities, including those using assistive technologies. Proper accessibility benefits all users and is required by law in many jurisdictions.</p>
            <div class="mt-2 text-sm text-gray-600">
              <strong>Key Metrics:</strong> Alt text coverage, ARIA labels, semantic HTML, role attributes, heading hierarchy
            </div>
          </div>
          
          <div class="border-l-4 border-indigo-500 pl-4">
            <h3 class="text-xl font-bold text-indigo-600">Pulse SEO</h3>
            <p class="component-description text-gray-700">Analyzes meta tags, Open Graph cards for social sharing, Twitter Cards, canonical URLs, and search engine optimization basics. Ensures your content is discoverable and displays correctly when shared on social media. Proper SEO increases organic traffic and improves brand visibility.</p>
            <div class="mt-2 text-sm text-gray-600">
              <strong>Key Metrics:</strong> Title tags, meta descriptions, Open Graph tags, Twitter Cards, canonical URLs, structured data
            </div>
          </div>
          
          <div class="border-l-4 border-gray-700 pl-4">
            <h3 class="text-xl font-bold text-gray-700">Helix Privacy & Security</h3>
            <p class="component-description text-gray-700">Tracks third-party scripts, analytics trackers, and security headers (HSTS, CSP, X-Frame-Options). Evaluates how well your site protects user privacy and defends against common web attacks. Strong security builds trust and protects both users and your business.</p>
            <div class="mt-2 text-sm text-gray-600">
              <strong>Key Metrics:</strong> Tracker count, third-party scripts, security headers, HTTPS usage, privacy policies
            </div>
          </div>
          
          <div class="border-l-4 border-pink-500 pl-4">
            <h3 class="text-xl font-bold text-pink-600">Nexus Mobile</h3>
            <p class="component-description text-gray-700">Assesses mobile responsiveness, viewport configuration, media queries, and touch optimization. With over 50% of web traffic coming from mobile devices, responsive design is essential. Ensures your site works seamlessly across all screen sizes and devices.</p>
            <div class="mt-2 text-sm text-gray-600">
              <strong>Key Metrics:</strong> Viewport meta tag, media queries, touch targets, mobile-specific features
            </div>
          </div>
          
          <div class="border-l-4 border-lime-500 pl-4">
            <h3 class="text-xl font-bold text-lime-600">Echo Sustainability</h3>
            <p class="component-description text-gray-700">Checks green hosting and carbon-conscious practices via Green Web Foundation API. Evaluates page weight efficiency and use of modern image formats that reduce data transfer. Sustainable websites reduce environmental impact and can lower hosting costs.</p>
            <div class="mt-2 text-sm text-gray-600">
              <strong>Key Metrics:</strong> Green hosting verification, page weight, image optimization, data efficiency
            </div>
          </div>
          
          <div class="border-l-4 border-purple-500 pl-4">
            <h3 class="text-xl font-bold text-purple-600">Nova Infrastructure</h3>
            <p class="component-description text-gray-700">Checks CDN usage, caching strategies, HTTP/2 support, and compression. Evaluates whether your site can scale to handle traffic spikes and serve content efficiently to global audiences. Proper infrastructure reduces latency and improves reliability.</p>
            <div class="mt-2 text-sm text-gray-600">
              <strong>Key Metrics:</strong> CDN detection, cache headers, compression (Brotli/Gzip), edge computing
            </div>
          </div>
          
          <div class="border-l-4 border-violet-500 pl-4">
            <h3 class="text-xl font-bold text-violet-600">Quantum Code Quality</h3>
            <p class="component-description text-gray-700">Evaluates code quality, modern practices, SRI integrity checks, and web standards adherence. Looks for outdated practices like document.write() and eval(). Clean, modern code is easier to maintain, more secure, and performs better.</p>
            <div class="mt-2 text-sm text-gray-600">
              <strong>Key Metrics:</strong> Code patterns, best practices, integrity checks, standards compliance
            </div>
          </div>
          
          <div class="border-l-4 border-orange-500 pl-4">
            <h3 class="text-xl font-bold text-orange-600">Aether Technology</h3>
            <p class="component-description text-gray-700">Detects modern frameworks, WebAssembly, Service Workers, ES6 modules, and next-gen image formats (WebP, AVIF). Identifies progressive web app features and offline capabilities. Modern technologies improve performance and enable advanced features.</p>
            <div class="mt-2 text-sm text-gray-600">
              <strong>Key Metrics:</strong> Framework detection, WebAssembly, Service Workers, modern image formats, PWA features
            </div>
          </div>
          
          <div class="border-l-4 border-teal-500 pl-4">
            <h3 class="text-xl font-bold text-teal-600">Eden Efficiency</h3>
            <p class="component-description text-gray-700">Measures total page weight and resource usage. Evaluates whether your site sends an appropriate amount of data for its functionality. Lean sites load faster, cost less to host, and work better on slower connections. Optimal range is 0.5-1.5 MB for most sites.</p>
            <div class="mt-2 text-sm text-gray-600">
              <strong>Key Metrics:</strong> Total page size, resource count, bytes per feature, data efficiency
            </div>
          </div>
        </div>
        
        <div class="mt-8 bg-indigo-50 p-6 rounded-lg">
          <h3 class="text-xl font-bold text-indigo-600 mb-3">How Components Work Together</h3>
          <p class="text-gray-700 mb-4">The P-Score is not a simple average‚Äîit's a weighted calculation that reflects real-world priorities. Some factors, like speed and accessibility, have higher impact on user experience and business outcomes.</p>
          <p class="text-gray-700">Improving your P-Score requires a holistic approach. For example, adding many third-party trackers (lowering Helix) also slows down your site (lowering Karpov) and increases page weight (lowering Eden). The best websites optimize across all dimensions.</p>
        </div>
      </article>
    </div>
    
    <div id="customPage" class="page-content">
      <div class="page-header">
        <button onclick="openMenu()" class="text-3xl text-gray-700 hover:text-indigo-600 transition">‚ò∞</button>
        <button id="themeToggle4" onclick="toggleTheme()" class="px-4 py-2 bg-gray-200 rounded-lg text-sm font-bold hover:bg-gray-300 transition">üïπÔ∏è RETRO MODE</button>
      </div>
      <div class="modern-card bg-white rounded-2xl shadow-xl p-8">
        <h1 class="text-4xl font-bold text-indigo-600 mb-6">üíé Custom Scans (Premium)</h1>
        <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-8 rounded-lg mb-8">
          <h2 class="text-3xl font-bold mb-4">Unlock Unlimited Analysis</h2>
          <p class="text-lg mb-6">Get detailed breakdowns, unlimited scans, and export capabilities.</p>
          <div class="text-5xl font-bold mb-2">$5<span class="text-2xl">/month</span></div>
          <p class="text-sm opacity-90">or $50/year (save 17%)</p>
        </div>
        
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Premium Features</h2>
        <div class="grid md:grid-cols-2 gap-6 mb-8">
          <div class="bg-gray-50 p-6 rounded-lg">
            <div class="text-3xl mb-2">üöÄ</div>
            <h3 class="text-lg font-bold text-gray-800 mb-2">Unlimited Scans</h3>
            <p class="text-gray-700">No daily limits. Scan as many websites as you need for competitive analysis, monitoring, and research.</p>
          </div>
          
          <div class="bg-gray-50 p-6 rounded-lg">
            <div class="text-3xl mb-2">üìä</div>
            <h3 class="text-lg font-bold text-gray-800 mb-2">Detailed Breakdowns</h3>
            <p class="text-gray-700">See exactly how each score is calculated with granular metrics and recommendations for improvement.</p>
          </div>
          
          <div class="bg-gray-50 p-6 rounded-lg">
            <div class="text-3xl mb-2">üìà</div>
            <h3 class="text-lg font-bold text-gray-800 mb-2">Historical Tracking</h3>
            <p class="text-gray-700">Track score changes over time and see how optimizations impact your P-Score.</p>
          </div>
          
          <div class="bg-gray-50 p-6 rounded-lg">
            <div class="text-3xl mb-2">üîÑ</div>
            <h3 class="text-lg font-bold text-gray-800 mb-2">API Access</h3>
            <p class="text-gray-700">Integrate Pythia into your CI/CD pipeline or monitoring tools with full API access.</p>
          </div>
          
          <div class="bg-gray-50 p-6 rounded-lg">
            <div class="text-3xl mb-2">üì•</div>
            <h3 class="text-lg font-bold text-gray-800 mb-2">Export Reports</h3>
            <p class="text-gray-700">Download comprehensive PDF reports to share with stakeholders and clients.</p>
          </div>
          
          <div class="bg-gray-50 p-6 rounded-lg">
            <div class="text-3xl mb-2">üéØ</div>
            <h3 class="text-lg font-bold text-gray-800 mb-2">Custom Weightings</h3>
            <p class="text-gray-700">Adjust component weights to match your specific priorities and industry requirements.</p>
          </div>
        </div>
        
        <div class="text-center">
          <button class="px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-lg font-bold rounded-xl hover:from-indigo-700 hover:to-purple-700 transition transform hover:scale-105">
            Upgrade to Premium
          </button>
          <p class="text-sm text-gray-500 mt-4">30-day money-back guarantee ‚Ä¢ Cancel anytime</p>
        </div>
      </div>
    </div>
    
    <div id="aboutPage" class="page-content">
      <div class="page-header">
        <button onclick="openMenu()" class="text-3xl text-gray-700 hover:text-indigo-600 transition">‚ò∞</button>
        <button id="themeToggle5" onclick="toggleTheme()" class="px-4 py-2 bg-gray-200 rounded-lg text-sm font-bold hover:bg-gray-300 transition">üïπÔ∏è RETRO MODE</button>
      </div>
      <article class="modern-card bg-white rounded-2xl shadow-xl p-8">
        <h1 class="text-4xl font-bold text-indigo-600 mb-6">‚ÑπÔ∏è About Pythia</h1>
        <div class="prose max-w-none about-content">
          <h2 class="text-2xl font-bold text-gray-800 mb-3">The Oracle of Web Performance</h2>
          <p class="text-gray-700 leading-relaxed mb-4">Named after the legendary Oracle of Delphi, Pythia brings ancient wisdom to modern web analysis. Just as pilgrims once sought guidance from the Oracle, developers now turn to Pythia for insights into their websites' performance.</p>
          
          <div class="bg-indigo-50 p-6 rounded-lg my-6">
            <h3 class="text-xl font-bold text-indigo-600 mb-3">A Product of Cronix Holdings</h3>
            <p class="text-gray-700 leading-relaxed mb-4">Pythia is developed and maintained by <strong>Cronix Holdings</strong>, a technology company focused on creating tools that simplify complex technical analysis.</p>
            <p class="text-gray-700 leading-relaxed">Our mission is to democratize web performance analysis, making it accessible to developers, designers, marketers, and business owners alike.</p>
          </div>
          
          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Why Pythia?</h2>
          <p class="text-gray-700 leading-relaxed mb-4">In an era of overwhelming technical complexity, websites are judged by dozens of metrics across multiple dimensions. Google PageSpeed Insights, Lighthouse, WebPageTest, accessibility auditors, SEO analyzers‚Äîeach provides valuable data, but synthesizing it all is a challenge.</p>
          
          <p class="text-gray-700 leading-relaxed mb-4">Pythia solves this by providing:</p>
          <ul class="list-disc ml-6 text-gray-700 space-y-2 mb-4">
            <li><strong>One Unified Score</strong> - Easy to understand and communicate</li>
            <li><strong>Comprehensive Analysis</strong> - Covers all aspects of modern web performance</li>
            <li><strong>Actionable Insights</strong> - Shows where to focus improvement efforts</li>
            <li><strong>Fast Results</strong> - Complete analysis in seconds</li>
            <li><strong>No Setup Required</strong> - Just enter a URL and go</li>
          </ul>
          
          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Our Philosophy</h2>
          <p class="text-gray-700 leading-relaxed mb-4">We believe that:</p>
          <ul class="list-disc ml-6 text-gray-700 space-y-2 mb-4">
            <li>Performance is a feature, not an afterthought</li>
            <li>Accessibility benefits everyone, not just users with disabilities</li>
            <li>Privacy should be the default, not an option</li>
            <li>Sustainability matters in the digital world too</li>
            <li>Quality trumps quantity in every aspect of web development</li>
          </ul>
          
          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">The Technology Behind Pythia</h2>
          <p class="text-gray-700 leading-relaxed mb-4">Pythia is built on Cloudflare's edge infrastructure, enabling fast, global analysis with minimal latency. Our scanning engine:</p>
          <ul class="list-disc ml-6 text-gray-700 space-y-2 mb-4">
            <li>Fetches and analyzes HTML, headers, and resources</li>
            <li>Evaluates 100+ individual metrics across 10 categories</li>
            <li>Integrates with third-party APIs (like Green Web Foundation)</li>
            <li>Caches results intelligently for consistency</li>
            <li>Runs entirely on serverless infrastructure</li>
          </ul>
          
          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Roadmap</h2>
          <p class="text-gray-700 leading-relaxed mb-4">We're constantly improving Pythia. Upcoming features include:</p>
          <ul class="list-disc ml-6 text-gray-700 space-y-2 mb-4">
            <li>Historical tracking and trending</li>
            <li>Competitor comparison views</li>
            <li>Detailed improvement recommendations</li>
            <li>API access for automation</li>
            <li>Team collaboration features</li>
            <li>Custom alerting and monitoring</li>
            <li>Mobile app for on-the-go analysis</li>
          </ul>
          
          <h2 class="text-2xl font-bold text-gray-800 mt-6 mb-3">Contact & Feedback</h2>
          <p class="text-gray-700 leading-relaxed mb-4">Pythia is in active beta development. We welcome your feedback, bug reports, and feature requests.</p>
          <div class="bg-gray-50 p-6 rounded-lg">
            <p class="text-gray-700"><strong>Email:</strong> hello@cronixholdings.com</p>
            <p class="text-gray-700 mt-2"><strong>GitHub:</strong> github.com/CJTF32/Pythia</p>
            <p class="text-gray-700 mt-2"><strong>Twitter:</strong> @PythiaOracle</p>
          </div>
          
          <div class="mt-8 border-t pt-6">
            <p class="text-sm text-gray-500 italic">Pythia is an independent tool and is not affiliated with Google, Mozilla, or any other browser vendor. Scores are heuristic-based and for informational purposes. Always perform comprehensive testing before making production changes.</p>
          </div>
        </div>
      </article>
    </div>
  </div>
  
  <script>
    const CACHE_DURATION = 5 * 60 * 1000;
    const TOP50_API = '/api/top50';
    const ENTERPRISE_API = '/api/enterprise-daily';
    
    // UPDATED: Fixed missing rival icons and added more complete logo URLs
    const RIVALRIES = [
      { category: 'Academic', name1: 'Oxford', url1: 'https://www.ox.ac.uk', name2: 'Cambridge', url2: 'https://www.cam.ac.uk', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/ff/Oxford-University-Circlet.svg/120px-Oxford-University-Circlet.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/University_of_Cambridge_coat_of_arms_official.svg/120px-University_of_Cambridge_coat_of_arms_official.svg.png' },
      { category: 'Academic', name1: 'Harvard', url1: 'https://www.harvard.edu', name2: 'Yale', url2: 'https://www.yale.edu', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/29/Harvard_shield_wreath.svg/120px-Harvard_shield_wreath.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/07/Yale_University_Shield_1.svg/120px-Yale_University_Shield_1.svg.png' },
      { category: 'Academic', name1: 'MIT', url1: 'https://www.mit.edu', name2: 'Caltech', url2: 'https://www.caltech.edu', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/MIT_logo.svg/120px-MIT_logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/Caltech_logo.svg/120px-Caltech_logo.svg.png' },
      { category: 'Sport', name1: 'India (BCCI)', url1: 'https://www.bcci.tv', name2: 'Pakistan (PCB)', url2: 'https://www.pcb.com.pk', logo1: 'https://upload.wikimedia.org/wikipedia/en/thumb/d/dd/BCCI_Logo.svg/120px-BCCI_Logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/en/thumb/1/1a/PCB_Logo.svg/120px-PCB_Logo.svg.png' },
      { category: 'Sport', name1: 'England (ECB)', url1: 'https://www.ecb.co.uk', name2: 'Australia', url2: 'https://www.cricket.com.au', logo1: 'https://upload.wikimedia.org/wikipedia/en/thumb/3/35/England_and_Wales_Cricket_Board_Logo.svg/120px-England_and_Wales_Cricket_Board_Logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/en/thumb/9/9e/Cricket_Australia.svg/120px-Cricket_Australia.svg.png' },
      { category: 'Sport', name1: 'Springboks', url1: 'https://www.sarugby.co.za', name2: 'All Blacks', url2: 'https://www.nzrugby.co.nz', logo1: 'https://upload.wikimedia.org/wikipedia/en/thumb/f/fe/South_Africa_national_rugby_union_team_logo.svg/120px-South_Africa_national_rugby_union_team_logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/35/All_Blacks_logo.svg/120px-All_Blacks_logo.svg.png' },
      { category: 'Sport', name1: 'Manchester United', url1: 'https://www.manutd.com', name2: 'Liverpool', url2: 'https://www.liverpoolfc.com', logo1: 'https://upload.wikimedia.org/wikipedia/en/thumb/7/7a/Manchester_United_FC_crest.svg/120px-Manchester_United_FC_crest.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/en/thumb/0/0c/Liverpool_FC.svg/120px-Liverpool_FC.svg.png' },
      { category: 'Sport', name1: 'Arsenal', url1: 'https://www.arsenal.com', name2: 'Chelsea', url2: 'https://www.chelseafc.com', logo1: 'https://upload.wikimedia.org/wikipedia/en/thumb/5/53/Arsenal_FC.svg/120px-Arsenal_FC.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/en/thumb/c/cc/Chelsea_FC.svg/120px-Chelsea_FC.svg.png' },
      { category: 'Sport', name1: 'Real Madrid', url1: 'https://www.realmadrid.com', name2: 'Barcelona', url2: 'https://www.fcbarcelona.com', logo1: 'https://upload.wikimedia.org/wikipedia/en/thumb/5/56/Real_Madrid_CF.svg/120px-Real_Madrid_CF.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/en/thumb/4/47/FC_Barcelona_%28crest%29.svg/120px-FC_Barcelona_%28crest%29.svg.png' },
      { category: 'Sport', name1: 'LA Lakers', url1: 'https://www.nba.com/lakers', name2: 'Boston Celtics', url2: 'https://www.nba.com/celtics', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/3c/Los_Angeles_Lakers_logo.svg/120px-Los_Angeles_Lakers_logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/en/thumb/8/8f/Boston_Celtics.svg/120px-Boston_Celtics.svg.png' },
      { category: 'Sport', name1: 'Army', url1: 'https://www.westpoint.edu', name2: 'Navy', url2: 'https://www.usna.edu', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/United_States_Military_Academy_Coat_of_Arms.svg/120px-United_States_Military_Academy_Coat_of_Arms.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/United_States_Naval_Academy_seal.svg/120px-United_States_Naval_Academy_seal.svg.png' },
      { category: 'Sport', name1: 'NY Yankees', url1: 'https://www.mlb.com/yankees', name2: 'Red Sox', url2: 'https://www.mlb.com/redsox', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/New_York_Yankees_Primary_Logo.svg/120px-New_York_Yankees_Primary_Logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/en/thumb/6/6d/RedSoxPrimary_HangingSocks.svg/120px-RedSoxPrimary_HangingSocks.svg.png' },
      { category: 'Retail', name1: 'Amazon', url1: 'https://www.amazon.com', name2: 'Walmart', url2: 'https://www.walmart.com', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_logo.svg/120px-Amazon_logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Walmart_logo.svg/120px-Walmart_logo.svg.png' },
      { category: 'Retail', name1: 'Craigslist', url1: 'https://www.craigslist.org', name2: 'FB Marketplace', url2: 'https://www.facebook.com/marketplace', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Craigslist.svg/120px-Craigslist.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/2023_Facebook_icon.svg/120px-2023_Facebook_icon.svg.png' },
      { category: 'Retail', name1: 'McDonald\'s', url1: 'https://www.mcdonalds.com', name2: 'Burger King', url2: 'https://www.bk.com', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/McDonald%27s_Golden_Arches.svg/120px-McDonald%27s_Golden_Arches.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Burger_King_2020.svg/120px-Burger_King_2020.svg.png' },
      { category: 'Retail', name1: 'Starbucks', url1: 'https://www.starbucks.com', name2: 'Costa', url2: 'https://www.costa.co.uk', logo1: 'https://upload.wikimedia.org/wikipedia/en/thumb/d/d3/Starbucks_Corporation_Logo_2011.svg/120px-Starbucks_Corporation_Logo_2011.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/Costa_Coffee_logo.svg/120px-Costa_Coffee_logo.svg.png' },
      { category: 'Retail', name1: 'Louis Vuitton', url1: 'https://www.louisvuitton.com', name2: 'Gucci', url2: 'https://www.gucci.com', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Louis_Vuitton_logo_and_wordmark.svg/120px-Louis_Vuitton_logo_and_wordmark.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Gucci_logo.svg/120px-Gucci_logo.svg.png' },
      { category: 'Corporations', name1: 'Apple', url1: 'https://www.apple.com', name2: 'Samsung', url2: 'https://www.samsung.com', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Apple_logo_black.svg/120px-Apple_logo_black.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Samsung_Logo.svg/120px-Samsung_Logo.svg.png' },
      { category: 'Corporations', name1: 'Tesla', url1: 'https://www.tesla.com', name2: 'BYD', url2: 'https://www.byd.com', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/bd/Tesla_Motors.svg/120px-Tesla_Motors.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/BYD_Company_Logo.svg/120px-BYD_Company_Logo.svg.png' },
      { category: 'Corporations', name1: 'SpaceX', url1: 'https://www.spacex.com', name2: 'Blue Origin', url2: 'https://www.blueorigin.com', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/SpaceX_logo_black.svg/120px-SpaceX_logo_black.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Blue_Origin_logo.svg/120px-Blue_Origin_logo.svg.png' },
      { category: 'Cities', name1: 'London', url1: 'https://www.london.gov.uk', name2: 'Paris', url2: 'https://www.paris.fr', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/Flag_of_the_City_of_London.svg/120px-Flag_of_the_City_of_London.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/Flag_of_Paris.svg/120px-Flag_of_Paris.svg.png' },
      { category: 'Cities', name1: 'New York', url1: 'https://www.nyc.gov', name2: 'Tokyo', url2: 'https://www.metro.tokyo.lg.jp', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Flag_of_New_York_City.svg/120px-Flag_of_New_York_City.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Flag_of_Tokyo_Metropolis.svg/120px-Flag_of_Tokyo_Metropolis.svg.png' },
      { category: 'Cities', name1: 'Cape Town', url1: 'https://www.capetown.gov.za', name2: 'Rio de Janeiro', url2: 'https://www.rio.rj.gov.br', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Coat_of_arms_of_Cape_Town.svg/120px-Coat_of_arms_of_Cape_Town.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/63/Bandeira_da_cidade_do_Rio_de_Janeiro.svg/120px-Bandeira_da_cidade_do_Rio_de_Janeiro.svg.png' },
      { category: 'Nations', name1: 'White House', url1: 'https://www.whitehouse.gov', name2: 'No 10', url2: 'https://www.gov.uk', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Seal_of_the_President_of_the_United_States.svg/120px-Seal_of_the_President_of_the_United_States.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Flag_of_the_United_Kingdom.svg/120px-Flag_of_the_United_Kingdom.svg.png' },
      { category: 'IGOs', name1: 'United Nations', url1: 'https://www.un.org', name2: 'European Union', url2: 'https://europa.eu', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/UN_emblem_blue.svg/120px-UN_emblem_blue.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/Flag_of_Europe.svg/120px-Flag_of_Europe.svg.png' },
      { category: 'IGOs', name1: 'World Bank', url1: 'https://www.worldbank.org', name2: 'IMF', url2: 'https://www.imf.org', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/World_Bank_logo.svg/120px-World_Bank_logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/International_Monetary_Fund_logo.svg/120px-International_Monetary_Fund_logo.svg.png' },
      { category: 'IGOs', name1: 'G7', url1: 'https://www.g7germany.de', name2: 'G20', url2: 'https://www.g20.org', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/G7_logo.svg/120px-G7_logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/G20_logo.svg/120px-G20_logo.svg.png' },
      { category: 'Tech', name1: 'Google', url1: 'https://www.google.com', name2: 'Meta', url2: 'https://about.meta.com', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Google_2015_logo.svg/120px-Google_2015_logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/ab/Meta-Logo.png/120px-Meta-Logo.png' },
      { category: 'Tech', name1: 'DeepMind', url1: 'https://www.deepmind.com', name2: 'OpenAI', url2: 'https://www.openai.com', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/Google_DeepMind_logo.svg/120px-Google_DeepMind_logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/ChatGPT_logo.svg/120px-ChatGPT_logo.svg.png' },
      { category: 'Tech', name1: 'Anthropic', url1: 'https://www.anthropic.com', name2: 'xAI', url2: 'https://x.ai', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/78/Anthropic_logo.svg/120px-Anthropic_logo.svg.png', logo2: 'https://pbs.twimg.com/profile_images/1683943497569587200/XODJbDT-_200x200.jpg' },
      { category: 'Automotive', name1: 'McLaren', url1: 'https://www.mclaren.com', name2: 'Red Bull Racing', url2: 'https://www.redbullracing.com', logo1: 'https://upload.wikimedia.org/wikipedia/en/thumb/6/66/McLaren_Racing_logo.svg/120px-McLaren_Racing_logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/en/thumb/a/a9/Red_Bull_Racing_logo.svg/120px-Red_Bull_Racing_logo.svg.png' },
      { category: 'Automotive', name1: 'Ferrari', url1: 'https://www.ferrari.com', name2: 'Porsche', url2: 'https://www.porsche.com', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/Ferrari-Logo.svg/120px-Ferrari-Logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Porsche_logo.svg/120px-Porsche_logo.svg.png' },
      { category: 'Socials', name1: 'X', url1: 'https://twitter.com', name2: 'Threads', url2: 'https://www.threads.net', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/57/X_logo_2023_%28white%29.svg/120px-X_logo_2023_%28white%29.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Threads_%28app%29.svg/120px-Threads_%28app%29.svg.png' },
      { category: 'Socials', name1: 'TikTok', url1: 'https://www.tiktok.com', name2: 'YouTube', url2: 'https://www.youtube.com', logo1: 'https://upload.wikimedia.org/wikipedia/en/thumb/a/a9/TikTok_logo.svg/120px-TikTok_logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/YouTube_full-color_icon_%282017%29.svg/120px-YouTube_full-color_icon_%282017%29.svg.png' },
      { category: 'Socials', name1: 'LinkedIn', url1: 'https://www.linkedin.com', name2: 'BlueSky', url2: 'https://bsky.app', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/LinkedIn_logo_initials.png/120px-LinkedIn_logo_initials.png', logo2: 'https://avatars.githubusercontent.com/u/100814787?s=200&v=4' },
      { category: 'Socials', name1: 'WhatsApp', url1: 'https://www.whatsapp.com', name2: 'Telegram', url2: 'https://telegram.org', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/120px-WhatsApp.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Telegram_logo.svg/120px-Telegram_logo.svg.png' },
      { category: 'Entertainment', name1: 'Marvel', url1: 'https://www.marvel.com', name2: 'DC', url2: 'https://www.dc.com', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Marvel_Logo.svg/120px-Marvel_Logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/DC_Comics_logo.png/120px-DC_Comics_logo.png' },
      { category: 'Entertainment', name1: 'Netflix', url1: 'https://www.netflix.com', name2: 'Disney+', url2: 'https://www.disneyplus.com', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Netflix_2015_logo.svg/120px-Netflix_2015_logo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Disney%2B_logo.svg/120px-Disney%2B_logo.svg.png' },
      { category: 'Entertainment', name1: 'Nintendo', url1: 'https://www.nintendo.com', name2: 'PlayStation', url2: 'https://www.playstation.com', logo1: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Nintendo.svg/120px-Nintendo.svg.png', logo2: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/PlayStation_logo.svg/120px-PlayStation_logo.svg.png' }
    ];
    
    const metrics = [
      { id: 'karpov', name: 'Karpov Speed', desc: 'Page load performance', color: 'from-blue-500 to-cyan-500', tooltip: 'Measures load time, resource count, page weight, and optimization.' },
      { id: 'vortex', name: 'Vortex Access', desc: 'Accessibility score', color: 'from-green-500 to-emerald-500', tooltip: 'Evaluates image alt text, ARIA labels, semantic HTML.' },
      { id: 'nova', name: 'Nova Scale', desc: 'Infrastructure & CDN', color: 'from-purple-500 to-pink-500', tooltip: 'Checks for CDN usage, caching headers, compression.' },
      { id: 'aether', name: 'Aether Tech', desc: 'Modern technologies', color: 'from-orange-500 to-red-500', tooltip: 'Detects WebAssembly, Service Workers, modern frameworks.' },
      { id: 'pulse', name: 'Pulse SEO', desc: 'Search & social optimization', color: 'from-indigo-500 to-purple-500', tooltip: 'Analyzes meta tags, Open Graph, Twitter Cards.' },
      { id: 'eden', name: 'Eden Efficiency', desc: 'Page weight & size', color: 'from-teal-500 to-green-500', tooltip: 'Scores based on total page weight (optimal: 0.5-1.5 MB).' },
      { id: 'helix', name: 'Helix Privacy', desc: 'Security & tracking', color: 'from-gray-700 to-gray-900', tooltip: 'Counts trackers and checks security headers.' },
      { id: 'echo', name: 'Echo Green', desc: 'Sustainable hosting', color: 'from-lime-500 to-green-600', tooltip: 'Checks if hosting uses renewable energy.' },
      { id: 'quantum', name: 'Quantum Quality', desc: 'Best practices', color: 'from-violet-500 to-purple-600', tooltip: 'Checks for code quality indicators.' },
      { id: 'nexus', name: 'Nexus Mobile', desc: 'Mobile responsiveness', color: 'from-pink-500 to-rose-500', tooltip: 'Evaluates viewport meta tags and media queries.' }
    ];
    
    let currentData = null;
    let currentBattleData = null;
    let isRetro = false;
    
    function openMenu() {
      document.getElementById('menuOverlay').classList.add('open');
      document.getElementById('menuBackdrop').classList.add('open');
    }
    
    function closeMenu() {
      document.getElementById('menuOverlay').classList.remove('open');
      document.getElementById('menuBackdrop').classList.remove('open');
    }
    
    function showPage(pageId) {
      document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
      const pageMap = {
        'main': 'mainPage',
        'pscore-explainer': 'pscoreExplainerPage',
        'components': 'componentsPage',
        'custom': 'customPage',
        'about': 'aboutPage'
      };
      document.getElementById(pageMap[pageId]).classList.add('active');
      closeMenu();
      window.scrollTo(0, 0);
    }
    
    function toggleTheme() {
      isRetro = !isRetro;
      document.body.classList.toggle('retro');
      const buttons = document.querySelectorAll('[id^="themeToggle"]');
      buttons.forEach(btn => {
        btn.textContent = isRetro ? '‚ú® BORING MODE' : 'üïπÔ∏è RETRO MODE';
      });
      document.getElementById('pythiaLogo').style.display = isRetro ? 'block' : 'none';
      document.getElementById('retroQuote').style.display = isRetro ? 'block' : 'none';
    }
    
    function getCachedScan(url) {
      const cacheKey = `pythia_cache_${url}`;
      const cached = localStorage.getItem(cacheKey);
      if (!cached) return null;
      const data = JSON.parse(cached);
      const age = Date.now() - data.timestamp;
      if (age > CACHE_DURATION) {
        localStorage.removeItem(cacheKey);
        return null;
      }
      return { ...data, cacheAge: Math.floor(age / 1000) };
    }
    
    function setCachedScan(url, data) {
      const cacheKey = `pythia_cache_${url}`;
      const cacheData = { ...data, timestamp: Date.now() };
      localStorage.setItem(cacheKey, JSON.stringify(cacheData));
    }
    
    document.getElementById('themeToggle').addEventListener('click', toggleTheme);
    document.getElementById('scanBtn').addEventListener('click', analyzeSite);
    document.getElementById('urlInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') analyzeSite();
    });
    
    async function analyzeSite() {
      const url = document.getElementById('urlInput').value.trim();
      if (!url || !url.startsWith('http')) {
        alert('Please enter a valid URL starting with http:// or https://');
        return;
      }
      
      const cached = getCachedScan(url);
      if (cached) {
        currentData = cached;
        displayResults(cached, true);
        return;
      }
      
      const scanBtn = document.getElementById('scanBtn');
      scanBtn.textContent = 'ANALYZING...';
      scanBtn.disabled = true;
      scanBtn.classList.add('scanning');
      document.getElementById('resultsContainer').classList.add('hidden');
      document.getElementById('pscoreContainer').classList.add('hidden');
      document.getElementById('exportBtn').style.display = 'none';
      
      try {
        const response = await fetch('/api/scan', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ url })
        });
        
        if (!response.ok) throw new Error(`HTTP ${response.status}`);
        const data = await response.json();
        if (data.error) throw new Error(data.message || 'Unknown error');
        
        setCachedScan(url, data);
        currentData = data;
        displayResults(data, false);
      } catch (error) {
        alert(`Analysis failed: ${error.message}`);
      } finally {
        scanBtn.textContent = 'ANALYZE';
        scanBtn.disabled = false;
        scanBtn.classList.remove('scanning');
      }
    }
    
    function displayResults(data, fromCache) {
      document.getElementById('pscoreValue').textContent = data.pscore || '--';
      const scanDate = new Date(data.timestamp || Date.now()).toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });
      let cacheInfo = fromCache && data.cacheAge ? `<span class="cache-badge cache-stored">üíæ Cached ${Math.floor(data.cacheAge / 60)}m ago</span>` : '<span class="cache-badge cache-live">üü¢ Live</span>';
      document.getElementById('siteInfo').innerHTML = `${data.pageSize} ‚Ä¢ ${data.loadTime} ‚Ä¢ ${scanDate} ${cacheInfo}`;
      document.getElementById('pscoreContainer').classList.remove('hidden');
      
      const resultsContainer = document.getElementById('resultsContainer');
      resultsContainer.innerHTML = '';
      metrics.forEach(metric => {
        const value = data[metric.id] ?? '--';
        const card = document.createElement('div');
        card.className = `tooltip score-card bg-gradient-to-br ${metric.color} text-white p-5 rounded-xl shadow-lg transform transition hover:scale-105`;
        card.innerHTML = `<div class="text-xs font-bold uppercase opacity-90 mb-1">${metric.name}</div><div class="text-4xl font-bold mb-1">${value}</div><div class="text-xs opacity-80">${metric.desc}</div><span class="tooltiptext">${metric.tooltip}</span>`;
        resultsContainer.appendChild(card);
      });
      
      resultsContainer.classList.remove('hidden');
      document.getElementById('exportBtn').style.display = 'inline-block';
      saveToLeaderboard(data);
    }
    
    document.getElementById('exportBtn').addEventListener('click', () => {
      if (!currentData) return;
      const exportObj = {
        url: currentData.url,
        timestamp: currentData.timestamp,
        scores: { pscore: currentData.pscore, karpov: currentData.karpov, vortex: currentData.vortex, nova: currentData.nova, aether: currentData.aether, pulse: currentData.pulse, eden: currentData.eden, helix: currentData.helix, echo: currentData.echo, quantum: currentData.quantum, nexus: currentData.nexus },
        metadata: { pageSize: currentData.pageSize, loadTime: currentData.loadTime }
      };
      const blob = new Blob([JSON.stringify(exportObj, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `pythia-${new Date().getTime()}.json`;
      a.click();
      URL.revokeObjectURL(url);
    });
    
    function saveToLeaderboard(data) {
      let leaderboard = JSON.parse(localStorage.getItem('pythiaLeaderboard') || '[]');
      leaderboard.push({ url: data.url, pscore: data.pscore, timestamp: data.timestamp });
      leaderboard.sort((a, b) => b.pscore - a.pscore);
      if (leaderboard.length > 100) leaderboard = leaderboard.slice(0, 100);
      localStorage.setItem('pythiaLeaderboard', JSON.stringify(leaderboard));
      updateLeaderboardDisplay();
    }
    
    function updateLeaderboardDisplay() {
      const leaderboard = JSON.parse(localStorage.getItem('pythiaLeaderboard') || '[]');
      if (leaderboard.length < 3) return;
      document.getElementById('leaderboard').classList.remove('hidden');
      const topSites = leaderboard.slice(0, 10);
      const bottomSites = leaderboard.slice(-10).reverse();
      
      document.getElementById('topSites').innerHTML = topSites.map((site, i) => `
        <div class="leaderboard-entry flex justify-between items-center p-2 rounded">
          <span class="text-sm font-bold text-gray-700">${i + 1}. ${new URL(site.url).hostname}</span>
          <span class="text-lg font-bold text-green-600">${site.pscore}</span>
        </div>
      `).join('');
      
      document.getElementById('bottomSites').innerHTML = bottomSites.map((site, i) => {
        const rank = leaderboard.length - 9 + i;
        return `<div class="leaderboard-entry flex justify-between items-center p-2 rounded">
          <span class="text-sm font-bold text-gray-700">${rank}. ${new URL(site.url).hostname}</span>
          <span class="text-lg font-bold text-red-600">${site.pscore}</span>
        </div>`;
      }).join('');
    }
    
    function renderRivalries() {
      const rivalryList = document.getElementById('rivalryList');
      rivalryList.innerHTML = RIVALRIES.map((rivalry, index) => {
        const displayName1 = rivalry.category === 'Socials' && rivalry.name1 === 'X' ? 'X (twitter.com)' : rivalry.name1;
        return `<div class="rivalry-item flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-indigo-50 transition">
          <div class="flex-1">
            <div class="text-xs font-bold text-gray-500 mb-1">${rivalry.category}</div>
            <div class="font-bold text-gray-800">${displayName1} v ${rivalry.name2}</div>
          </div>
          <button onclick="startBattle('${rivalry.url1}', '${rivalry.url2}', '${rivalry.name1}', '${rivalry.name2}', '${rivalry.logo1 || ''}', '${rivalry.logo2 || ''}')" 
            class="retro-button px-4 py-2 bg-red-500 text-white font-bold rounded-lg hover:bg-red-600 transition text-sm">‚öîÔ∏è</button>
        </div>`;
      }).join('');
    }
    
    document.getElementById('customBattleBtn').addEventListener('click', () => {
      const url1 = document.getElementById('customUrl1').value.trim();
      const url2 = document.getElementById('customUrl2').value.trim();
      if (!url1 || !url2 || !url1.startsWith('http') || !url2.startsWith('http')) {
        alert('Please enter two valid URLs');
        return;
      }
      const name1 = new URL(url1).hostname;
      const name2 = new URL(url2).hostname;
      startBattle(url1, url2, name1, name2);
    });
    
    async function startBattle(url1, url2, name1, name2, logo1 = '', logo2 = '') {
      document.getElementById('battleResults').classList.add('hidden');
      const btn = event.target;
      btn.innerHTML = '<span class="sword-fighting">‚öîÔ∏è</span>';
      btn.disabled = true;
      
      try {
        let result1 = getCachedScan(url1);
        let result2 = getCachedScan(url2);
        const promises = [];
        
        if (!result1) {
          promises.push(fetch('/api/scan', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ url: url1 }) })
            .then(r => r.json()).then(data => { setCachedScan(url1, data); result1 = data; }));
        }
        if (!result2) {
          promises.push(fetch('/api/scan', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ url: url2 }) })
            .then(r => r.json()).then(data => { setCachedScan(url2, data); result2 = data; }));
        }
        
        await Promise.all(promises);
        
        const winner = result1.pscore > result2.pscore ? name1 : result2.pscore > result1.pscore ? name2 : 'TIE';
        const winnerLogo = result1.pscore > result2.pscore ? logo1 : result2.pscore > result1.pscore ? logo2 : '';
        const battleDate = new Date().toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });
        
        currentBattleData = { name1, name2, result1, result2, winner, battleDate };
        
        const winnerIcon = document.getElementById('winnerIcon');
        if (winnerLogo && winner !== 'TIE') {
          winnerIcon.querySelector('img').src = winnerLogo;
          winnerIcon.querySelector('img').alt = `${winner} logo`;
          winnerIcon.classList.remove('hidden');
        } else {
          winnerIcon.classList.add('hidden');
        }
        
        const winnerAnnouncement = document.getElementById('winnerAnnouncement');
        if (winner === 'TIE') {
          winnerAnnouncement.innerHTML = `ü§ù IT'S A TIE!<br><span class="text-2xl">${result1.pscore} - ${result2.pscore}</span><br><span class="text-xs opacity-75 mt-2 block">${battleDate}</span>`;
        } else {
          const winScore = winner === name1 ? result1.pscore : result2.pscore;
          const loseScore = winner === name1 ? result2.pscore : result1.pscore;
          winnerAnnouncement.innerHTML = `üèÜ ${winner.toUpperCase()} IS THE WINNER!<br><span class="text-2xl">${winScore} - ${loseScore}</span><br><span class="text-xs opacity-75 mt-2 block">${battleDate}</span>`;
        }
        
        document.getElementById('contestant1Results').innerHTML = `<div class="text-center"><div class="text-xl font-bold mb-2">${name1}</div><div class="text-3xl font-bold text-indigo-600">${result1.pscore}</div><div class="text-xs text-gray-500 mt-2">Speed: ${result1.karpov} ‚Ä¢ Access: ${result1.vortex}<br>Scale: ${result1.nova} ‚Ä¢ Tech: ${result1.aether}</div></div>`;
        document.getElementById('contestant2Results').innerHTML = `<div class="text-center"><div class="text-xl font-bold mb-2">${name2}</div><div class="text-3xl font-bold text-purple-600">${result2.pscore}</div><div class="text-xs text-gray-500 mt-2">Speed: ${result2.karpov} ‚Ä¢ Access: ${result2.vortex}<br>Scale: ${result2.nova} ‚Ä¢ Tech: ${result2.aether}</div></div>`;
        
        document.getElementById('battleResults').classList.remove('hidden');
        setTimeout(() => { window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }); }, 100);
      } catch (error) {
        alert(`Battle failed: ${error.message}`);
      } finally {
        btn.innerHTML = '‚öîÔ∏è';
        btn.disabled = false;
      }
    }
    
    document.getElementById('shareRivalryBtn').addEventListener('click', () => {
      if (currentBattleData) {
        const { name1, name2, result1, result2, winner, battleDate } = currentBattleData;
        const text = `‚öîÔ∏è PYTHIA BATTLE (${battleDate}): ${name1} (${result1.pscore}) v ${name2} (${result2.pscore}) - ${winner.toUpperCase()} WINS! üèÜ`;
        shareContent(text, window.location.href);
      }
    });
    
    async function loadTop50Results() {
      try {
        const response = await fetch(TOP50_API);
        const data = await response.json();
        if (data.error) throw new Error(data.message);
        
        const sorted = data.results.sort((a, b) => b.pscore - a.pscore);
        const top10 = sorted.slice(0, 10);
        const bottom10 = sorted.slice(-10);
        const scanDate = new Date(data.timestamp).toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit', timeZone: 'America/Los_Angeles' });
        
        document.getElementById('top50TopList').innerHTML = `<div class="text-xs text-gray-500 mb-3 italic">Last scan: ${scanDate} PT</div>${top10.map((site, i) => {
          const avgDisplay = site.fiveDayAvg ? ` (5d avg: ${site.fiveDayAvg})` : '';
          return `<div class="leaderboard-entry flex justify-between items-center p-2 rounded bg-green-50"><span class="text-sm font-bold text-gray-700">${i + 1}. ${new URL(site.url).hostname}</span><span class="text-lg font-bold text-green-600">${site.pscore}${avgDisplay}</span></div>`;
        }).join('')}`;
        
        document.getElementById('top50BottomList').innerHTML = `<div class="text-xs text-gray-500 mb-3 italic">Last scan: ${scanDate} PT</div>${bottom10.reverse().map((site, i) => {
          const rank = sorted.length - (9 - i);
          const avgDisplay = site.fiveDayAvg ? ` (5d avg: ${site.fiveDayAvg})` : '';
          return `<div class="leaderboard-entry flex justify-between items-center p-2 rounded bg-red-50"><span class="text-sm font-bold text-gray-700">${rank}. ${new URL(site.url).hostname}</span><span class="text-lg font-bold text-red-600">${site.pscore}${avgDisplay}</span></div>`;
        }).join('')}`;
        
        document.getElementById('top50Loading').classList.add('hidden');
        document.getElementById('top50Results').classList.remove('hidden');
      } catch (error) {
        document.getElementById('top50Loading').innerHTML = `<div class="text-red-600 font-bold">Failed to load rankings</div><div class="text-sm text-gray-500 mt-2">${error.message}</div>`;
      }
    }
    
    async function loadEnterpriseDaily() {
      try {
        const response = await fetch(ENTERPRISE_API);
        const data = await response.json();
        if (data.error) throw new Error(data.message);
        
        const winner = data.winner;
        document.getElementById('enterpriseWinner').textContent = new URL(winner.url).hostname;
        document.getElementById('enterprisePscore').textContent = winner.pscore;
        document.getElementById('enterpriseLoadTime').textContent = winner.loadTime;
        document.getElementById('enterpriseTotalScanned').textContent = `From ${data.totalScanned} sites scanned on ${data.scanDate}`;
        document.getElementById('enterpriseLink').href = winner.url;
        
        document.getElementById('enterpriseDailyLoading').classList.add('hidden');
        document.getElementById('enterpriseDailyResults').classList.remove('hidden');
      } catch (error) {
        document.getElementById('enterpriseDailyLoading').innerHTML = `<div class="text-gray-600 font-bold">No scan available yet</div><div class="text-sm text-gray-500 mt-2">${error.message}</div>`;
      }
    }
    
    function shareOn(platform) {
      const text = 'Check out Pythia - The ultimate website performance oracle! ONE SCORE TO RANK THEM ALL üîÆ';
      const url = window.location.href;
      shareContent(text, url, platform);
    }
    
    function shareContent(text, url, platform = null) {
      const encodedText = encodeURIComponent(text);
      const encodedUrl = encodeURIComponent(url);
      if (!platform) {
        if (navigator.share) navigator.share({ title: 'Pythia', text, url });
        return;
      }
      let shareUrl;
      switch(platform) {
        case 'twitter': shareUrl = `https://twitter.com/intent/tweet?text=${encodedText}&url=${encodedUrl}`; break;
        case 'facebook': shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`; break;
        case 'whatsapp': shareUrl = `https://wa.me/?text=${encodedText}%20${encodedUrl}`; break;
        case 'email': shareUrl = `mailto:?subject=${encodeURIComponent('Pythia - Website Performance Oracle')}&body=${encodedText}%20${encodedUrl}`; break;
      }
      if (shareUrl) window.open(shareUrl, '_blank', 'width=600,height=400');
    }
    
    updateLeaderboardDisplay();
    renderRivalries();
    loadTop50Results();
    loadEnterpriseDaily();
  </script>
</body>
</html>
